!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("webgl-renderer",[],e):"object"==typeof exports?exports["webgl-renderer"]=e():t["webgl-renderer"]=e()}(this,function(){return function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=18)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Constants={floatsPerPoint:3,floatsPerColor:3,verticiesPerTriangle:3,floatsPerTriangle:9,defaultAlpha:1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){void 0===t&&(t=new Float32Array(0)),void 0===e&&(e=0),this.arr=t,this.size=t.length,this._sizeLimit=e}return t.prototype.addNumber=function(t){var e=this.size+1;if(this._sizeLimit&&e>this._sizeLimit)return!1;var i=this._sizeLimit?Math.min(2*e,this._sizeLimit):2*e;if(e>=this.arr.length){var o=this.arr;this.arr=new Float32Array(i),this.arr.set(o)}return this.arr[this.size]=t,this.size=e,!0},t.prototype.addArray=function(t){var e=this.size+t.length;this._sizeLimit&&this._sizeLimit;if(this._sizeLimit&&e>this._sizeLimit)return!1;var i=this._sizeLimit?Math.min(2*e,this._sizeLimit):2*e;if(e>=this.arr.length){var o=this.arr;this.arr=new Float32Array(i),this.arr.set(o)}return this.arr.set(t,this.size),this.size=e,!0},t.prototype.remove=function(t,e){if(void 0===e&&(e=1),t<0||t>=this.arr.length)throw"index("+t+") is out of bounds";e=e>0?e:1;for(var i=t,o=i+e;o<this.size;o++)this.arr[i]=this.arr[o],i++;this.arr.fill(0,i);var n=t+e>=this.size,r=n?this.size-t:this.size-e;this.size-=r},t.prototype.getTrimmedArray=function(){if(this.arr.length>this.size){for(var t=new Float32Array(this.size),e=0;e<t.length;e++)t[e]=this.arr[e];return t}return this.arr},t}();e.Float32Vector=o},function(t,e,i){!function(e,i){t.exports=i()}(0,function(){return function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.elements=new Float32Array(3),this.elements[0]=t,this.elements[1]=e,this.elements[2]=i}return t.prototype.normalize=function(){var t=this.elements,e=t[0],i=t[1],o=t[2],n=Math.sqrt(e*e+i*i+o*o);return n?1===n?this:(n=1/n,t[0]=e*n,t[1]=i*n,t[2]=o*n,this):(t[0]=0,t[1]=0,t[2]=0,this)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},Object.defineProperty(t.prototype,"x",{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t},enumerable:!0,configurable:!0}),t}();e.Vec3=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=1),this.elements=new Float32Array(4),this.elements[0]=t,this.elements[1]=e,this.elements[2]=i,this.elements[3]=o}return Object.defineProperty(t.prototype,"x",{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this.elements[3]},set:function(t){this.elements[3]=t},enumerable:!0,configurable:!0}),t}();e.Vec4=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(3);e.Mat4=o.Mat4;var n=i(1);e.Vec4=n.Vec4;var r=i(0);e.Vec3=r.Vec3},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),n=i(1),r=function(){function t(t){if(void 0===t&&(t=null),t){this.elements=new Float32Array(16);for(var e=0;e<16;++e)this.elements[e]=t.elements[e]}else this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return t.prototype.setIdentity=function(){var t=this.elements;return t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,this},t.prototype.set=function(t){var e,i,o;if(i=t.elements,o=this.elements,i!==o){for(e=0;e<16;++e)o[e]=i[e];return this}},t.prototype.multiply=function(t){return this.concat(t)},t.prototype.multiplyVector3=function(t){var e=this.elements,i=t.elements,n=new o.Vec3,r=n.elements;return r[0]=i[0]*e[0]+i[1]*e[4]+i[2]*e[8]+e[11],r[1]=i[0]*e[1]+i[1]*e[5]+i[2]*e[9]+e[12],r[2]=i[0]*e[2]+i[1]*e[6]+i[2]*e[10]+e[13],n},t.prototype.multiplyVector4=function(t){var e=this.elements,i=t.elements,o=new n.Vec4,r=o.elements;return r[0]=i[0]*e[0]+i[1]*e[4]+i[2]*e[8]+i[3]*e[12],r[1]=i[0]*e[1]+i[1]*e[5]+i[2]*e[9]+i[3]*e[13],r[2]=i[0]*e[2]+i[1]*e[6]+i[2]*e[10]+i[3]*e[14],r[3]=i[0]*e[3]+i[1]*e[7]+i[2]*e[11]+i[3]*e[15],o},t.prototype.transpose=function(){var t,e;return t=this.elements,e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},t.prototype.setInverseOf=function(t){var e,i,o,n,r;if(i=t.elements,o=this.elements,n=new Float32Array(16),n[0]=i[5]*i[10]*i[15]-i[5]*i[11]*i[14]-i[9]*i[6]*i[15]+i[9]*i[7]*i[14]+i[13]*i[6]*i[11]-i[13]*i[7]*i[10],n[4]=-i[4]*i[10]*i[15]+i[4]*i[11]*i[14]+i[8]*i[6]*i[15]-i[8]*i[7]*i[14]-i[12]*i[6]*i[11]+i[12]*i[7]*i[10],n[8]=i[4]*i[9]*i[15]-i[4]*i[11]*i[13]-i[8]*i[5]*i[15]+i[8]*i[7]*i[13]+i[12]*i[5]*i[11]-i[12]*i[7]*i[9],n[12]=-i[4]*i[9]*i[14]+i[4]*i[10]*i[13]+i[8]*i[5]*i[14]-i[8]*i[6]*i[13]-i[12]*i[5]*i[10]+i[12]*i[6]*i[9],n[1]=-i[1]*i[10]*i[15]+i[1]*i[11]*i[14]+i[9]*i[2]*i[15]-i[9]*i[3]*i[14]-i[13]*i[2]*i[11]+i[13]*i[3]*i[10],n[5]=i[0]*i[10]*i[15]-i[0]*i[11]*i[14]-i[8]*i[2]*i[15]+i[8]*i[3]*i[14]+i[12]*i[2]*i[11]-i[12]*i[3]*i[10],n[9]=-i[0]*i[9]*i[15]+i[0]*i[11]*i[13]+i[8]*i[1]*i[15]-i[8]*i[3]*i[13]-i[12]*i[1]*i[11]+i[12]*i[3]*i[9],n[13]=i[0]*i[9]*i[14]-i[0]*i[10]*i[13]-i[8]*i[1]*i[14]+i[8]*i[2]*i[13]+i[12]*i[1]*i[10]-i[12]*i[2]*i[9],n[2]=i[1]*i[6]*i[15]-i[1]*i[7]*i[14]-i[5]*i[2]*i[15]+i[5]*i[3]*i[14]+i[13]*i[2]*i[7]-i[13]*i[3]*i[6],n[6]=-i[0]*i[6]*i[15]+i[0]*i[7]*i[14]+i[4]*i[2]*i[15]-i[4]*i[3]*i[14]-i[12]*i[2]*i[7]+i[12]*i[3]*i[6],n[10]=i[0]*i[5]*i[15]-i[0]*i[7]*i[13]-i[4]*i[1]*i[15]+i[4]*i[3]*i[13]+i[12]*i[1]*i[7]-i[12]*i[3]*i[5],n[14]=-i[0]*i[5]*i[14]+i[0]*i[6]*i[13]+i[4]*i[1]*i[14]-i[4]*i[2]*i[13]-i[12]*i[1]*i[6]+i[12]*i[2]*i[5],n[3]=-i[1]*i[6]*i[11]+i[1]*i[7]*i[10]+i[5]*i[2]*i[11]-i[5]*i[3]*i[10]-i[9]*i[2]*i[7]+i[9]*i[3]*i[6],n[7]=i[0]*i[6]*i[11]-i[0]*i[7]*i[10]-i[4]*i[2]*i[11]+i[4]*i[3]*i[10]+i[8]*i[2]*i[7]-i[8]*i[3]*i[6],n[11]=-i[0]*i[5]*i[11]+i[0]*i[7]*i[9]+i[4]*i[1]*i[11]-i[4]*i[3]*i[9]-i[8]*i[1]*i[7]+i[8]*i[3]*i[5],n[15]=i[0]*i[5]*i[10]-i[0]*i[6]*i[9]-i[4]*i[1]*i[10]+i[4]*i[2]*i[9]+i[8]*i[1]*i[6]-i[8]*i[2]*i[5],0==(r=i[0]*n[0]+i[1]*n[4]+i[2]*n[8]+i[3]*n[12]))return this;for(r=1/r,e=0;e<16;e++)o[e]=n[e]*r;return this},t.prototype.invert=function(){return this.setInverseOf(this)},t.prototype.setOrtho=function(t,e,i,o,n,r){var s,a,u,c;if(t===e||i===o||n===r)throw"null frustum";return a=1/(e-t),u=1/(o-i),c=1/(r-n),s=this.elements,s[0]=2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*u,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=-2*c,s[11]=0,s[12]=-(e+t)*a,s[13]=-(o+i)*u,s[14]=-(r+n)*c,s[15]=1,this},t.prototype.ortho=function(e,i,o,n,r,s){return this.concat((new t).setOrtho(e,i,o,n,r,s))},t.prototype.setFrustum=function(t,e,i,o,n,r){var s,a,u,c;if(t===e||o===i||n===r)throw"null frustum";if(n<=0)throw"near <= 0";if(r<=0)throw"far <= 0";return a=1/(e-t),u=1/(o-i),c=1/(r-n),s=this.elements,s[0]=2*n*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*n*u,s[6]=0,s[7]=0,s[8]=(e+t)*a,s[9]=(o+i)*u,s[10]=-(r+n)*c,s[11]=-1,s[12]=0,s[13]=0,s[14]=-2*n*r*c,s[15]=0,this},t.prototype.frustum=function(e,i,o,n,r,s){return this.concat((new t).setFrustum(e,i,o,n,r,s))},t.prototype.setPerspective=function(t,e,i,o){var n,r,s,a;if(i===o||0===e)throw"null frustum";if(i<=0)throw"near <= 0";if(o<=0)throw"far <= 0";if(t=Math.PI*t/180/2,0===(s=Math.sin(t)))throw"null frustum";return r=1/(o-i),a=Math.cos(t)/s,n=this.elements,n[0]=a/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=-(o+i)*r,n[11]=-1,n[12]=0,n[13]=0,n[14]=-2*i*o*r,n[15]=0,this},t.prototype.perspective=function(e,i,o,n){return this.concat((new t).setPerspective(e,i,o,n))},t.prototype.setScale=function(t,e,i){var o=this.elements;return o[0]=t,o[4]=0,o[8]=0,o[12]=0,o[1]=0,o[5]=e,o[9]=0,o[13]=0,o[2]=0,o[6]=0,o[10]=i,o[14]=0,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},t.prototype.scale=function(t,e,i){var o=this.elements;return o[0]*=t,o[4]*=e,o[8]*=i,o[1]*=t,o[5]*=e,o[9]*=i,o[2]*=t,o[6]*=e,o[10]*=i,o[3]*=t,o[7]*=e,o[11]*=i,this},t.prototype.setTranslate=function(t,e,i){var o=this.elements;return o[0]=1,o[4]=0,o[8]=0,o[12]=t,o[1]=0,o[5]=1,o[9]=0,o[13]=e,o[2]=0,o[6]=0,o[10]=1,o[14]=i,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},t.prototype.translate=function(t,e,i){var o=this.elements;return o[12]+=o[0]*t+o[4]*e+o[8]*i,o[13]+=o[1]*t+o[5]*e+o[9]*i,o[14]+=o[2]*t+o[6]*e+o[10]*i,o[15]+=o[3]*t+o[7]*e+o[11]*i,this},t.prototype.setRotate=function(t,e,i,o){var n,r,s,a,u,c,h,l,f,p,d,g;return t=Math.PI*t/180,n=this.elements,r=Math.sin(t),s=Math.cos(t),0!==e&&0===i&&0===o?(e<0&&(r=-r),n[0]=1,n[4]=0,n[8]=0,n[12]=0,n[1]=0,n[5]=s,n[9]=-r,n[13]=0,n[2]=0,n[6]=r,n[10]=s,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):0===e&&0!==i&&0===o?(i<0&&(r=-r),n[0]=s,n[4]=0,n[8]=r,n[12]=0,n[1]=0,n[5]=1,n[9]=0,n[13]=0,n[2]=-r,n[6]=0,n[10]=s,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):0===e&&0===i&&0!==o?(o<0&&(r=-r),n[0]=s,n[4]=-r,n[8]=0,n[12]=0,n[1]=r,n[5]=s,n[9]=0,n[13]=0,n[2]=0,n[6]=0,n[10]=1,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):(a=Math.sqrt(e*e+i*i+o*o),1!==a&&(u=1/a,e*=u,i*=u,o*=u),c=1-s,h=e*i,l=i*o,f=o*e,p=e*r,d=i*r,g=o*r,n[0]=e*e*c+s,n[1]=h*c+g,n[2]=f*c-d,n[3]=0,n[4]=h*c-g,n[5]=i*i*c+s,n[6]=l*c+p,n[7]=0,n[8]=f*c+d,n[9]=l*c-p,n[10]=o*o*c+s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1),this},t.prototype.rotate=function(e,i,o,n){return this.concat((new t).setRotate(e,i,o,n))},t.prototype.setLookAt=function(t,e,i,o,n,r,s,a,u){var c,h,l,f,p,d,g,_,y,b,P,m;return h=o-t,l=n-e,f=r-i,p=1/Math.sqrt(h*h+l*l+f*f),h*=p,l*=p,f*=p,d=l*u-f*a,g=f*s-h*u,_=h*a-l*s,y=1/Math.sqrt(d*d+g*g+_*_),d*=y,g*=y,_*=y,b=g*f-_*l,P=_*h-d*f,m=d*l-g*h,c=this.elements,c[0]=d,c[1]=b,c[2]=-h,c[3]=0,c[4]=g,c[5]=P,c[6]=-l,c[7]=0,c[8]=_,c[9]=m,c[10]=-f,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this.translate(-t,-e,-i)},t.prototype.lookAt=function(e,i,o,n,r,s,a,u,c){return this.concat((new t).setLookAt(e,i,o,n,r,s,a,u,c))},t.prototype.dropShadow=function(e,i){var o=new t,n=o.elements,r=e[0]*i[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3];return n[0]=r-i[0]*e[0],n[1]=-i[1]*e[0],n[2]=-i[2]*e[0],n[3]=-i[3]*e[0],n[4]=-i[0]*e[1],n[5]=r-i[1]*e[1],n[6]=-i[2]*e[1],n[7]=-i[3]*e[1],n[8]=-i[0]*e[2],n[9]=-i[1]*e[2],n[10]=r-i[2]*e[2],n[11]=-i[3]*e[2],n[12]=-i[0]*e[3],n[13]=-i[1]*e[3],n[14]=-i[2]*e[3],n[15]=r-i[3]*e[3],this.concat(o)},t.prototype.dropShadowDirectionally=function(t,e,i,o,n,r,s,a,u){var c=o*t+n*e+r*i;return this.dropShadow([t,e,i,-c],[s,a,u,0])},t.prototype.concat=function(t){var e,i,o,n,r,s,a,u;if(i=this.elements,o=this.elements,n=t.elements,i===n)for(n=new Float32Array(16),e=0;e<16;++e)n[e]=i[e];for(e=0;e<4;e++)r=o[e],s=o[e+4],a=o[e+8],u=o[e+12],i[e]=r*n[0]+s*n[1]+a*n[2]+u*n[3],i[e+4]=r*n[4]+s*n[5]+a*n[6]+u*n[7],i[e+8]=r*n[8]+s*n[9]+a*n[10]+u*n[11],i[e+12]=r*n[12]+s*n[13]+a*n[14]+u*n[15];return this},t}();e.Mat4=r}])})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=i(10),r=i(0),s=i(5),a=function(){function t(t,e,i){void 0===t&&(t=s.Settings.defaultColor),void 0===e&&(e=null),void 0===i&&(i=null),this.rgbColor=t,this._modelMatrix=(new o.Mat4).setIdentity(),e&&i&&(this._boundingRect=new n.BoundingRectangle(e,i))}return Object.defineProperty(t.prototype,"verticies",{get:function(){return this._positions.arr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modelMatrix",{get:function(){return this._modelMatrix},enumerable:!0,configurable:!0}),t.prototype.addXYZToPositions=function(t,e,i,o){this._positions[t]=e,this._positions[t+1]=i,this._positions[t+2]=o},t.prototype.addTriangleToPositions=function(t,e,i,o){this.addXYZToPositions(t,e.x,e.y,e.z),this.addXYZToPositions(t+r.Constants.floatsPerPoint,i.x,i.y,i.z),this.addXYZToPositions(t+2*r.Constants.floatsPerPoint,o.x,o.y,o.z)},t}();e.Shape=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=function(){function t(){}return t.between=function(t,e){var i=(t.x+e.x)/2,n=(t.y+e.y)/2,r=(t.z+e.z)/2;return new o.Vec3(i,n,r)},t}();e.Midpoint=n;var r=function(){function t(){}return t.between=function(t,e){var i=Math.max(t.x,e.x),n=Math.min(t.x,e.x),r=Math.max(t.y,e.y),s=Math.min(t.y,e.y),a=Math.max(t.z,e.z),u=Math.min(t.z,e.z),c=(i-n)/3,h=(r-s)/3,l=(a-u)/3,f=new o.Vec3(n+c,s+h,u+l);return{first:f,second:new o.Vec3(f.x+c,f.y+h,f.z+l)}},t}();e.ThirdPoints=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n={red:.9,green:.9,blue:.9},r={red:0,green:0,blue:0},s=new o.Vec3(0,0,0),a=new o.Vec3(0,0,-1),u=new o.Vec3(0,1,0),c=(new o.Mat4).setIdentity();e.Settings={defaultRendereMode:"points",defaultShapeMode:"points",defaultPointSize:10,defaultBackgroundColor:n,defaultBackgroundAlpha:1,defaultColor:r,defaultEyePosition:s,defaultLookAtPoint:a,defaultUpPosition:u,defaultFieldOfView:60,defaultNear:.01,defaultFar:2,defaultModelMatrix:c,defaultIsFullScreen:!1,instancedArrayExtensionName:"ANGLE_instanced_arrays"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.renderModeToWebGlConstant=function(t,e){switch(t){case"points":return e.POINTS;case"lines":return e.LINES;case"lineStrip":return e.LINE_STRIP;case"lineLoop":return e.LINE_LOOP;case"triangles":return e.TRIANGLES;case"triangleStrip":return e.TRIANGLE_STRIP;case"triangleFan":return e.TRIANGLE_FAN;default:throw"could not find renderMode named "+t}},t}();e.RenderModeMapper=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=i(5),r=function(){function t(t,e,i,r,s,a,u){void 0===e&&(e=n.Settings.defaultFieldOfView),void 0===i&&(i=n.Settings.defaultNear),void 0===r&&(r=n.Settings.defaultFar),void 0===s&&(s=n.Settings.defaultEyePosition),void 0===a&&(a=n.Settings.defaultLookAtPoint),void 0===u&&(u=n.Settings.defaultUpPosition),this._viewMatrix=new o.Mat4,this._projectionMatrix=new o.Mat4,this._vpMatrix=new o.Mat4,this._eyePosition=s,this._lookAtPoint=a,this._upPosition=u,this.updateView(),this._aspectRatio=t,this._fieldOfView=e,this._near=i,this._far=r,this.updatePerspective()}return Object.defineProperty(t.prototype,"vpMatrix",{get:function(){return this._vpMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewMatrix",{get:function(){return this._viewMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"projectionMatrix",{get:function(){return this._projectionMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aspectRatio",{get:function(){return this._aspectRatio},set:function(t){this._aspectRatio=t,this.updatePerspective()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldOfView",{get:function(){return this._fieldOfView},set:function(t){this._fieldOfView=t,this.updatePerspective()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return this._near},set:function(t){this._near=t,this.updatePerspective()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"far",{get:function(){return this._far},set:function(t){this._far=t,this.updatePerspective()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eyePosition",{get:function(){return this._eyePosition},set:function(t){this._eyePosition=t,this.updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lookAtPoint",{get:function(){return this._lookAtPoint},set:function(t){this._lookAtPoint,this.updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"upPosition",{get:function(){return this._upPosition},set:function(t){this._upPosition=t,this.updateView()},enumerable:!0,configurable:!0}),t.prototype.panX=function(t){this._eyePosition=new o.Vec3(this._eyePosition.x+t,this._eyePosition.y,this._eyePosition.z),this._lookAtPoint=new o.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this._upPosition=new o.Vec3(this._eyePosition.x,this._eyePosition.y+1,this._eyePosition.z),this.updateView()},t.prototype.panY=function(t){this._eyePosition=new o.Vec3(this._eyePosition.x,this._eyePosition.y+t,this._eyePosition.z),this._lookAtPoint=new o.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this._upPosition=new o.Vec3(this._eyePosition.x,this._eyePosition.y+1,this._eyePosition.z),this.updateView()},t.prototype.zoomIn=function(t){void 0===t&&(t=.01),this._eyePosition=new o.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-t),this._lookAtPoint=new o.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this._upPosition=new o.Vec3(this._eyePosition.x,this._eyePosition.y+1,this._eyePosition.z),this.updateView()},t.prototype.zoomOut=function(t){void 0===t&&(t=.01),this._eyePosition=new o.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z+t),this._lookAtPoint=new o.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this._upPosition=new o.Vec3(this._eyePosition.x,this._eyePosition.y+1,this._eyePosition.z),this.updateView()},t.prototype.updateView=function(){this._viewMatrix.setLookAt(this.eyePosition.x,this.eyePosition.y,this.eyePosition.z,this.lookAtPoint.x,this.lookAtPoint.y,this.lookAtPoint.z,this.upPosition.x,this.upPosition.y,this.upPosition.z),this.updateViewProjectionMatrix()},t.prototype.updatePerspective=function(){this._projectionMatrix.setPerspective(this._fieldOfView,this._aspectRatio,this._near,this._far),this.updateViewProjectionMatrix()},t.prototype.updateViewProjectionMatrix=function(){this._vpMatrix=this._projectionMatrix.multiply(this.viewMatrix)},t}();e.Camera=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.isIE=function(){return!!document.documentMode},t.prototype.isEdge=function(){return!this.isIE()&&!!window.StyleMedia},t}();e.BrowserHelper=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e,i){this.red=t,this.green=e,this.blue=i}return t}();e.RGBColor=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=function(){function t(t,e){this.isTopLeftBottomRight(t,e)?(this.topLeft=t,this.topRight=new o.Vec3(e.x,t.y,e.z),this.bottomRight=e,this.bottomLeft=new o.Vec3(t.x,e.y,t.z)):this.isBottomRightTopLeft(t,e)?(this.topLeft=e,this.topRight=new o.Vec3(t.x,e.y,t.z),this.bottomRight=t,this.bottomLeft=new o.Vec3(e.x,t.y,e.z)):this.isBottomLeftTopRight(t,e)?(this.topLeft=new o.Vec3(t.x,e.y,t.z),this.topRight=e,this.bottomRight=new o.Vec3(e.x,t.y,e.z),this.bottomLeft=t):(this.topLeft=new o.Vec3(e.x,t.y,e.z),this.topRight=t,this.bottomRight=new o.Vec3(t.x,e.y,t.z),this.bottomLeft=e)}return t.prototype.isTopLeftBottomRight=function(t,e){return t.x<=e.x&&t.y>=e.y},t.prototype.isBottomRightTopLeft=function(t,e){return t.x>=e.x&&t.y<=e.y},t.prototype.isBottomLeftTopRight=function(t,e){return t.x<=e.x&&t.y<=e.y},t}();e.BoundingRectangle=n},function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),r=i(3),s=i(1),a=i(4),u=i(12),c=i(0),h=function(t){function e(e,i,o,n,r){void 0===n&&(n=u.Precision.High);var s=t.call(this,r,e,i)||this;return s.horizontalRadius=(s._boundingRect.topRight.x-s._boundingRect.topLeft.x)/2,s.verticalRadius=(s._boundingRect.topLeft.y-s._boundingRect.bottomLeft.y)/2,s.center=a.Midpoint.between(s._boundingRect.topLeft,s._boundingRect.bottomRight),s.leftEndPoint=a.Midpoint.between(s._boundingRect.topLeft,s._boundingRect.bottomLeft),s.rightEndPoint=a.Midpoint.between(s._boundingRect.topRight,s._boundingRect.bottomRight),s.precision=n,s.computeVerticies(),s.glRenderMode=o.TRIANGLES,s}return o(e,t),e.prototype.computeVerticies=function(){var t,i=0;this.precision===u.Precision.High?(t=e.highPrecisionNumberOfPointsAlongCurve,i=e.highPrecisionNumberOfVerticies):this.precision===u.Precision.Low&&(t=e.lowPrecisionNumberOfPointsAlongCurve,i=e.lowPrecisionNumberOfVerticies);for(var o=new Float32Array(i*c.Constants.floatsPerPoint),r=this.leftEndPoint.x,a=2*this.horizontalRadius/(t/2),h=this.leftEndPoint,l=this.leftEndPoint,f=0,p=0;p<t/2-1;p++){r+=a;var d=this.getYDistanceFromCenterForX(r),g=new n.Vec3(r,d+this.center.y),_=new n.Vec3(r,this.center.y-d);this.addTriangleToPositions(f,h,this.center,g),f+=c.Constants.floatsPerTriangle,this.addTriangleToPositions(f,l,this.center,_),f+=c.Constants.floatsPerTriangle,h=g,l=_}this.addTriangleToPositions(f,h,this.center,this.rightEndPoint),f+=c.Constants.floatsPerTriangle,this.addTriangleToPositions(f,l,this.center,this.rightEndPoint),this._positions=new s.Float32Vector(o,o.length)},e.prototype.getYDistanceFromCenterForX=function(t){var e=Math.pow(this.verticalRadius,2);return Math.sqrt(e-e*Math.pow(t-this.center.x,2)/Math.pow(this.horizontalRadius,2))},e.numberOfEndPoints=2,e.highPrecisionNumberOfPointsAlongCurve=400+e.numberOfEndPoints,e.highPrecisionNumberOfVerticies=e.highPrecisionNumberOfPointsAlongCurve*c.Constants.verticiesPerTriangle,e.lowPrecisionNumberOfPointsAlongCurve=8+e.numberOfEndPoints,e.lowPrecisionNumberOfVerticies=e.lowPrecisionNumberOfPointsAlongCurve*c.Constants.verticiesPerTriangle,e}(r.Shape);e.Ellipse=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Low=0]="Low",t[t.High=1]="High"}(e.Precision||(e.Precision={}))},function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),r=i(1),s=i(4),a=i(0),u=function(t){function e(e,i,o,n){var r=t.call(this,n,e,i)||this;return r.computeVerticies(),r.glRenderMode=o.TRIANGLES,r}return o(e,t),e.prototype.computeVerticies=function(){var t=s.Midpoint.between(this._boundingRect.topLeft,this._boundingRect.topRight),i=new Float32Array(e.numberOfVerticies*a.Constants.floatsPerPoint);this.addTriangleToPositions(0,this._boundingRect.bottomLeft,t,this._boundingRect.bottomRight),this._positions=new r.Float32Vector(i,i.length)},e.numberOfVerticies=3,e}(n.Shape);e.Triangle=u},function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),r=i(1),s=i(0),a=function(t){function e(e,i,o,n){var r=t.call(this,n,e,i)||this;return r.computeVerticies(),r.glRenderMode=o.TRIANGLES,r}return o(e,t),e.prototype.computeVerticies=function(){var t=new Float32Array(e.numberOfVerticies*s.Constants.floatsPerPoint),i=0;this.addTriangleToPositions(i,this._boundingRect.topLeft,this._boundingRect.topRight,this._boundingRect.bottomLeft),i+=s.Constants.floatsPerTriangle,this.addTriangleToPositions(i,this._boundingRect.bottomLeft,this._boundingRect.topRight,this._boundingRect.bottomRight),this._positions=new r.Float32Vector(t,t.length)},e.numberOfVerticies=6,e}(n.Shape);e.Rectangle=a},function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),r=i(1),s=i(4),a=i(0),u=function(t){function e(e,i,o,n){var r=t.call(this,n,e,i)||this;return r.computeVerticies(),r.glRenderMode=o.TRIANGLES,r}return o(e,t),e.prototype.computeVerticies=function(){var t=new Float32Array(e.numberOfVerticies*a.Constants.floatsPerPoint),i=s.ThirdPoints.between(this._boundingRect.topLeft,this._boundingRect.topRight),o=i.first,n=i.second,u=s.ThirdPoints.between(this._boundingRect.bottomRight,this._boundingRect.bottomLeft),c=u.first,h=u.second,l=s.Midpoint.between(this._boundingRect.bottomLeft,this._boundingRect.topLeft),f=s.Midpoint.between(this._boundingRect.topRight,this._boundingRect.bottomRight),p=0;this.addTriangleToPositions(p,o,c,l),p+=a.Constants.floatsPerTriangle,this.addTriangleToPositions(p,o,c,h),p+=a.Constants.floatsPerTriangle,this.addTriangleToPositions(p,o,n,h),p+=a.Constants.floatsPerTriangle,this.addTriangleToPositions(p,n,h,f),this._positions=new r.Float32Vector(t,t.length)},e.numberOfVerticies=12,e}(n.Shape);e.Hexagon=u},function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),r=i(1),s=i(4),a=i(0),u=function(t){function e(e,i,o,n){var r=t.call(this,n,e,i)||this;return r.computeVerticies(),r.glRenderMode=o.TRIANGLES,r}return o(e,t),e.prototype.computeVerticies=function(){var t=new Float32Array(e.numberOfVerticies*a.Constants.floatsPerPoint),i=s.ThirdPoints.between(this._boundingRect.topLeft,this._boundingRect.topRight),o=s.ThirdPoints.between(this._boundingRect.topRight,this._boundingRect.bottomRight),n=s.ThirdPoints.between(this._boundingRect.bottomLeft,this._boundingRect.bottomRight),u=s.ThirdPoints.between(this._boundingRect.topLeft,this._boundingRect.bottomLeft),c=i.first,h=i.second,l=o.second,f=o.first,p=n.first,d=n.second,g=u.second,_=u.first,y=0;this.addTriangleToPositions(y,g,c,_),y+=a.Constants.floatsPerTriangle,this.addTriangleToPositions(y,_,c,p),y+=a.Constants.floatsPerTriangle,this.addTriangleToPositions(y,p,c,d),y+=a.Constants.floatsPerTriangle,this.addTriangleToPositions(y,c,d,h),y+=a.Constants.floatsPerTriangle,this.addTriangleToPositions(y,h,d,f),y+=a.Constants.floatsPerTriangle,this.addTriangleToPositions(y,h,f,l),y+=a.Constants.floatsPerTriangle,this._positions=new r.Float32Vector(t,t.length)},e.numberOfVerticies=18,e}(n.Shape);e.Octogon=u},function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),r=i(3),s=i(1),a=i(10),u=i(0),c=function(t){function e(e,i,o,n){var r=t.call(this,n,e,i)||this,s=r._boundingRect.topRight.x-r._boundingRect.topLeft.x,a=r._boundingRect.topRight.y-r._boundingRect.bottomRight.y,u=Math.min(s,a);return r._backFaceZ=r._boundingRect.bottomLeft.z+u,r.computeVerticies(),r.glRenderMode=o.TRIANGLES,r}return o(e,t),e.prototype.computeVerticies=function(){var t=new Float32Array(e.numberOfVerticies*u.Constants.floatsPerPoint),i=0;this.addTriangleToPositions(i,this._boundingRect.topLeft,this._boundingRect.topRight,this._boundingRect.bottomLeft),i+=u.Constants.floatsPerTriangle,this.addTriangleToPositions(i,this._boundingRect.bottomLeft,this._boundingRect.topRight,this._boundingRect.bottomRight),i+=u.Constants.floatsPerTriangle;var o=new a.BoundingRectangle(this._boundingRect.topRight,new n.Vec3(this._boundingRect.bottomRight.x,this._boundingRect.bottomRight.y,this._backFaceZ));this.addTriangleToPositions(i,o.topLeft,o.topRight,o.bottomLeft),i+=u.Constants.floatsPerTriangle,this.addTriangleToPositions(i,o.bottomLeft,o.topRight,o.bottomRight),i+=u.Constants.floatsPerTriangle;var r=new a.BoundingRectangle(this._boundingRect.topLeft,new n.Vec3(this._boundingRect.bottomLeft.x,this._boundingRect.bottomLeft.y,this._backFaceZ));this.addTriangleToPositions(i,r.topLeft,r.topRight,r.bottomLeft),i+=u.Constants.floatsPerTriangle,this.addTriangleToPositions(i,r.bottomLeft,r.topRight,r.bottomRight),i+=u.Constants.floatsPerTriangle,this.addTriangleToPositions(i,r.topRight,o.topRight,r.bottomRight),i+=u.Constants.floatsPerTriangle,this.addTriangleToPositions(i,r.bottomRight,o.topRight,o.bottomRight),i+=u.Constants.floatsPerTriangle,this.addTriangleToPositions(i,r.topRight,o.topRight,r.topLeft),i+=u.Constants.floatsPerTriangle,this.addTriangleToPositions(i,r.topLeft,o.topRight,o.topLeft),i+=u.Constants.floatsPerTriangle,this.addTriangleToPositions(i,r.bottomRight,o.bottomRight,r.bottomLeft),i+=u.Constants.floatsPerTriangle,this.addTriangleToPositions(i,r.bottomLeft,o.bottomRight,o.bottomLeft),this._positions=new s.Float32Vector(t,t.length)},e.numberOfVerticies=36,e}(r.Shape);e.Box=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(19);e.WebGLRenderer=o.WebGLRenderer;var n=i(2);e.Vec3=n.Vec3,e.Mat4=n.Mat4;var r=i(9);e.RGBColor=r.RGBColor;var s=i(24);e.ColorMapper=s.ColorMapper;var a=i(3);e.Shape=a.Shape;var u=i(25);e.ShapeFactory=u.ShapeFactory;var c=i(26);e.Line=c.Line;var h=i(11);e.Ellipse=h.Ellipse;var l=i(14);e.Rectangle=l.Rectangle;var f=i(15);e.Hexagon=f.Hexagon;var p=i(16);e.Octogon=p.Octogon;var d=i(13);e.Triangle=d.Triangle;var g=i(27);e.Point=g.Point;var _=i(17);e.Box=_.Box;var y=i(7);e.Camera=y.Camera;var b=i(8);e.BrowserHelper=b.BrowserHelper;var P=i(28);e.MouseHelper=P.MouseHelper},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),n=i(20),r=i(7),s=i(0),a=i(21),u=i(5),c=i(8),h=i(22),l=function(){function t(t,e){void 0===e&&(e={});var i=this;this._vertexShaderSource="    attribute vec4 "+a.ShaderSettings.positionAttributeName+";\n    attribute vec4 "+a.ShaderSettings.colorAttributeName+";\n    uniform mat4 "+a.ShaderSettings.mvpMatrixUniformName+";\n    uniform float "+a.ShaderSettings.pointSizeUniformName+";\n    varying vec4 v_color;\n    void main(void)\n    {\n        gl_Position = "+a.ShaderSettings.mvpMatrixUniformName+" * "+a.ShaderSettings.positionAttributeName+";\n        gl_PointSize = "+a.ShaderSettings.pointSizeUniformName+";\n        v_color = "+a.ShaderSettings.colorAttributeName+";\n    }",this._fragmentShaderSource="    precision mediump float;\n    uniform vec4 u_fragColor;\n    varying vec4 v_color;\n    void main(void)\n    {\n        gl_FragColor = v_color;\n    }",this.handleContextLost=function(t){i.stop(),t.preventDefault(),i._isContextLost=!0},this.handleContextRestored=function(){i._isContextLost=!1,i.setupGlResources(),i.start()},this.renderLoop=function(){i.draw(),i._animationFrameRequestId=i._window.requestAnimationFrame(i.renderLoop)},this.resizeCanvas=function(t,e,o){o.setViewPortDimensions(e.innerWidth,e.innerHeight),t.width=e.innerWidth,t.height=e.innerHeight,o.camera.aspectRatio=i._canvas.width/i._canvas.height},this._canvas=t,this.setCanvasEventHandlers(),this._browserHelper=e.browserHelper||new c.BrowserHelper,this.setupGlResources(),this.initializeRenderingOptions(e),this.initializeVertexBuffers(),this.initializaShapeBuffers(),this.setupWindowCallbacks()}return Object.defineProperty(t.prototype,"renderMode",{get:function(){return this._renderMode},set:function(t){this._renderMode=t,this._glRenderMode=o.RenderModeMapper.renderModeToWebGlConstant(t,this.gl)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointSize",{get:function(){return this._pointSize},set:function(t){this._pointSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFullscreen",{get:function(){return this._isFullscreen},set:function(t){this._isFullscreen=t,this.setupWindowCallbacks()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizeCallback",{get:function(){return this._resizeCallback},set:function(t){this._resizeCallback=t,this.setupWindowCallbacks()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this._camera},set:function(t){this._camera=t},enumerable:!0,configurable:!0}),t.prototype.setViewPortDimensions=function(t,e){this.gl.viewport(0,0,t,e)},t.prototype.addXYZPointToScene=function(t,e,i,o,n,r,s){switch(void 0===i&&(i=0),void 0===o&&(o=u.Settings.defaultColor.red),void 0===n&&(n=u.Settings.defaultColor.green),void 0===r&&(r=u.Settings.defaultColor.blue),void 0===s&&(s=this._glRenderMode),s){case this.gl.POINTS:this._pointsVertexBuffer.addVertex(new Float32Array([t,e,i,o,n,r]));break;case this.gl.LINES:this._linesVertexBuffer.addVertex(new Float32Array([t,e,i,o,n,r]));break;case this.gl.LINE_STRIP:this._lineStripVertexBuffer.addVertex(new Float32Array([t,e,i,o,n,r]));break;case this.gl.LINE_LOOP:this._lineLoopVertexBuffer.addVertex(new Float32Array([t,e,i,o,n,r]));break;case this.gl.TRIANGLES:this._trianglesVertexBuffer.addVertex(new Float32Array([t,e,i,o,n,r]));break;case this.gl.TRIANGLE_STRIP:this._triangleStripVertexBuffer.addVertex(new Float32Array([t,e,i,o,n,r]));break;case this.gl.TRIANGLE_FAN:this._triangleFanVertexBuffer.addVertex(new Float32Array([t,e,i,o,n,r]))}},t.prototype.addShapeToScene=function(t){switch(t.shapeMode){case"triangles":return this._trianglesShapeBuffer.addShape(t);case"rectangles":return this._rectanglesShapeBuffer.addShape(t);case"hexagons":return this._hexagonsShapeBuffer.addShape(t);case"octogons":return this._octogonsShapeBuffer.addShape(t);case"ellipses":return this._ellipsesShapeBuffer.addShape(t);case"box":return this._boxShapeBuffer.addShape(t)}return""},t.prototype.addShapesToScene=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.addShapeToScene(o)}},t.prototype.removeAllVeriticies=function(){this.initializeVertexBuffers()},t.prototype.removeAllShapes=function(){this.initializaShapeBuffers()},t.prototype.removeShape=function(t,e){switch(e){case"triangles":case"rectangles":case"hexagons":case"octogons":case"ellipses":case"box":return this._trianglesShapeBuffer.removeShape(t)}return this.removeShapeFromUnspecifiedBuffer(t)},t.prototype.start=function(){this.renderLoop()},t.prototype.stop=function(){this._window.cancelAnimationFrame(this._animationFrameRequestId)},t.prototype.draw=function(){this.gl.clearColor(this._backgroundColor.red,this._backgroundColor.green,this._backgroundColor.blue,u.Settings.defaultBackgroundAlpha),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(var t=0,e=this._vertexBuffers;t<e.length;t++)for(var i=e[t],o=0,n=i.verticiesStack;o<n.length;o++){var r=n[o];r.size>0&&this.drawGlArray(r.getTrimmedArray(),i.glRenderMode)}},t.prototype.setCanvasEventHandlers=function(){this._canvas.addEventListener("webglcontextlost",this.handleContextLost,!1),this._canvas.addEventListener("webglcontextrestored",this.handleContextRestored,!1)},t.prototype.setupGlResources=function(){this.getContext(),this.getGlExtensions(),this.setViewPortDimensions(this._canvas.width,this._canvas.height),this.initShaders()},t.prototype.getContext=function(){var t,e=this._browserHelper.isIE(),i=this._browserHelper.isEdge(),o=e||i?"experimental-webgl":"webgl";try{t=this._canvas.getContext(o,{alpha:!1,antialias:!1,depth:!0})}catch(t){throw"error creating webgl context!: "+t.toString()}if(null===t)throw"error creating webgl context!, gl === null";this._isContextLost=!1,this.gl=t},t.prototype.getGlExtensions=function(){this._instancedArraysExt=this.gl.getExtension(u.Settings.instancedArrayExtensionName)},t.prototype.initializeRenderingOptions=function(t){this._renderMode=t&&t.renderMode||u.Settings.defaultRendereMode,this._glRenderMode=o.RenderModeMapper.renderModeToWebGlConstant(this._renderMode,this.gl),this._pointSize=t&&t.pointSize||u.Settings.defaultPointSize,this._backgroundColor=t&&t.backgroundColor||u.Settings.defaultBackgroundColor,this._camera=t&&t.camera||new r.Camera(this._canvas.width/this._canvas.height),this._window=t&&t.window||window,this._isFullscreen=t&&t.fullscreen||u.Settings.defaultIsFullScreen,this._resizeCallback=t&&t.resizeCallback||this.resizeCanvas},t.prototype.initializeVertexBuffers=function(){this._pointsVertexBuffer=new n.VertexBuffer(this.gl.POINTS,this.gl),this._linesVertexBuffer=new n.VertexBuffer(this.gl.LINES,this.gl),this._lineStripVertexBuffer=new n.VertexBuffer(this.gl.LINE_STRIP,this.gl),this._lineLoopVertexBuffer=new n.VertexBuffer(this.gl.LINE_LOOP,this.gl),this._trianglesVertexBuffer=new n.VertexBuffer(this.gl.TRIANGLES,this.gl),this._triangleStripVertexBuffer=new n.VertexBuffer(this.gl.TRIANGLE_STRIP,this.gl),this._triangleFanVertexBuffer=new n.VertexBuffer(this.gl.TRIANGLE_FAN,this.gl),this._vertexBuffers=[this._pointsVertexBuffer,this._linesVertexBuffer,this._lineStripVertexBuffer,this._lineLoopVertexBuffer,this._trianglesVertexBuffer,this._triangleStripVertexBuffer,this._triangleFanVertexBuffer]},t.prototype.initializaShapeBuffers=function(){this._trianglesShapeBuffer=new h.ShapeBuffer,this._rectanglesShapeBuffer=new h.ShapeBuffer,this._hexagonsShapeBuffer=new h.ShapeBuffer,this._octogonsShapeBuffer=new h.ShapeBuffer,this._ellipsesShapeBuffer=new h.ShapeBuffer,this._boxShapeBuffer=new h.ShapeBuffer,this._shapeBuffers=[this._trianglesShapeBuffer,this._rectanglesShapeBuffer,this._hexagonsShapeBuffer,this._octogonsShapeBuffer,this._ellipsesShapeBuffer,this._boxShapeBuffer]},t.prototype.drawGlArray=function(t,e,i){void 0===i&&(i=u.Settings.defaultModelMatrix);var o=this.gl.getAttribLocation(this._shaderProgram,a.ShaderSettings.positionAttributeName),n=this.gl.getAttribLocation(this._shaderProgram,a.ShaderSettings.colorAttributeName),r=this.gl.getUniformLocation(this._shaderProgram,a.ShaderSettings.pointSizeUniformName),c=this.gl.getUniformLocation(this._shaderProgram,a.ShaderSettings.mvpMatrixUniformName);if(!r||!c){var h={};h[a.ShaderSettings.pointSizeUniformName]=r,h[a.ShaderSettings.mvpMatrixUniformName]=c;throw this.createUniforNotFoundErrorMessage(h)}var l=t.BYTES_PER_ELEMENT,f=l*s.Constants.floatsPerPoint,p=l*s.Constants.floatsPerPoint,d=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,d),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(o,s.Constants.floatsPerPoint,this.gl.FLOAT,!1,p,0),this.gl.enableVertexAttribArray(o),this.gl.vertexAttribPointer(n,s.Constants.floatsPerColor,this.gl.FLOAT,!1,p,f),this.gl.enableVertexAttribArray(n),this.gl.uniformMatrix4fv(c,!1,this._camera.viewMatrix.multiply(i).elements),this.gl.uniform1f(r,this._pointSize),this.gl.drawArrays(e,0,t.length/s.Constants.floatsPerPoint),this.gl.deleteBuffer(d)},t.prototype.initShaders=function(){var t=this.createShader(this._fragmentShaderSource,"fragment"),e=this.createShader(this._vertexShaderSource,"vertex"),i=this.gl.createProgram();if(null===i)throw"could not create shader program";if(this._shaderProgram=i,this.gl.attachShader(this._shaderProgram,e),this.gl.attachShader(this._shaderProgram,t),this.gl.linkProgram(this._shaderProgram),!this.gl.getProgramParameter(this._shaderProgram,this.gl.LINK_STATUS))throw"could not link shader program";this.gl.useProgram(this._shaderProgram)},t.prototype.createShader=function(t,e){var i=null;if("fragment"===e?i=this.gl.createShader(this.gl.FRAGMENT_SHADER):"vertex"===e&&(i=this.gl.createShader(this.gl.VERTEX_SHADER)),this.gl.shaderSource(i,t),this.gl.compileShader(i),!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))throw"could not compile shader, shader info log: "+this.gl.getShaderInfoLog(i);return i},t.prototype.createUniforNotFoundErrorMessage=function(t){var e="cannot find uniform in shader program\n";e+="potential culprits:\n";for(var i in t)t.hasOwnProperty(i)&&(e+="\t"+i+": "+t[i]+"\n");return e},t.prototype.setupWindowCallbacks=function(){var t=this;this._isFullscreen&&(this._window.addEventListener("resize",function(){t._isContextLost||t._resizeCallback(t._canvas,t._window,t)},!1),this._resizeCallback(this._canvas,this._window,this))},t.prototype.removeShapeFromUnspecifiedBuffer=function(t){for(var e=0,i=this._shapeBuffers;e<i.length;e++){if(i[e].removeShape(t))return!0}return!1},t}();e.WebGLRenderer=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),n=i(0),r=function(){function t(t,e,i){if(void 0===i&&(i=0),!this.glRenderModeValidator(t,e))throw"cannot initialize vertex buffer of unrecognized gl render mode";this.glRenderMode=t,this._vectorSizeLimit=i;var n=this._vectorSizeLimit?new o.Float32Vector(new Float32Array(0),this._vectorSizeLimit):new o.Float32Vector(new Float32Array(0));this._topVertexVector=n,this.verticiesStack=new Array,this.verticiesStack.push(this._topVertexVector)}return t.prototype.addVertex=function(t){if(t.length!==n.Constants.floatsPerPoint)throw"cannot add vertex repersented by "+t.length+" floats, we only accept verticies of "+n.Constants.floatsPerPoint+" floats (x, y, z, r, g, b)";!this._vectorSizeLimit||this._topVertexVector.size+t.length<=this._vectorSizeLimit?this._topVertexVector.addArray(t):(this._topVertexVector=new o.Float32Vector(t,this._vectorSizeLimit),this.verticiesStack.push(this._topVertexVector))},t.prototype.glRenderModeValidator=function(t,e){switch(t){case e.POINTS:case e.LINES:case e.LINE_STRIP:case e.LINE_LOOP:case e.TRIANGLES:case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:return!0}return!1},t}();e.VertexBuffer=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShaderSettings={positionAttributeName:"a_position",colorAttributeName:"a_color",pointSizeUniformName:"u_pointSize",mvpMatrixUniformName:"u_mvpMatrix"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(23),n=i(1),r=function(){function t(){this._positionVerticies=new n.Float32Vector,this._colorVerticies=new n.Float32Vector,this._modelMatrixVerticies=new n.Float32Vector,this._shapes={}}return t.prototype.addShape=function(t){var e=o.cuid(),i=Object.keys(this._shapes).length;return this._shapes[e]={shape:t,index:i},e},t.prototype.removeShape=function(t){return!!this._shapes.hasOwnProperty(t)&&(delete this._shapes[t],!0)},t.prototype.updatePosition=function(t,e){return!!this._shapes.hasOwnProperty(t)&&(delete this._shapes[t],!0)},t}();e.ShapeBuffer=r},function(t,e,i){!function(e){"use strict";var i=0,o=Math.pow(36,4),n=function(t,e){var i="000000000"+t;return i.substr(i.length-e)},r=function(){return n((Math.random()*o<<0).toString(36),4)},s=function(){return i=i<o?i:0,++i-1},a=function(){var t,e=(new Date).getTime().toString(36),i=a.fingerprint(),o=r()+r();return t=n(s().toString(36),4),"c"+e+t+i+o};a.slug=function(){var t,e=(new Date).getTime().toString(36),i=a.fingerprint().slice(0,1)+a.fingerprint().slice(-1),o=r().slice(-2);return t=s().toString(36).slice(-4),e.slice(-2)+t+i+o},a.globalCount=function(){var t=function(){var t,e=0;for(t in window)e++;return e}();return a.globalCount=function(){return t},t},a.fingerprint=function(){return n((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+a.globalCount().toString(36),4)},e.register?e.register("cuid",a):t.exports=a}(this.applitude||this)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(9),n=function(){function t(){}return t.colorToRGBColor=function(t){switch(t){case"red":return new o.RGBColor(1,0,0);case"orange":return new o.RGBColor(1,.271,0);case"yellow":return new o.RGBColor(1,1,0);case"green":return new o.RGBColor(0,1,0);case"cyan":return new o.RGBColor(0,1,1);case"blue":return new o.RGBColor(0,0,1);case"indigo":return new o.RGBColor(.294,0,.51);case"fuchsia":return new o.RGBColor(1,0,1);case"white":return new o.RGBColor(1,1,1);default:throw"could not find color "+t}},t}();e.ColorMapper=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(11),n=i(13),r=i(14),s=i(15),a=i(16),u=i(12),c=i(17),h=function(){function t(){}return t.createShape=function(t,e,i,o,n){switch(i){case"triangles":return this.createTriangle(t,e,o,n);case"rectangles":return this.createRectangle(t,e,o,n);case"hexagons":return this.createHexagon(t,e,o,n);case"octogons":return this.createOctogon(t,e,o,n);case"ellipses":return this.createEllipse(t,e,o,n);case"box":return this.createBox(t,e,o,n);default:throw Error("cannot recognize shape type "+i)}},t.createTriangle=function(t,e,i,o){return new n.Triangle(t,e,i,o)},t.createRectangle=function(t,e,i,o){return new r.Rectangle(t,e,i,o)},t.createHexagon=function(t,e,i,o){return new s.Hexagon(t,e,i,o)},t.createOctogon=function(t,e,i,o){return new a.Octogon(t,e,i,o)},t.createEllipse=function(t,e,i,n){return new o.Ellipse(t,e,i,u.Precision.High,n)},t.createBox=function(t,e,i,o){return new c.Box(t,e,i,o)},t}();e.ShapeFactory=h},function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),r=i(1),s=i(0),a=i(6),u=function(t){function e(e,i,o){var n=t.call(this,o)||this;new Float32Array(s.Constants.floatsPerPoint);return n._vertexPositions=new Array,n._vertexPositions=new Array,n._vertexPositions.push(e),n.computeVerticies(),n.glRenderMode=a.RenderModeMapper.renderModeToWebGlConstant("lineStrip",i),n}return o(e,t),Object.defineProperty(e.prototype,"verticies",{get:function(){return this._verticies.getTrimmedArray()},enumerable:!0,configurable:!0}),e.prototype.computeVerticies=function(){for(var t=new Float32Array(this._vertexPositions.length*s.Constants.floatsPerPoint),e=0;e<this._vertexPositions.length;e++){var i=e*s.Constants.floatsPerPoint,o=this._vertexPositions[e];this.addXYZAndColorToFloat32Array(t,i,o.x,o.y,o.z)}this._verticies=new r.Float32Vector(t)},e.prototype.addVertex=function(t){this._vertexPositions.push(t);var e=new Float32Array(s.Constants.floatsPerPoint);this.addXYZAndColorToFloat32Array(e,0,t.x,t.y,t.z),this._verticies.addArray(e)},e.prototype.addXYZAndColorToFloat32Array=function(t,e,i,o,n){t[e]=i,t[e+1]=o,t[e+2]=n,t[e+3]=this.rgbColor.red,t[e+4]=this.rgbColor.green,t[e+5]=this.rgbColor.blue},e}(n.Shape);e.Line=u},function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),r=i(0),s=i(1),a=function(t){function e(e,i,o){var n=t.call(this,o)||this;return n._location=e,n.computeVerticies(),n.glRenderMode=i.POINTS,n}return o(e,t),e.prototype.computeVerticies=function(){var t=new Float32Array(r.Constants.floatsPerPoint);this._positions=new s.Float32Vector(t,t.length),this.addXYZToPositions(0,this._location.x,this._location.y,this._location.z)},e}(n.Shape);e.Point=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=function(){function t(){}return t.mouseEventToWebGlPoints=function(t,e){var i=t.clientX,n=t.clientY,r=e.getBoundingClientRect(),s=e.width,a=e.height;return i=(i-r.left-s/2)/(s/2),n=(a/2-(n-r.top))/(a/2),new o.Vec3(i,n)},t}();e.MouseHelper=n}])});