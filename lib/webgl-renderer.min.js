!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("webgl-renderer",[],e):"object"==typeof exports?exports["webgl-renderer"]=e():t["webgl-renderer"]=e()}(this,function(){return function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.rgbColor=t,this.vertexSize=2,this.colorSize=3}return t.prototype.addXYAndColorToFloat32Array=function(t,e,r,o){t[e]=r,t[e+1]=o,t[e+2]=this.rgbColor.red,t[e+3]=this.rgbColor.green,t[e+4]=this.rgbColor.blue},t}();e.Shape=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.arr=t,this.size=t.length}return t.prototype.addNumber=function(t){var e=this.size+1;if(e>=this.arr.length){var r=this.arr;this.arr=new Float32Array(2*e),this.arr.set(r)}this.arr[this.size]=t,this.size=e},t.prototype.addArray=function(t){var e=this.size+t.length;if(e>=this.arr.length){var r=this.arr;this.arr=new Float32Array(2*e),this.arr.set(r)}this.arr.set(t,this.size),this.size=e},t}();e.Float32Vector=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.isTopLeftBottomRight(t,e)?(this.topLeft=t,this.topRight={x:e.x,y:t.y},this.bottomRight=e,this.bottomLeft={x:t.x,y:e.y}):this.isBottomRightTopLeft(t,e)?(this.topLeft=e,this.topRight={x:t.x,y:e.y},this.bottomRight=t,this.bottomLeft={x:e.x,y:t.y}):this.isBottomLeftTopRight(t,e)?(this.topLeft={x:t.x,y:e.y},this.topRight=e,this.bottomRight={x:e.x,y:t.y},this.bottomLeft=t):(this.topLeft={x:e.x,y:t.y},this.topRight=t,this.bottomRight={x:t.x,y:e.y},this.bottomLeft=e)}return t.prototype.isTopLeftBottomRight=function(t,e){return t.x<=e.x&&t.y>=e.y},t.prototype.isBottomRightTopLeft=function(t,e){return t.x>=e.x&&t.y<=e.y},t.prototype.isBottomLeftTopRight=function(t,e){return t.x<=e.x&&t.y<=e.y},t}();e.BoundingRectangle=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.between=function(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}},t}();e.Midpoint=o;var n=function(){function t(){}return t.between=function(t,e){var r=Math.max(t.x,e.x),o=Math.min(t.x,e.x),n=Math.max(t.y,e.y),i=Math.min(t.y,e.y),a=(r-o)/3,s=(n-i)/3,c={x:o+a,y:i+s};return{first:c,second:{x:c.x+a,y:c.y+s}}},t}();e.ThirdPoints=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Low=0]="Low",t[t.High=1]="High"}(e.Precision||(e.Precision={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(18),n=function(){function t(){}return t.colorToRGBColor=function(t){switch(t){case"red":return new o.RGBColor(1,0,0);case"orange":return new o.RGBColor(1,.271,0);case"yellow":return new o.RGBColor(1,1,0);case"green":return new o.RGBColor(0,1,0);case"cyan":return new o.RGBColor(0,1,1);case"blue":return new o.RGBColor(0,0,1);case"indigo":return new o.RGBColor(.294,0,.51);case"fuchsia":return new o.RGBColor(1,0,1);case"white":return new o.RGBColor(1,1,1);default:throw Error("could not find color "+t)}},t}();e.ColorMapper=n},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(1),a=function(t){function e(e,r,o){var n=t.call(this,r)||this,a=new Float32Array(5);return n.addXYAndColorToFloat32Array(a,0,e.x,e.y),n.verticies=new i.Float32Vector(a),n.numberOfVerticies=1,n.glRenderMode=o.LINE_STRIP,n}return o(e,t),e.prototype.addVertex=function(t){var e=new Float32Array(5);this.addXYAndColorToFloat32Array(e,0,t.x,t.y),this.verticies.addArray(e),this.numberOfVerticies++},e}(n.Shape);e.Line=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(12),n=r(16),i=r(15),a=r(13),s=r(14),c=r(4),l=function(){function t(){}return t.createShape=function(t,e,r,o,n){switch(r){case"ellipses":return this.createEllipse(t,e,o,n);case"triangles":return this.createTriangle(t,e,o,n);case"rectangles":return this.createRectangle(t,e,o,n);case"hexagons":return this.createHexagon(t,e,o,n);case"octogons":return this.createOctogon(t,e,o,n);default:throw Error("cannot recognize shape type "+r)}},t.createEllipse=function(t,e,r,n){return new o.Ellipse(t,e,r,n,c.Precision.High)},t.createTriangle=function(t,e,r,o){return new n.Triangle(t,e,r,o)},t.createRectangle=function(t,e,r,o){return new i.Rectangle(t,e,r,o)},t.createHexagon=function(t,e,r,o){return new a.Hexagon(t,e,r,o)},t.createOctogon=function(t,e,r,o){return new s.Octogon(t,e,r,o)},t}();e.ShapeFactory=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(17),n=r(19),i=r(11),a=function(){function t(t,e,r){this.vertexShaderSource="    attribute vec3 a_position;\n    attribute float a_pointSize;\n    attribute vec4 a_color;\n    varying vec4 v_color;\n    void main(void) {\n        gl_Position = vec4(a_position, 1.0);\n        gl_PointSize = 10.0;\n        v_color = a_color;\n    }\n",this.fragmentShaderSource="    precision mediump float;\n    uniform vec4 u_fragColor;    varying vec4 v_color;\n    void main(void) {\n        gl_FragColor = v_color;\n    }\n",this.gl=r,this.glRenderMode=this.gl.POINTS,this.shapeMode="points",this.drawingMode=i.DrawingMode.Verticies,this.setViewPortDimensions(t,e),this.initShaders(),this.pointsVector=new n.VertexBuffer(this.gl.POINTS,new Float32Array(0),this.gl),this.linesVector=new n.VertexBuffer(this.gl.LINES,new Float32Array(0),this.gl),this.lineStripVector=new n.VertexBuffer(this.gl.LINE_STRIP,new Float32Array(0),this.gl),this.lineLoopVector=new n.VertexBuffer(this.gl.LINE_LOOP,new Float32Array(0),this.gl),this.trianglesVector=new n.VertexBuffer(this.gl.TRIANGLES,new Float32Array(0),this.gl),this.triangleStripVector=new n.VertexBuffer(this.gl.TRIANGLE_STRIP,new Float32Array(0),this.gl),this.triangleFanVector=new n.VertexBuffer(this.gl.TRIANGLE_FAN,new Float32Array(0),this.gl),this.vertexBuffers=[this.pointsVector,this.linesVector,this.lineStripVector,this.lineLoopVector,this.trianglesVector,this.triangleStripVector,this.triangleFanVector],this.shapeScene=[]}return t.prototype.setViewPortDimensions=function(t,e){this.gl.viewport(0,0,t,e)},Object.defineProperty(t.prototype,"renderMode",{get:function(){return this.renderModeStr},set:function(t){this.drawingMode=i.DrawingMode.Verticies,this.renderModeStr=t,this.glRenderMode=o.RenderModeMapper.renderModeToWebGlConstant(t,this.gl)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){return this.shapeMode},set:function(t){this.drawingMode=i.DrawingMode.Shapes,this.shapeMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.rgbColor},set:function(t){this.rgbColor=t},enumerable:!0,configurable:!0}),t.prototype.addXYPointToScene=function(t,e){if(this.drawingMode===i.DrawingMode.Verticies)switch(this.glRenderMode){case this.gl.POINTS:this.addXYAndColorToVertexBuffer(this.pointsVector.verticies,t,e);break;case this.gl.LINES:this.addXYAndColorToVertexBuffer(this.linesVector.verticies,t,e);break;case this.gl.LINE_STRIP:this.addXYAndColorToVertexBuffer(this.lineStripVector.verticies,t,e);break;case this.gl.LINE_LOOP:this.addXYAndColorToVertexBuffer(this.lineLoopVector.verticies,t,e);break;case this.gl.TRIANGLES:this.addXYAndColorToVertexBuffer(this.trianglesVector.verticies,t,e);break;case this.gl.TRIANGLE_STRIP:this.addXYAndColorToVertexBuffer(this.triangleStripVector.verticies,t,e);break;case this.gl.TRIANGLE_FAN:this.addXYAndColorToVertexBuffer(this.triangleFanVector.verticies,t,e)}},t.prototype.addShapeToScene=function(t){this.shapeScene.push(t)},t.prototype.draw=function(){this.gl.clearColor(.09,.09,.09,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(var t=0,e=this.vertexBuffers;t<e.length;t++){var r=e[t];r.verticies.size>0&&this.drawGlArray(r.verticies,r.renderMode)}if(this.shapeScene.length>0)for(var o=0,n=this.shapeScene;o<n.length;o++){var i=n[o];this.drawGlArray(i.verticies,i.glRenderMode,i.vertexSize,i.colorSize)}},t.prototype.drawGlArray=function(t,e,r,o){void 0===r&&(r=2),void 0===o&&(o=3);var n=this.gl.getAttribLocation(this.shaderProgram,"a_position"),i=this.gl.getAttribLocation(this.shaderProgram,"a_color"),a=t.arr.BYTES_PER_ELEMENT,s=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s),this.gl.bufferData(this.gl.ARRAY_BUFFER,t.arr,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(n,r,this.gl.FLOAT,!1,5*a,0),this.gl.enableVertexAttribArray(n),this.gl.vertexAttribPointer(i,o,this.gl.FLOAT,!1,5*a,2*a),this.gl.enableVertexAttribArray(i),this.gl.drawArrays(e,0,t.size/(r+o))},t.prototype.addXYAndColorToVertexBuffer=function(t,e,r){t.addArray(new Float32Array([e,r,this.rgbColor.red,this.rgbColor.green,this.rgbColor.blue]))},t.prototype.initShaders=function(){var t=this.createShader(this.fragmentShaderSource,"fragment"),e=this.createShader(this.vertexShaderSource,"vertex"),r=this.gl.createProgram();if(null===r)throw Error("Could not create shader program");if(this.shaderProgram=r,this.gl.attachShader(this.shaderProgram,e),this.gl.attachShader(this.shaderProgram,t),this.gl.linkProgram(this.shaderProgram),!this.gl.getProgramParameter(this.shaderProgram,this.gl.LINK_STATUS))throw Error("Could not initialise shaders");this.gl.useProgram(this.shaderProgram)},t.prototype.createShader=function(t,e){var r;if("fragment"===e)r=this.gl.createShader(this.gl.FRAGMENT_SHADER);else{if("vertex"!==e)return null;r=this.gl.createShader(this.gl.VERTEX_SHADER)}return this.gl.shaderSource(r,t),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(alert(this.gl.getShaderInfoLog(r)),null)},t}();e.WebGLRenderer=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.getContext=function(t){var e;try{e=t.getContext("webgl",{alpha:!1,antialias:!1,depth:!1})}catch(t){var r="Error creating WebGL Context!: "+t.toString();throw Error(r)}if(null===e){var r="Error creating WebGL Context!, gl === null";throw Error(r)}return e},t}();e.ContextWrangler=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(8);e.WebGLRenderer=o.WebGLRenderer;var n=r(9);e.ContextWrangler=n.ContextWrangler;var i=r(5);e.ColorMapper=i.ColorMapper;var a=r(6);e.Line=a.Line;var s=r(0);e.Shape=s.Shape;var c=r(7);e.ShapeFactory=c.ShapeFactory},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Shapes=0]="Shapes",t[t.Verticies=1]="Verticies"}(e.DrawingMode||(e.DrawingMode={}))},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(1),a=r(2),s=r(3),c=r(4),l=function(t){function e(e,r,o,n,l){var h=t.call(this,o)||this,u=new a.BoundingRectangle(e,r);h.horizontalRadius=(u.topRight.x-u.topLeft.x)/2,h.verticalRadius=(u.topLeft.y-u.bottomLeft.y)/2,l===c.Precision.High?(h.numberOfInnerVerticies=400,h.numberOfVerticies=403):l===c.Precision.Low&&(h.numberOfInnerVerticies=8,h.numberOfVerticies=11),h.center=s.Midpoint.between(u.topLeft,u.bottomRight);var d=h.populateVerticies(u);return h.verticies=new i.Float32Vector(d),h.glRenderMode=n.TRIANGLE_FAN,h}return o(e,t),e.prototype.populateVerticies=function(t){var e=new Float32Array(5*this.numberOfVerticies),r=t.topLeft.x,o=2*this.horizontalRadius/((this.numberOfVerticies-1)/2);this.addXYAndColorToFloat32Array(e,0,r,t.topLeft.y-this.verticalRadius);var n=this.numberOfInnerVerticies/2*5+5,i=t.topRight.x,a=t.topRight.y-this.verticalRadius;this.addXYAndColorToFloat32Array(e,n,i,a),this.addXYAndColorToFloat32Array(e,e.length-5,i,a);for(var s=5,c=0;c<this.numberOfInnerVerticies/2;c++){r+=o;var l=this.getYDistanceFromCenterForX(r);this.addXYAndColorToFloat32Array(e,s,r,l+this.center.y),this.addXYAndColorToFloat32Array(e,s+n,r,this.center.y-l),s+=5}return e},e.prototype.getYDistanceFromCenterForX=function(t){var e=Math.pow(this.verticalRadius,2);return Math.sqrt(e-e*Math.pow(t-this.center.x,2)/Math.pow(this.horizontalRadius,2))},e}(n.Shape);e.Ellipse=l},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(1),a=r(2),s=r(3),c=function(t){function e(e,r,o,n){var s=t.call(this,o)||this,c=new a.BoundingRectangle(e,r),l=s.populateVerticies(c);return s.verticies=new i.Float32Vector(l),s.numberOfVerticies=6,s.glRenderMode=n.TRIANGLE_FAN,s}return o(e,t),e.prototype.populateVerticies=function(t){var e=new Float32Array(30),r=s.ThirdPoints.between(t.topLeft,t.topRight),o=r.first,n=r.second;this.addXYAndColorToFloat32Array(e,0,o.x,o.y),this.addXYAndColorToFloat32Array(e,5,n.x,n.y);var i=s.Midpoint.between(t.topRight,t.bottomRight);return this.addXYAndColorToFloat32Array(e,10,i.x,i.y),a=s.ThirdPoints.between(t.bottomRight,t.bottomLeft),o=a.first,n=a.second,this.addXYAndColorToFloat32Array(e,15,n.x,n.y),this.addXYAndColorToFloat32Array(e,20,o.x,o.y),i=s.Midpoint.between(t.bottomLeft,t.topLeft),this.addXYAndColorToFloat32Array(e,25,i.x,i.y),e;var a},e}(n.Shape);e.Hexagon=c},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(1),a=r(2),s=r(3),c=function(t){function e(e,r,o,n){var s=t.call(this,o)||this,c=new a.BoundingRectangle(e,r),l=s.populateVerticies(c);return s.verticies=new i.Float32Vector(l),s.numberOfVerticies=8,s.glRenderMode=n.TRIANGLE_FAN,s}return o(e,t),e.prototype.populateVerticies=function(t){var e=new Float32Array(40),r=s.ThirdPoints.between(t.topLeft,t.topRight),o=r.first,n=r.second;return this.addXYAndColorToFloat32Array(e,0,o.x,o.y),this.addXYAndColorToFloat32Array(e,5,n.x,n.y),i=s.ThirdPoints.between(t.topRight,t.bottomRight),o=i.first,n=i.second,this.addXYAndColorToFloat32Array(e,10,n.x,n.y),this.addXYAndColorToFloat32Array(e,15,o.x,o.y),a=s.ThirdPoints.between(t.bottomRight,t.bottomLeft),o=a.first,n=a.second,this.addXYAndColorToFloat32Array(e,20,n.x,n.y),this.addXYAndColorToFloat32Array(e,25,o.x,o.y),c=s.ThirdPoints.between(t.bottomLeft,t.topLeft),o=c.first,n=c.second,this.addXYAndColorToFloat32Array(e,30,o.x,o.y),this.addXYAndColorToFloat32Array(e,35,n.x,n.y),e;var i,a,c},e}(n.Shape);e.Octogon=c},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(1),a=r(2),s=function(t){function e(e,r,o,n){var s=t.call(this,o)||this,c=new a.BoundingRectangle(e,r),l=new Float32Array(20);return s.addXYAndColorToFloat32Array(l,0,c.topLeft.x,c.topLeft.y),s.addXYAndColorToFloat32Array(l,5,c.topRight.x,c.topRight.y),s.addXYAndColorToFloat32Array(l,10,c.bottomLeft.x,c.bottomLeft.y),s.addXYAndColorToFloat32Array(l,15,c.bottomRight.x,c.bottomRight.y),s.verticies=new i.Float32Vector(l),s.numberOfVerticies=4,s.glRenderMode=n.TRIANGLE_STRIP,s}return o(e,t),e}(n.Shape);e.Rectangle=s},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(1),a=r(2),s=r(3),c=function(t){function e(e,r,o,n){var c=t.call(this,o)||this,l=new a.BoundingRectangle(e,r),h=s.Midpoint.between(l.topLeft,l.topRight),u=new Float32Array(15);return c.addXYAndColorToFloat32Array(u,0,l.bottomLeft.x,l.bottomLeft.y),c.addXYAndColorToFloat32Array(u,5,h.x,h.y),c.addXYAndColorToFloat32Array(u,10,l.bottomRight.x,l.bottomRight.y),c.verticies=new i.Float32Vector(u),c.numberOfVerticies=3,c.glRenderMode=n.TRIANGLES,c}return o(e,t),e}(n.Shape);e.Triangle=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.renderModeToWebGlConstant=function(t,e){switch(t){case"points":return e.POINTS;case"lines":return e.LINES;case"lineStrip":return e.LINE_STRIP;case"lineLoop":return e.LINE_LOOP;case"triangles":return e.TRIANGLES;case"triangleStrip":return e.TRIANGLE_STRIP;case"triangleFan":return e.TRIANGLE_FAN;default:throw Error("could not find renderMode named "+t)}},t}();e.RenderModeMapper=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e,r){this.red=t,this.green=e,this.blue=r}return t}();e.RGBColor=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(1),n=function(){function t(t,e,r){if(!this.renderModeValidator(t,r))throw Error("Cannot initialize vertex buffer of unrecognized gl render mode");this.renderMode=t,this.verticies=new o.Float32Vector(e)}return t.prototype.renderModeValidator=function(t,e){switch(t){case e.POINTS:case e.LINES:case e.LINE_STRIP:case e.LINE_LOOP:case e.TRIANGLES:case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:return!0}return!1},t}();e.VertexBuffer=n}])});