!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("webgl-renderer",[],e):"object"==typeof exports?exports["webgl-renderer"]=e():t["webgl-renderer"]=e()}(this,function(){return function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){void 0===t&&(t=new Float32Array(0)),this.arr=t,this.size=t.length}return t.prototype.addNumber=function(t){var e=this.size+1;if(e>=this.arr.length){var r=this.arr;this.arr=new Float32Array(2*e),this.arr.set(r)}this.arr[this.size]=t,this.size=e},t.prototype.addArray=function(t){var e=this.size+t.length;if(e>=this.arr.length){var r=this.arr;this.arr=new Float32Array(2*e),this.arr.set(r)}this.arr.set(t,this.size),this.size=e},t.prototype.getTrimmedArray=function(){return this.arr.slice(0,this.size)},t}();e.Float32Vector=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.rgbColor=t,this.vertexSize=2,this.colorSize=3}return t.prototype.addXYAndColorToFloat32Array=function(t,e,r,o){t[e]=r,t[e+1]=o,t[e+2]=this.rgbColor.red,t[e+3]=this.rgbColor.green,t[e+4]=this.rgbColor.blue},t}();e.Shape=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.isTopLeftBottomRight(t,e)?(this.topLeft=t,this.topRight={x:e.x,y:t.y},this.bottomRight=e,this.bottomLeft={x:t.x,y:e.y}):this.isBottomRightTopLeft(t,e)?(this.topLeft=e,this.topRight={x:t.x,y:e.y},this.bottomRight=t,this.bottomLeft={x:e.x,y:t.y}):this.isBottomLeftTopRight(t,e)?(this.topLeft={x:t.x,y:e.y},this.topRight=e,this.bottomRight={x:e.x,y:t.y},this.bottomLeft=t):(this.topLeft={x:e.x,y:t.y},this.topRight=t,this.bottomRight={x:t.x,y:e.y},this.bottomLeft=e)}return t.prototype.isTopLeftBottomRight=function(t,e){return t.x<=e.x&&t.y>=e.y},t.prototype.isBottomRightTopLeft=function(t,e){return t.x>=e.x&&t.y<=e.y},t.prototype.isBottomLeftTopRight=function(t,e){return t.x<=e.x&&t.y<=e.y},t}();e.BoundingRectangle=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.between=function(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}},t}();e.Midpoint=o;var n=function(){function t(){}return t.between=function(t,e){var r=Math.max(t.x,e.x),o=Math.min(t.x,e.x),n=Math.max(t.y,e.y),i=Math.min(t.y,e.y),a=(r-o)/3,s=(n-i)/3,c={x:o+a,y:i+s};return{first:c,second:{x:c.x+a,y:c.y+s}}},t}();e.ThirdPoints=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),n=function(){function t(t,e,r,n,i){void 0===n&&(n=5),void 0===i&&(i=new o.RGBColor(0,0,0)),this.x=t,this.y=e,this.z=r,this.pointSize=n,this.color=i}return t}();e.Point3d=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e,r){this.red=t,this.green=e,this.blue=r}return t}();e.RGBColor=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(7),n=o.DrawingMode.Verticies,i={red:.9,green:.9,blue:.9},a={red:0,green:0,blue:0};e.Settings={floatsPerPoint:2,floatsPerColor:3,floatsPerVertex:5,vertexBufferFloatLimit:65e3,defaultAlpha:1,defaultRendereMode:"points",defaultShapeMode:"points",defaultDrawingMode:n,defaultPointSize:10,defaultBackgroundColor:i,defaultColor:a}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Shapes=0]="Shapes",t[t.Verticies=1]="Verticies"}(e.DrawingMode||(e.DrawingMode={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(19),n=r(4),i=function(){function t(t,e,r){this._eyePosition=t,this._lookAtPoint=e,this._upPosition=r,this._viewMatrix=new o.Matrix4,this._viewMatrix.setLookAt(t.x,t.y,t.z,e.x,e.y,e.z,r.x,r.y,r.z)}return t.prototype.getViewMatrix=function(){return this._viewMatrix.elements},Object.defineProperty(t.prototype,"eyePosition",{get:function(){return this._eyePosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lookAtPoint",{get:function(){return this._lookAtPoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"upPosition",{get:function(){return this._upPosition},enumerable:!0,configurable:!0}),t.prototype.setCameraView=function(t,e,r){this._eyePosition=t,this._lookAtPoint=e,this._upPosition=r,this._viewMatrix.setLookAt(t.x,t.y,t.z,e.x,e.y,e.z,r.x,r.y,r.z)},t.prototype.translateEyePosition=function(t){var e=new n.Point3d(t.x,t.y,t.z-1),r=new n.Point3d(t.x,t.y+1,t.z);this.setCameraView(t,e,r)},t}();e.Camera=i},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),a=r(2),s=r(3),c=r(10),u=function(t){function e(e,r,o,n,u){var l=t.call(this,o)||this,h=new a.BoundingRectangle(e,r);l.horizontalRadius=(h.topRight.x-h.topLeft.x)/2,l.verticalRadius=(h.topLeft.y-h.bottomLeft.y)/2,u===c.Precision.High?(l.numberOfInnerVerticies=400,l.numberOfVerticies=403):u===c.Precision.Low&&(l.numberOfInnerVerticies=8,l.numberOfVerticies=11),l.center=s.Midpoint.between(h.topLeft,h.bottomRight);var f=l.populateVerticies(h);return l.verticies=new i.Float32Vector(f),l.glRenderMode=n.TRIANGLE_FAN,l}return o(e,t),e.prototype.populateVerticies=function(t){var e=new Float32Array(5*this.numberOfVerticies),r=t.topLeft.x,o=2*this.horizontalRadius/((this.numberOfVerticies-1)/2);this.addXYAndColorToFloat32Array(e,0,r,t.topLeft.y-this.verticalRadius);var n=this.numberOfInnerVerticies/2*5+5,i=t.topRight.x,a=t.topRight.y-this.verticalRadius;this.addXYAndColorToFloat32Array(e,n,i,a),this.addXYAndColorToFloat32Array(e,e.length-5,i,a);for(var s=5,c=0;c<this.numberOfInnerVerticies/2;c++){r+=o;var u=this.getYDistanceFromCenterForX(r);this.addXYAndColorToFloat32Array(e,s,r,u+this.center.y),this.addXYAndColorToFloat32Array(e,s+n,r,this.center.y-u),s+=5}return e},e.prototype.getYDistanceFromCenterForX=function(t){var e=Math.pow(this.verticalRadius,2);return Math.sqrt(e-e*Math.pow(t-this.center.x,2)/Math.pow(this.horizontalRadius,2))},e}(n.Shape);e.Ellipse=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Low=0]="Low",t[t.High=1]="High"}(e.Precision||(e.Precision={}))},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),a=r(2),s=r(3),c=function(t){function e(e,r,o,n){var c=t.call(this,o)||this,u=new a.BoundingRectangle(e,r),l=s.Midpoint.between(u.topLeft,u.topRight),h=new Float32Array(15);return c.addXYAndColorToFloat32Array(h,0,u.bottomLeft.x,u.bottomLeft.y),c.addXYAndColorToFloat32Array(h,5,l.x,l.y),c.addXYAndColorToFloat32Array(h,10,u.bottomRight.x,u.bottomRight.y),c.verticies=new i.Float32Vector(h),c.numberOfVerticies=3,c.glRenderMode=n.TRIANGLES,c}return o(e,t),e}(n.Shape);e.Triangle=c},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),a=r(2),s=function(t){function e(e,r,o,n){var s=t.call(this,o)||this,c=new a.BoundingRectangle(e,r),u=new Float32Array(20);return s.addXYAndColorToFloat32Array(u,0,c.topLeft.x,c.topLeft.y),s.addXYAndColorToFloat32Array(u,5,c.topRight.x,c.topRight.y),s.addXYAndColorToFloat32Array(u,10,c.bottomLeft.x,c.bottomLeft.y),s.addXYAndColorToFloat32Array(u,15,c.bottomRight.x,c.bottomRight.y),s.verticies=new i.Float32Vector(u),s.numberOfVerticies=4,s.glRenderMode=n.TRIANGLE_STRIP,s}return o(e,t),e}(n.Shape);e.Rectangle=s},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),a=r(2),s=r(3),c=function(t){function e(e,r,o,n){var s=t.call(this,o)||this,c=new a.BoundingRectangle(e,r),u=s.populateVerticies(c);return s.verticies=new i.Float32Vector(u),s.numberOfVerticies=6,s.glRenderMode=n.TRIANGLE_FAN,s}return o(e,t),e.prototype.populateVerticies=function(t){var e=new Float32Array(30),r=s.ThirdPoints.between(t.topLeft,t.topRight),o=r.first,n=r.second;this.addXYAndColorToFloat32Array(e,0,o.x,o.y),this.addXYAndColorToFloat32Array(e,5,n.x,n.y);var i=s.Midpoint.between(t.topRight,t.bottomRight);return this.addXYAndColorToFloat32Array(e,10,i.x,i.y),a=s.ThirdPoints.between(t.bottomRight,t.bottomLeft),o=a.first,n=a.second,this.addXYAndColorToFloat32Array(e,15,n.x,n.y),this.addXYAndColorToFloat32Array(e,20,o.x,o.y),i=s.Midpoint.between(t.bottomLeft,t.topLeft),this.addXYAndColorToFloat32Array(e,25,i.x,i.y),e;var a},e}(n.Shape);e.Hexagon=c},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),a=r(2),s=r(3),c=function(t){function e(e,r,o,n){var s=t.call(this,o)||this,c=new a.BoundingRectangle(e,r),u=s.populateVerticies(c);return s.verticies=new i.Float32Vector(u),s.numberOfVerticies=8,s.glRenderMode=n.TRIANGLE_FAN,s}return o(e,t),e.prototype.populateVerticies=function(t){var e=new Float32Array(40),r=s.ThirdPoints.between(t.topLeft,t.topRight),o=r.first,n=r.second;return this.addXYAndColorToFloat32Array(e,0,o.x,o.y),this.addXYAndColorToFloat32Array(e,5,n.x,n.y),i=s.ThirdPoints.between(t.topRight,t.bottomRight),o=i.first,n=i.second,this.addXYAndColorToFloat32Array(e,10,n.x,n.y),this.addXYAndColorToFloat32Array(e,15,o.x,o.y),a=s.ThirdPoints.between(t.bottomRight,t.bottomLeft),o=a.first,n=a.second,this.addXYAndColorToFloat32Array(e,20,n.x,n.y),this.addXYAndColorToFloat32Array(e,25,o.x,o.y),c=s.ThirdPoints.between(t.bottomLeft,t.topLeft),o=c.first,n=c.second,this.addXYAndColorToFloat32Array(e,30,o.x,o.y),this.addXYAndColorToFloat32Array(e,35,n.x,n.y),e;var i,a,c},e}(n.Shape);e.Octogon=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(16);e.WebGLRenderer=o.WebGLRenderer;var n=r(22);e.ContextWrangler=n.ContextWrangler;var i=r(23);e.ColorMapper=i.ColorMapper;var a=r(24);e.Line=a.Line;var s=r(1);e.Shape=s.Shape;var c=r(25);e.ShapeFactory=c.ShapeFactory;var u=r(9);e.Ellipse=u.Ellipse;var l=r(12);e.Rectangle=l.Rectangle;var h=r(13);e.Hexagon=h.Hexagon;var f=r(14);e.Octogon=f.Octogon;var d=r(11);e.Triangle=d.Triangle;var p=r(5);e.RGBColor=p.RGBColor;var g=r(8);e.Camera=g.Camera;var y=r(4);e.Point3d=y.Point3d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(17),n=r(18),i=r(7),a=r(8),s=r(4),c=r(6),u=function(){function t(t,e,r,o,n){void 0===n&&(n=null),this._vertexShaderSource="    attribute vec4 a_position;\n    attribute vec4 a_color;\n    uniform mat4 u_viewMatrix;\n    uniform float u_pointSize;\n    varying vec4 v_color;\n    void main(void)\n    {\n        gl_Position = u_viewMatrix * a_position;\n        gl_PointSize = u_pointSize;\n        v_color = a_color;\n    }\n",this._fragmentShaderSource="    precision mediump float;\n    uniform vec4 u_fragColor;    varying vec4 v_color;\n    void main(void)\n    {\n        gl_FragColor = v_color;\n    }\n",this.gl=r,this.initializeDrawingSettings(o),this.initializeCamera(n),this.setViewPortDimensions(t,e),this.initShaders(),this.initializeVertexBuffers()}return t.prototype.setViewPortDimensions=function(t,e){this.gl.viewport(0,0,t,e)},Object.defineProperty(t.prototype,"renderMode",{get:function(){return this._renderMode},set:function(t){this._drawingMode=i.DrawingMode.Verticies,this._renderMode=t,this._glRenderMode=o.RenderModeMapper.renderModeToWebGlConstant(t,this.gl)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){return this._shapeMode},set:function(t){this._drawingMode=i.DrawingMode.Shapes,this._shapeMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointSize",{get:function(){return this._pointSize},set:function(t){this._pointSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this._camera},enumerable:!0,configurable:!0}),t.prototype.addXYPointToScene=function(t,e,r,o,n,i){switch(void 0===r&&(r=this._glRenderMode),void 0===o&&(o=this._color.red),void 0===n&&(n=this._color.green),void 0===i&&(i=this._color.blue),r){case this.gl.POINTS:this._pointsVector.addVertex(new Float32Array([t,e,o,n,i]));break;case this.gl.LINES:this._linesVector.addVertex(new Float32Array([t,e,o,n,i]));break;case this.gl.LINE_STRIP:this._lineStripVector.addVertex(new Float32Array([t,e,o,n,i]));break;case this.gl.LINE_LOOP:this._lineLoopVector.addVertex(new Float32Array([t,e,o,n,i]));break;case this.gl.TRIANGLES:this._trianglesVector.addVertex(new Float32Array([t,e,o,n,i]));break;case this.gl.TRIANGLE_STRIP:this._triangleStripVector.addVertex(new Float32Array([t,e,o,n,i]));break;case this.gl.TRIANGLE_FAN:this._triangleFanVector.addVertex(new Float32Array([t,e,o,n,i]))}},t.prototype.addShapeToScene=function(t){for(var e=0,r=0;r<t.verticies.arr.length;r+=c.Settings.floatsPerVertex){var o=t.verticies.arr[e];e++;var n=t.verticies.arr[e];e++;var i=t.verticies.arr[e];e++;var a=t.verticies.arr[e];e++;var s=t.verticies.arr[e];e++,this.addXYPointToScene(o,n,t.glRenderMode,i,a,s)}},t.prototype.addShapesToScene=function(t){for(var e=0,r=t;e<r.length;e++){var o=r[e];this.addShapeToScene(o)}},t.prototype.removeAllVeriticies=function(){this.initializeVertexBuffers()},t.prototype.draw=function(){this.gl.clearColor(this._backgroundColor.red,this._backgroundColor.green,this._backgroundColor.blue,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(var t=0,e=this._vertexBuffers;t<e.length;t++)for(var r=e[t],o=0,n=r.verticiesStack;o<n.length;o++){var i=n[o];i.size>0&&this.drawGlArray(i.getTrimmedArray(),r.renderMode)}},t.prototype.initializeDrawingSettings=function(t){this._renderMode=t._renderMode||c.Settings.defaultRendereMode,this._glRenderMode=o.RenderModeMapper.renderModeToWebGlConstant(this._renderMode,this.gl),this._shapeMode=t._shapeMode||c.Settings.defaultShapeMode,this._drawingMode=t._drawingMode||c.Settings.defaultDrawingMode,this._pointSize=t._pointSize||c.Settings.defaultPointSize,this._backgroundColor=t._backgroundColor||c.Settings.defaultBackgroundColor,this._color=t._color||c.Settings.defaultColor},t.prototype.initializeCamera=function(t){if(t)this._camera=t;else{var e=new s.Point3d(0,0,0),r=new s.Point3d(0,0,-1),o=new s.Point3d(0,1,0);this._camera=new a.Camera(e,r,o)}},t.prototype.initializeVertexBuffers=function(){this._pointsVector=new n.VertexBuffer(this.gl.POINTS,this.gl),this._linesVector=new n.VertexBuffer(this.gl.LINES,this.gl),this._lineStripVector=new n.VertexBuffer(this.gl.LINE_STRIP,this.gl),this._lineLoopVector=new n.VertexBuffer(this.gl.LINE_LOOP,this.gl),this._trianglesVector=new n.VertexBuffer(this.gl.TRIANGLES,this.gl),this._triangleStripVector=new n.VertexBuffer(this.gl.TRIANGLE_STRIP,this.gl),this._triangleFanVector=new n.VertexBuffer(this.gl.TRIANGLE_FAN,this.gl),this._vertexBuffers=[this._pointsVector,this._linesVector,this._lineStripVector,this._lineLoopVector,this._trianglesVector,this._triangleStripVector,this._triangleFanVector]},t.prototype.drawGlArray=function(t,e){var r=this.gl.getAttribLocation(this._shaderProgram,"a_position"),o=this.gl.getAttribLocation(this._shaderProgram,"a_color"),n=this.gl.getUniformLocation(this._shaderProgram,"u_pointSize"),i=this.gl.getUniformLocation(this._shaderProgram,"u_viewMatrix");if(!n||!i){var a={pointSizeUniformName:n,viewMatrixUniformName:i};this.createUniforNotFoundErrorMessage(a);throw"cannot find uniform u_viewMatrix in shader program"}var s=t.BYTES_PER_ELEMENT,u=s*c.Settings.floatsPerPoint,l=s*c.Settings.floatsPerVertex,h=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(r,c.Settings.floatsPerPoint,this.gl.FLOAT,!1,l,0),this.gl.enableVertexAttribArray(r),this.gl.vertexAttribPointer(o,c.Settings.floatsPerColor,this.gl.FLOAT,!1,l,u),this.gl.enableVertexAttribArray(o),this.gl.uniformMatrix4fv(i,!1,this._camera.getViewMatrix()),this.gl.drawArrays(e,0,t.length/c.Settings.floatsPerVertex)},t.prototype.addXYAndColorToVertexBuffer=function(t,e,r){t.addArray(new Float32Array([e,r,this._color.red,this._color.green,this._color.blue]))},t.prototype.initShaders=function(){var t=this.createShader(this._fragmentShaderSource,"fragment"),e=this.createShader(this._vertexShaderSource,"vertex"),r=this.gl.createProgram();if(null===r)throw Error("Could not create shader program");if(this._shaderProgram=r,this.gl.attachShader(this._shaderProgram,e),this.gl.attachShader(this._shaderProgram,t),this.gl.linkProgram(this._shaderProgram),!this.gl.getProgramParameter(this._shaderProgram,this.gl.LINK_STATUS))throw Error("Could not initialise shaders");this.gl.useProgram(this._shaderProgram)},t.prototype.createShader=function(t,e){var r;if("fragment"===e)r=this.gl.createShader(this.gl.FRAGMENT_SHADER);else{if("vertex"!==e)return null;r=this.gl.createShader(this.gl.VERTEX_SHADER)}return this.gl.shaderSource(r,t),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(alert(this.gl.getShaderInfoLog(r)),null)},t.prototype.createUniforNotFoundErrorMessage=function(t){var e="cannot find uniform in shader program";e+="Potential culprits:";for(var r in t)t.hasOwnProperty(r)&&(e+="\t"+r+": "+t[r]);return e},t}();e.WebGLRenderer=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.renderModeToWebGlConstant=function(t,e){switch(t){case"points":return e.POINTS;case"lines":return e.LINES;case"lineStrip":return e.LINE_STRIP;case"lineLoop":return e.LINE_LOOP;case"triangles":return e.TRIANGLES;case"triangleStrip":return e.TRIANGLE_STRIP;case"triangleFan":return e.TRIANGLE_FAN;default:throw Error("could not find renderMode named "+t)}},t}();e.RenderModeMapper=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),n=r(6),i=function(){function t(t,e){if(!this.renderModeValidator(t,e))throw Error("Cannot initialize vertex buffer of unrecognized gl render mode");this.renderMode=t,this._topVertexVector=new o.Float32Vector,this.verticiesStack=new Array,this.verticiesStack.push(this._topVertexVector)}return t.prototype.addVertex=function(t){if(t.length!==n.Settings.floatsPerVertex)throw"cannot add vertex repersented by "+t.length+" floats, we only accept verticies of "+n.Settings.floatsPerVertex+" floats (x, y, r, g, b)";this._topVertexVector.size+t.length<n.Settings.vertexBufferFloatLimit?this._topVertexVector.addArray(t):(this._topVertexVector=new o.Float32Vector(t),this.verticiesStack.push(this._topVertexVector))},t.prototype.renderModeValidator=function(t,e){switch(t){case e.POINTS:case e.LINES:case e.LINE_STRIP:case e.LINE_LOOP:case e.TRIANGLES:case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:return!0}return!1},t}();e.VertexBuffer=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(20),n=r(21),i=function(){function t(t){if(void 0===t&&(t=null),t){this.elements=new Float32Array(16);for(var e=0;e<16;++e)this.elements[e]=t.elements[e]}else this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return t.prototype.setIdentity=function(){var t=this.elements;return t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,this},t.prototype.set=function(t){var e,r,o;if(r=t.elements,o=this.elements,r!==o){for(e=0;e<16;++e)o[e]=r[e];return this}},t.prototype.multiply=function(t){return this.concat(t)},t.prototype.multiplyVector3=function(t){var e=this.elements,r=t.elements,n=new o.Vector3,i=n.elements;return i[0]=r[0]*e[0]+r[1]*e[4]+r[2]*e[8]+e[11],i[1]=r[0]*e[1]+r[1]*e[5]+r[2]*e[9]+e[12],i[2]=r[0]*e[2]+r[1]*e[6]+r[2]*e[10]+e[13],n},t.prototype.multiplyVector4=function(t){var e=this.elements,r=t.elements,o=new n.Vector4,i=o.elements;return i[0]=r[0]*e[0]+r[1]*e[4]+r[2]*e[8]+r[3]*e[12],i[1]=r[0]*e[1]+r[1]*e[5]+r[2]*e[9]+r[3]*e[13],i[2]=r[0]*e[2]+r[1]*e[6]+r[2]*e[10]+r[3]*e[14],i[3]=r[0]*e[3]+r[1]*e[7]+r[2]*e[11]+r[3]*e[15],o},t.prototype.transpose=function(){var t,e;return t=this.elements,e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},t.prototype.setInverseOf=function(t){var e,r,o,n,i;if(r=t.elements,o=this.elements,n=new Float32Array(16),n[0]=r[5]*r[10]*r[15]-r[5]*r[11]*r[14]-r[9]*r[6]*r[15]+r[9]*r[7]*r[14]+r[13]*r[6]*r[11]-r[13]*r[7]*r[10],n[4]=-r[4]*r[10]*r[15]+r[4]*r[11]*r[14]+r[8]*r[6]*r[15]-r[8]*r[7]*r[14]-r[12]*r[6]*r[11]+r[12]*r[7]*r[10],n[8]=r[4]*r[9]*r[15]-r[4]*r[11]*r[13]-r[8]*r[5]*r[15]+r[8]*r[7]*r[13]+r[12]*r[5]*r[11]-r[12]*r[7]*r[9],n[12]=-r[4]*r[9]*r[14]+r[4]*r[10]*r[13]+r[8]*r[5]*r[14]-r[8]*r[6]*r[13]-r[12]*r[5]*r[10]+r[12]*r[6]*r[9],n[1]=-r[1]*r[10]*r[15]+r[1]*r[11]*r[14]+r[9]*r[2]*r[15]-r[9]*r[3]*r[14]-r[13]*r[2]*r[11]+r[13]*r[3]*r[10],n[5]=r[0]*r[10]*r[15]-r[0]*r[11]*r[14]-r[8]*r[2]*r[15]+r[8]*r[3]*r[14]+r[12]*r[2]*r[11]-r[12]*r[3]*r[10],n[9]=-r[0]*r[9]*r[15]+r[0]*r[11]*r[13]+r[8]*r[1]*r[15]-r[8]*r[3]*r[13]-r[12]*r[1]*r[11]+r[12]*r[3]*r[9],n[13]=r[0]*r[9]*r[14]-r[0]*r[10]*r[13]-r[8]*r[1]*r[14]+r[8]*r[2]*r[13]+r[12]*r[1]*r[10]-r[12]*r[2]*r[9],n[2]=r[1]*r[6]*r[15]-r[1]*r[7]*r[14]-r[5]*r[2]*r[15]+r[5]*r[3]*r[14]+r[13]*r[2]*r[7]-r[13]*r[3]*r[6],n[6]=-r[0]*r[6]*r[15]+r[0]*r[7]*r[14]+r[4]*r[2]*r[15]-r[4]*r[3]*r[14]-r[12]*r[2]*r[7]+r[12]*r[3]*r[6],n[10]=r[0]*r[5]*r[15]-r[0]*r[7]*r[13]-r[4]*r[1]*r[15]+r[4]*r[3]*r[13]+r[12]*r[1]*r[7]-r[12]*r[3]*r[5],n[14]=-r[0]*r[5]*r[14]+r[0]*r[6]*r[13]+r[4]*r[1]*r[14]-r[4]*r[2]*r[13]-r[12]*r[1]*r[6]+r[12]*r[2]*r[5],n[3]=-r[1]*r[6]*r[11]+r[1]*r[7]*r[10]+r[5]*r[2]*r[11]-r[5]*r[3]*r[10]-r[9]*r[2]*r[7]+r[9]*r[3]*r[6],n[7]=r[0]*r[6]*r[11]-r[0]*r[7]*r[10]-r[4]*r[2]*r[11]+r[4]*r[3]*r[10]+r[8]*r[2]*r[7]-r[8]*r[3]*r[6],n[11]=-r[0]*r[5]*r[11]+r[0]*r[7]*r[9]+r[4]*r[1]*r[11]-r[4]*r[3]*r[9]-r[8]*r[1]*r[7]+r[8]*r[3]*r[5],n[15]=r[0]*r[5]*r[10]-r[0]*r[6]*r[9]-r[4]*r[1]*r[10]+r[4]*r[2]*r[9]+r[8]*r[1]*r[6]-r[8]*r[2]*r[5],0===(i=r[0]*n[0]+r[1]*n[4]+r[2]*n[8]+r[3]*n[12]))return this;for(i=1/i,e=0;e<16;e++)o[e]=n[e]*i;return this},t.prototype.invert=function(){return this.setInverseOf(this)},t.prototype.setOrtho=function(t,e,r,o,n,i){var a,s,c,u;if(t===e||r===o||n===i)throw"null frustum";return s=1/(e-t),c=1/(o-r),u=1/(i-n),a=this.elements,a[0]=2*s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*c,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=-2*u,a[11]=0,a[12]=-(e+t)*s,a[13]=-(o+r)*c,a[14]=-(i+n)*u,a[15]=1,this},t.prototype.ortho=function(e,r,o,n,i,a){return this.concat((new t).setOrtho(e,r,o,n,i,a))},t.prototype.setFrustum=function(t,e,r,o,n,i){var a,s,c,u;if(t===e||o===r||n===i)throw"null frustum";if(n<=0)throw"near <= 0";if(i<=0)throw"far <= 0";return s=1/(e-t),c=1/(o-r),u=1/(i-n),a=this.elements,a[0]=2*n*s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*n*c,a[6]=0,a[7]=0,a[8]=(e+t)*s,a[9]=(o+r)*c,a[10]=-(i+n)*u,a[11]=-1,a[12]=0,a[13]=0,a[14]=-2*n*i*u,a[15]=0,this},t.prototype.frustum=function(e,r,o,n,i,a){return this.concat((new t).setFrustum(e,r,o,n,i,a))},t.prototype.setPerspective=function(t,e,r,o){var n,i,a,s;if(r===o||0===e)throw"null frustum";if(r<=0)throw"near <= 0";if(o<=0)throw"far <= 0";if(t=Math.PI*t/180/2,0===(a=Math.sin(t)))throw"null frustum";return i=1/(o-r),s=Math.cos(t)/a,n=this.elements,n[0]=s/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=-(o+r)*i,n[11]=-1,n[12]=0,n[13]=0,n[14]=-2*r*o*i,n[15]=0,this},t.prototype.perspective=function(e,r,o,n){return this.concat((new t).setPerspective(e,r,o,n))},t.prototype.setScale=function(t,e,r){var o=this.elements;return o[0]=t,o[4]=0,o[8]=0,o[12]=0,o[1]=0,o[5]=e,o[9]=0,o[13]=0,o[2]=0,o[6]=0,o[10]=r,o[14]=0,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},t.prototype.scale=function(t,e,r){var o=this.elements;return o[0]*=t,o[4]*=e,o[8]*=r,o[1]*=t,o[5]*=e,o[9]*=r,o[2]*=t,o[6]*=e,o[10]*=r,o[3]*=t,o[7]*=e,o[11]*=r,this},t.prototype.setTranslate=function(t,e,r){var o=this.elements;return o[0]=1,o[4]=0,o[8]=0,o[12]=t,o[1]=0,o[5]=1,o[9]=0,o[13]=e,o[2]=0,o[6]=0,o[10]=1,o[14]=r,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},t.prototype.translate=function(t,e,r){var o=this.elements;return o[12]+=o[0]*t+o[4]*e+o[8]*r,o[13]+=o[1]*t+o[5]*e+o[9]*r,o[14]+=o[2]*t+o[6]*e+o[10]*r,o[15]+=o[3]*t+o[7]*e+o[11]*r,this},t.prototype.setRotate=function(t,e,r,o){var n,i,a,s,c,u,l,h,f,d,p,g;return t=Math.PI*t/180,n=this.elements,i=Math.sin(t),a=Math.cos(t),0!==e&&0===r&&0===o?(e<0&&(i=-i),n[0]=1,n[4]=0,n[8]=0,n[12]=0,n[1]=0,n[5]=a,n[9]=-i,n[13]=0,n[2]=0,n[6]=i,n[10]=a,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):0===e&&0!==r&&0===o?(r<0&&(i=-i),n[0]=a,n[4]=0,n[8]=i,n[12]=0,n[1]=0,n[5]=1,n[9]=0,n[13]=0,n[2]=-i,n[6]=0,n[10]=a,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):0===e&&0===r&&0!==o?(o<0&&(i=-i),n[0]=a,n[4]=-i,n[8]=0,n[12]=0,n[1]=i,n[5]=a,n[9]=0,n[13]=0,n[2]=0,n[6]=0,n[10]=1,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):(s=Math.sqrt(e*e+r*r+o*o),1!==s&&(c=1/s,e*=c,r*=c,o*=c),u=1-a,l=e*r,h=r*o,f=o*e,d=e*i,p=r*i,g=o*i,n[0]=e*e*u+a,n[1]=l*u+g,n[2]=f*u-p,n[3]=0,n[4]=l*u-g,n[5]=r*r*u+a,n[6]=h*u+d,n[7]=0,n[8]=f*u+p,n[9]=h*u-d,n[10]=o*o*u+a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1),this},t.prototype.rotate=function(e,r,o,n){return this.concat((new t).setRotate(e,r,o,n))},t.prototype.setLookAt=function(t,e,r,o,n,i,a,s,c){var u,l,h,f,d,p,g,y,_,v,b,m;return l=o-t,h=n-e,f=i-r,d=1/Math.sqrt(l*l+h*h+f*f),l*=d,h*=d,f*=d,p=h*c-f*s,g=f*a-l*c,y=l*s-h*a,_=1/Math.sqrt(p*p+g*g+y*y),p*=_,g*=_,y*=_,v=g*f-y*h,b=y*l-p*f,m=p*h-g*l,u=this.elements,u[0]=p,u[1]=v,u[2]=-l,u[3]=0,u[4]=g,u[5]=b,u[6]=-h,u[7]=0,u[8]=y,u[9]=m,u[10]=-f,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,this.translate(-t,-e,-r)},t.prototype.lookAt=function(e,r,o,n,i,a,s,c,u){return this.concat((new t).setLookAt(e,r,o,n,i,a,s,c,u))},t.prototype.dropShadow=function(e,r){var o=new t,n=o.elements,i=e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3];return n[0]=i-r[0]*e[0],n[1]=-r[1]*e[0],n[2]=-r[2]*e[0],n[3]=-r[3]*e[0],n[4]=-r[0]*e[1],n[5]=i-r[1]*e[1],n[6]=-r[2]*e[1],n[7]=-r[3]*e[1],n[8]=-r[0]*e[2],n[9]=-r[1]*e[2],n[10]=i-r[2]*e[2],n[11]=-r[3]*e[2],n[12]=-r[0]*e[3],n[13]=-r[1]*e[3],n[14]=-r[2]*e[3],n[15]=i-r[3]*e[3],this.concat(o)},t.prototype.dropShadowDirectionally=function(t,e,r,o,n,i,a,s,c){var u=o*t+n*e+i*r;return this.dropShadow([t,e,r,-u],[a,s,c,0])},t.prototype.concat=function(t){var e,r,o,n,i,a,s,c;if(r=this.elements,o=this.elements,n=t.elements,r===n)for(n=new Float32Array(16),e=0;e<16;++e)n[e]=r[e];for(e=0;e<4;e++)i=o[e],a=o[e+4],s=o[e+8],c=o[e+12],r[e]=i*n[0]+a*n[1]+s*n[2]+c*n[3],r[e+4]=i*n[4]+a*n[5]+s*n[6]+c*n[7],r[e+8]=i*n[8]+a*n[9]+s*n[10]+c*n[11],r[e+12]=i*n[12]+a*n[13]+s*n[14]+c*n[15];return this},t}();e.Matrix4=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){void 0===t&&(t=null);var e=new Float32Array(3);t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),this.elements=e}return t.prototype.normalize=function(){var t=this.elements,e=t[0],r=t[1],o=t[2],n=Math.sqrt(e*e+r*r+o*o);return n?1===n?this:(n=1/n,t[0]=e*n,t[1]=r*n,t[2]=o*n,this):(t[0]=0,t[1]=0,t[2]=0,this)},t}();e.Vector3=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){void 0===t&&(t=null);var e=new Float32Array(4);t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),this.elements=e}return t}();e.Vector4=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.getContext=function(t){var e;try{e=t.getContext("webgl",{alpha:!1,antialias:!1,depth:!1})}catch(t){var r="Error creating WebGL Context!: "+t.toString();throw Error(r)}if(null===e){var r="Error creating WebGL Context!, gl === null";throw Error(r)}return e},t}();e.ContextWrangler=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),n=function(){function t(){}return t.colorToRGBColor=function(t){switch(t){case"red":return new o.RGBColor(1,0,0);case"orange":return new o.RGBColor(1,.271,0);case"yellow":return new o.RGBColor(1,1,0);case"green":return new o.RGBColor(0,1,0);case"cyan":return new o.RGBColor(0,1,1);case"blue":return new o.RGBColor(0,0,1);case"indigo":return new o.RGBColor(.294,0,.51);case"fuchsia":return new o.RGBColor(1,0,1);case"white":return new o.RGBColor(1,1,1);default:throw Error("could not find color "+t)}},t}();e.ColorMapper=n},function(t,e,r){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),a=function(t){function e(e,r,o){var n=t.call(this,r)||this,a=new Float32Array(5);return n.addXYAndColorToFloat32Array(a,0,e.x,e.y),n.verticies=new i.Float32Vector(a),n.numberOfVerticies=1,n.glRenderMode=o.LINE_STRIP,n}return o(e,t),e.prototype.addVertex=function(t){var e=new Float32Array(5);this.addXYAndColorToFloat32Array(e,0,t.x,t.y),this.verticies.addArray(e),this.numberOfVerticies++},e}(n.Shape);e.Line=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(9),n=r(11),i=r(12),a=r(13),s=r(14),c=r(10),u=function(){function t(){}return t.createShape=function(t,e,r,o,n){switch(r){case"ellipses":return this.createEllipse(t,e,o,n);case"triangles":return this.createTriangle(t,e,o,n);case"rectangles":return this.createRectangle(t,e,o,n);case"hexagons":return this.createHexagon(t,e,o,n);case"octogons":return this.createOctogon(t,e,o,n);default:throw Error("cannot recognize shape type "+r)}},t.createEllipse=function(t,e,r,n){return new o.Ellipse(t,e,r,n,c.Precision.High)},t.createTriangle=function(t,e,r,o){return new n.Triangle(t,e,r,o)},t.createRectangle=function(t,e,r,o){return new i.Rectangle(t,e,r,o)},t.createHexagon=function(t,e,r,o){return new a.Hexagon(t,e,r,o)},t.createOctogon=function(t,e,r,o){return new s.Octogon(t,e,r,o)},t}();e.ShapeFactory=u}])});