!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("webgl-renderer",[],t):"object"==typeof exports?exports["webgl-renderer"]=t():e["webgl-renderer"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=29)}([function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.elements=new Float32Array(3),this.elements[0]=e,this.elements[1]=t,this.elements[2]=r}return e.prototype.normalize=function(){var e=this.elements,t=e[0],r=e[1],i=e[2],n=Math.sqrt(t*t+r*r+i*i);return n?1===n?this:(n=1/n,e[0]=t*n,e[1]=r*n,e[2]=i*n,this):(e[0]=0,e[1]=0,e[2]=0,this)},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},Object.defineProperty(e.prototype,"x",{get:function(){return this.elements[0]},set:function(e){this.elements[0]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.elements[1]},set:function(e){this.elements[1]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this.elements[2]},set:function(e){this.elements[2]=e},enumerable:!0,configurable:!0}),e}();t.Vec3=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=1),this.elements=new Float32Array(4),this.elements[0]=e,this.elements[1]=t,this.elements[2]=r,this.elements[3]=i}return Object.defineProperty(e.prototype,"x",{get:function(){return this.elements[0]},set:function(e){this.elements[0]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.elements[1]},set:function(e){this.elements[1]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this.elements[2]},set:function(e){this.elements[2]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this.elements[3]},set:function(e){this.elements[3]=e},enumerable:!0,configurable:!0}),e}();t.Vec4=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(3);t.Mat4=i.Mat4;var n=r(1);t.Vec4=n.Vec4;var o=r(0);t.Vec3=o.Vec3;var s=r(4);t.Vec2=s.Vec2},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),n=r(1),o=function(){function e(e){if(void 0===e&&(e=null),e){this.elements=new Float32Array(16);for(var t=0;t<16;++t)this.elements[t]=e.elements[t]}else this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return e.prototype.setIdentity=function(){var e=this.elements;return e[0]=1,e[4]=0,e[8]=0,e[12]=0,e[1]=0,e[5]=1,e[9]=0,e[13]=0,e[2]=0,e[6]=0,e[10]=1,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1,this},e.prototype.set=function(e){var t,r,i;if(r=e.elements,i=this.elements,r!==i){for(t=0;t<16;++t)i[t]=r[t];return this}},e.prototype.multiply=function(e){return this.concat(e)},e.prototype.multiplyVector3=function(e){var t=this.elements,r=e.elements,n=new i.Vec3,o=n.elements;return o[0]=r[0]*t[0]+r[1]*t[4]+r[2]*t[8]+t[11],o[1]=r[0]*t[1]+r[1]*t[5]+r[2]*t[9]+t[12],o[2]=r[0]*t[2]+r[1]*t[6]+r[2]*t[10]+t[13],n},e.prototype.multiplyVector4=function(e){var t=this.elements,r=e.elements,i=new n.Vec4,o=i.elements;return o[0]=r[0]*t[0]+r[1]*t[4]+r[2]*t[8]+r[3]*t[12],o[1]=r[0]*t[1]+r[1]*t[5]+r[2]*t[9]+r[3]*t[13],o[2]=r[0]*t[2]+r[1]*t[6]+r[2]*t[10]+r[3]*t[14],o[3]=r[0]*t[3]+r[1]*t[7]+r[2]*t[11]+r[3]*t[15],i},e.prototype.transpose=function(){var e,t;return e=this.elements,t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},e.prototype.setInverseOf=function(e){var t,r,i,n,o;if(r=e.elements,i=this.elements,n=new Float32Array(16),n[0]=r[5]*r[10]*r[15]-r[5]*r[11]*r[14]-r[9]*r[6]*r[15]+r[9]*r[7]*r[14]+r[13]*r[6]*r[11]-r[13]*r[7]*r[10],n[4]=-r[4]*r[10]*r[15]+r[4]*r[11]*r[14]+r[8]*r[6]*r[15]-r[8]*r[7]*r[14]-r[12]*r[6]*r[11]+r[12]*r[7]*r[10],n[8]=r[4]*r[9]*r[15]-r[4]*r[11]*r[13]-r[8]*r[5]*r[15]+r[8]*r[7]*r[13]+r[12]*r[5]*r[11]-r[12]*r[7]*r[9],n[12]=-r[4]*r[9]*r[14]+r[4]*r[10]*r[13]+r[8]*r[5]*r[14]-r[8]*r[6]*r[13]-r[12]*r[5]*r[10]+r[12]*r[6]*r[9],n[1]=-r[1]*r[10]*r[15]+r[1]*r[11]*r[14]+r[9]*r[2]*r[15]-r[9]*r[3]*r[14]-r[13]*r[2]*r[11]+r[13]*r[3]*r[10],n[5]=r[0]*r[10]*r[15]-r[0]*r[11]*r[14]-r[8]*r[2]*r[15]+r[8]*r[3]*r[14]+r[12]*r[2]*r[11]-r[12]*r[3]*r[10],n[9]=-r[0]*r[9]*r[15]+r[0]*r[11]*r[13]+r[8]*r[1]*r[15]-r[8]*r[3]*r[13]-r[12]*r[1]*r[11]+r[12]*r[3]*r[9],n[13]=r[0]*r[9]*r[14]-r[0]*r[10]*r[13]-r[8]*r[1]*r[14]+r[8]*r[2]*r[13]+r[12]*r[1]*r[10]-r[12]*r[2]*r[9],n[2]=r[1]*r[6]*r[15]-r[1]*r[7]*r[14]-r[5]*r[2]*r[15]+r[5]*r[3]*r[14]+r[13]*r[2]*r[7]-r[13]*r[3]*r[6],n[6]=-r[0]*r[6]*r[15]+r[0]*r[7]*r[14]+r[4]*r[2]*r[15]-r[4]*r[3]*r[14]-r[12]*r[2]*r[7]+r[12]*r[3]*r[6],n[10]=r[0]*r[5]*r[15]-r[0]*r[7]*r[13]-r[4]*r[1]*r[15]+r[4]*r[3]*r[13]+r[12]*r[1]*r[7]-r[12]*r[3]*r[5],n[14]=-r[0]*r[5]*r[14]+r[0]*r[6]*r[13]+r[4]*r[1]*r[14]-r[4]*r[2]*r[13]-r[12]*r[1]*r[6]+r[12]*r[2]*r[5],n[3]=-r[1]*r[6]*r[11]+r[1]*r[7]*r[10]+r[5]*r[2]*r[11]-r[5]*r[3]*r[10]-r[9]*r[2]*r[7]+r[9]*r[3]*r[6],n[7]=r[0]*r[6]*r[11]-r[0]*r[7]*r[10]-r[4]*r[2]*r[11]+r[4]*r[3]*r[10]+r[8]*r[2]*r[7]-r[8]*r[3]*r[6],n[11]=-r[0]*r[5]*r[11]+r[0]*r[7]*r[9]+r[4]*r[1]*r[11]-r[4]*r[3]*r[9]-r[8]*r[1]*r[7]+r[8]*r[3]*r[5],n[15]=r[0]*r[5]*r[10]-r[0]*r[6]*r[9]-r[4]*r[1]*r[10]+r[4]*r[2]*r[9]+r[8]*r[1]*r[6]-r[8]*r[2]*r[5],0==(o=r[0]*n[0]+r[1]*n[4]+r[2]*n[8]+r[3]*n[12]))return this;for(o=1/o,t=0;t<16;t++)i[t]=n[t]*o;return this},e.prototype.invert=function(){return this.setInverseOf(this)},e.prototype.setOrtho=function(e,t,r,i,n,o){var s,a,u,h;if(e===t||r===i||n===o)throw"null frustum";return a=1/(t-e),u=1/(i-r),h=1/(o-n),s=this.elements,s[0]=2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*u,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=-2*h,s[11]=0,s[12]=-(t+e)*a,s[13]=-(i+r)*u,s[14]=-(o+n)*h,s[15]=1,this},e.prototype.ortho=function(t,r,i,n,o,s){return this.concat((new e).setOrtho(t,r,i,n,o,s))},e.prototype.setFrustum=function(e,t,r,i,n,o){var s,a,u,h;if(e===t||i===r||n===o)throw"null frustum";if(n<=0)throw"near <= 0";if(o<=0)throw"far <= 0";return a=1/(t-e),u=1/(i-r),h=1/(o-n),s=this.elements,s[0]=2*n*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*n*u,s[6]=0,s[7]=0,s[8]=(t+e)*a,s[9]=(i+r)*u,s[10]=-(o+n)*h,s[11]=-1,s[12]=0,s[13]=0,s[14]=-2*n*o*h,s[15]=0,this},e.prototype.frustum=function(t,r,i,n,o,s){return this.concat((new e).setFrustum(t,r,i,n,o,s))},e.prototype.setPerspective=function(e,t,r,i){var n,o,s,a;if(r===i||0===t)throw"null frustum";if(r<=0)throw"near <= 0";if(i<=0)throw"far <= 0";if(e=Math.PI*e/180/2,0===(s=Math.sin(e)))throw"null frustum";return o=1/(i-r),a=Math.cos(e)/s,n=this.elements,n[0]=a/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=-(i+r)*o,n[11]=-1,n[12]=0,n[13]=0,n[14]=-2*r*i*o,n[15]=0,this},e.prototype.perspective=function(t,r,i,n){return this.concat((new e).setPerspective(t,r,i,n))},e.prototype.setScale=function(e,t,r){var i=this.elements;return i[0]=e,i[4]=0,i[8]=0,i[12]=0,i[1]=0,i[5]=t,i[9]=0,i[13]=0,i[2]=0,i[6]=0,i[10]=r,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},e.prototype.scale=function(e,t,r){var i=this.elements;return i[0]*=e,i[4]*=t,i[8]*=r,i[1]*=e,i[5]*=t,i[9]*=r,i[2]*=e,i[6]*=t,i[10]*=r,i[3]*=e,i[7]*=t,i[11]*=r,this},e.prototype.setTranslate=function(e,t,r){var i=this.elements;return i[0]=1,i[4]=0,i[8]=0,i[12]=e,i[1]=0,i[5]=1,i[9]=0,i[13]=t,i[2]=0,i[6]=0,i[10]=1,i[14]=r,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},e.prototype.translate=function(e,t,r){var i=this.elements;return i[12]+=i[0]*e+i[4]*t+i[8]*r,i[13]+=i[1]*e+i[5]*t+i[9]*r,i[14]+=i[2]*e+i[6]*t+i[10]*r,i[15]+=i[3]*e+i[7]*t+i[11]*r,this},e.prototype.setRotate=function(e,t,r,i){var n,o,s,a,u,h,f,c,l,p,d,g;return e=Math.PI*e/180,n=this.elements,o=Math.sin(e),s=Math.cos(e),0!==t&&0===r&&0===i?(t<0&&(o=-o),n[0]=1,n[4]=0,n[8]=0,n[12]=0,n[1]=0,n[5]=s,n[9]=-o,n[13]=0,n[2]=0,n[6]=o,n[10]=s,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):0===t&&0!==r&&0===i?(r<0&&(o=-o),n[0]=s,n[4]=0,n[8]=o,n[12]=0,n[1]=0,n[5]=1,n[9]=0,n[13]=0,n[2]=-o,n[6]=0,n[10]=s,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):0===t&&0===r&&0!==i?(i<0&&(o=-o),n[0]=s,n[4]=-o,n[8]=0,n[12]=0,n[1]=o,n[5]=s,n[9]=0,n[13]=0,n[2]=0,n[6]=0,n[10]=1,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):(a=Math.sqrt(t*t+r*r+i*i),1!==a&&(u=1/a,t*=u,r*=u,i*=u),h=1-s,f=t*r,c=r*i,l=i*t,p=t*o,d=r*o,g=i*o,n[0]=t*t*h+s,n[1]=f*h+g,n[2]=l*h-d,n[3]=0,n[4]=f*h-g,n[5]=r*r*h+s,n[6]=c*h+p,n[7]=0,n[8]=l*h+d,n[9]=c*h-p,n[10]=i*i*h+s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1),this},e.prototype.rotate=function(t,r,i,n){return this.concat((new e).setRotate(t,r,i,n))},e.prototype.setLookAt=function(e,t,r,i,n,o,s,a,u){var h,f,c,l,p,d,g,_,y,b,v,m;return f=i-e,c=n-t,l=o-r,p=1/Math.sqrt(f*f+c*c+l*l),f*=p,c*=p,l*=p,d=c*u-l*a,g=l*s-f*u,_=f*a-c*s,y=1/Math.sqrt(d*d+g*g+_*_),d*=y,g*=y,_*=y,b=g*l-_*c,v=_*f-d*l,m=d*c-g*f,h=this.elements,h[0]=d,h[1]=b,h[2]=-f,h[3]=0,h[4]=g,h[5]=v,h[6]=-c,h[7]=0,h[8]=_,h[9]=m,h[10]=-l,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this.translate(-e,-t,-r)},e.prototype.lookAt=function(t,r,i,n,o,s,a,u,h){return this.concat((new e).setLookAt(t,r,i,n,o,s,a,u,h))},e.prototype.dropShadow=function(t,r){var i=new e,n=i.elements,o=t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3];return n[0]=o-r[0]*t[0],n[1]=-r[1]*t[0],n[2]=-r[2]*t[0],n[3]=-r[3]*t[0],n[4]=-r[0]*t[1],n[5]=o-r[1]*t[1],n[6]=-r[2]*t[1],n[7]=-r[3]*t[1],n[8]=-r[0]*t[2],n[9]=-r[1]*t[2],n[10]=o-r[2]*t[2],n[11]=-r[3]*t[2],n[12]=-r[0]*t[3],n[13]=-r[1]*t[3],n[14]=-r[2]*t[3],n[15]=o-r[3]*t[3],this.concat(i)},e.prototype.dropShadowDirectionally=function(e,t,r,i,n,o,s,a,u){var h=i*e+n*t+o*r;return this.dropShadow([e,t,r,-h],[s,a,u,0])},e.prototype.concat=function(e){var t,r,i,n,o,s,a,u;if(r=this.elements,i=this.elements,n=e.elements,r===n)for(n=new Float32Array(16),t=0;t<16;++t)n[t]=r[t];for(t=0;t<4;t++)o=i[t],s=i[t+4],a=i[t+8],u=i[t+12],r[t]=o*n[0]+s*n[1]+a*n[2]+u*n[3],r[t+4]=o*n[4]+s*n[5]+a*n[6]+u*n[7],r[t+8]=o*n[8]+s*n[9]+a*n[10]+u*n[11],r[t+12]=o*n[12]+s*n[13]+a*n[14]+u*n[15];return this},e}();t.Mat4=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.elements=new Float32Array(2),this.elements[0]=e,this.elements[1]=t}return e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},Object.defineProperty(e.prototype,"x",{get:function(){return this.elements[0]},set:function(e){this.elements[0]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.elements[1]},set:function(e){this.elements[1]=e},enumerable:!0,configurable:!0}),e}();t.Vec2=i}])})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Constants=void 0;var i=Float32Array.BYTES_PER_ELEMENT,n=3*i,o=3*i,s=n+o,a=7*i,u=22*i,h=4*i,f=s+0*h,c=s+1*h,l=s+2*h,p=s+3*h;t.Constants={floatsPerPosition:3,floatsPerColor:3,floatsPerPointSize:1,verticiesPerTriangle:3,floatsPerMat4Row:4,floatsPerMat4:16,floatsPerPositionColor:6,floatsPerPointVertex:7,floatsPerDynamicVertex:22,floatsPerTriangle:66,bytesPerPosition:n,bytesPerPositionColor:s,bytesPerPointVertex:a,bytesPerDynamicVertex:u,modelMatrixRow0Offset:f,modelMatrixRow1Offset:c,modelMatrixRow2Offset:l,modelMatrixRow3Offset:p,defaultAlpha:1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeMode=void 0;!function(e){e.points="points",e.lines="lines",e.triangles="triangles",e.rectangles="rectangles",e.hexagons="hexagons",e.octogons="octogons",e.ellipses="ellipses",e.box="box"}(t.ShapeMode||(t.ShapeMode={}))},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicShape=void 0;var n=r(0),o=r(1),s=r(5),a=function(e){function t(t,r,i,s){var a=e.call(this,t,o.Constants.floatsPerDynamicVertex,s,r,i)||this;return a._modelMatrix=(new n.Mat4).setIdentity(),a}return i(t,e),Object.defineProperty(t.prototype,"modelMatrix",{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=e,this.computeVerticies()},enumerable:!1,configurable:!0}),t.prototype.addXYZColorAndModelMatToVerticies=function(e,t,r,i){var n=this._modelMatrix.elements;this._verticies[e]=t,this._verticies[e+1]=r,this._verticies[e+2]=i,this._verticies[e+3]=this._rgbColor.red,this._verticies[e+4]=this._rgbColor.green,this._verticies[e+5]=this._rgbColor.blue,this._verticies[e+6]=n[0],this._verticies[e+7]=n[1],this._verticies[e+8]=n[2],this._verticies[e+9]=n[3],this._verticies[e+10]=n[4],this._verticies[e+11]=n[5],this._verticies[e+12]=n[6],this._verticies[e+13]=n[7],this._verticies[e+14]=n[8],this._verticies[e+15]=n[9],this._verticies[e+16]=n[10],this._verticies[e+17]=n[11],this._verticies[e+18]=n[12],this._verticies[e+19]=n[13],this._verticies[e+20]=n[14],this._verticies[e+21]=n[15]},t.prototype.addTriangleToVerticies=function(e,t,r,i){this.addXYZColorAndModelMatToVerticies(e,t.x,t.y,t.z),this.addXYZColorAndModelMatToVerticies(e+o.Constants.floatsPerDynamicVertex,r.x,r.y,r.z),this.addXYZColorAndModelMatToVerticies(e+2*o.Constants.floatsPerDynamicVertex,i.x,i.y,i.z)},t}(s.Shape);t.DynamicShape=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;var i=r(0),n=r(7),o=r(2),s=n.RenderMode.points,a=o.ShapeMode.points,u={red:.9,green:.9,blue:.9},h={red:0,green:0,blue:0},f=new i.Vec3(0,0,.9),c=new i.Vec3(0,0,-1),l=new i.Vec3(0,1,0),p=(new i.Mat4).setIdentity();t.Settings={defaultRendereMode:s,defaultShapeMode:a,defaultPointSize:10,defaultBackgroundColor:u,defaultBackgroundAlpha:1,defaultColor:h,defaultEyePosition:f,defaultLookAtPoint:c,defaultUpPosition:l,defaultFieldOfView:60,defaultNear:.01,defaultFar:2,defaultModelMatrix:p,defaultIsFullScreen:!1,instancedArrayExtensionName:"ANGLE_instanced_arrays"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=void 0;var i=r(19),n=r(4),o=function(){function e(e,t,r,o,s){void 0===r&&(r=n.Settings.defaultColor),void 0===o&&(o=null),void 0===s&&(s=null),this.numberOfVerticies=e,this.numberOfFloatsPerVertex=t,this._rgbColor=r,this._verticies=new Float32Array(e*this.numberOfFloatsPerVertex),o&&s&&(this._boundingRect=new i.BoundingRectangle(o,s))}return Object.defineProperty(e.prototype,"verticies",{get:function(){return this._verticies},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rgbColor",{get:function(){return this._rgbColor},set:function(e){this._rgbColor=e,this.computeVerticies()},enumerable:!1,configurable:!0}),e}();t.Shape=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThirdPoints=t.Midpoint=void 0;var i=r(0),n=function(){function e(){}return e.between=function(e,t){var r=(e.x+t.x)/2,n=(e.y+t.y)/2,o=(e.z+t.z)/2;return new i.Vec3(r,n,o)},e}();t.Midpoint=n;var o=function(){function e(){}return e.between=function(e,t){var r=Math.max(e.x,t.x),n=Math.min(e.x,t.x),o=Math.max(e.y,t.y),s=Math.min(e.y,t.y),a=Math.max(e.z,t.z),u=Math.min(e.z,t.z),h=(r-n)/3,f=(o-s)/3,c=(a-u)/3,l=new i.Vec3(n+h,s+f,u+c);return{first:l,second:new i.Vec3(l.x+h,l.y+f,l.z+c)}},e}();t.ThirdPoints=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderModeMapper=t.RenderMode=void 0;!function(e){e.points="points",e.lines="lines",e.lineStrip="lineStrip",e.lineLoop="lineLoop",e.triangles="triangles",e.triangleStrip="triangleStrip",e.triangleFan="triangleFan"}(t.RenderMode||(t.RenderMode={}));var i=function(){function e(){}return e.renderModeToWebGlConstant=function(e,t){switch(e){case"points":return t.POINTS;case"lines":return t.LINES;case"lineStrip":return t.LINE_STRIP;case"lineLoop":return t.LINE_LOOP;case"triangles":return t.TRIANGLES;case"triangleStrip":return t.TRIANGLE_STRIP;case"triangleFan":return t.TRIANGLE_FAN;default:throw"could not find renderMode named "+e}},e}();t.RenderModeMapper=i},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeBuffer=void 0;var n=r(14),o=r(9),s=r(16),a=function(e){function t(t){var r=e.call(this,t)||this;return r._verticies=new o.Float32Vector,r._trimmedArray=new Float32Array(0),r._shapes={},r}return i(t,e),Object.defineProperty(t.prototype,"verticies",{get:function(){return this._trimmedArray},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return Object.keys(this._shapes).length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){var e=Object.keys(this._shapes)[0];return this._shapes[e].shape},enumerable:!1,configurable:!0}),t.prototype.addShape=function(e){var t=this.introduceShape(e);return this._trimmedArray=this._verticies.getTrimmedArray(),this.refreshWebglBuffer(),t},t.prototype.addShapes=function(e){var t=new Array;if(e.length<1)return t;var r=e[0],i=r.numberOfVerticies*r.numberOfFloatsPerVertex,n=i*e.length;this._verticies.resize(n);for(var o=0;o<e.length;o++){var s=e[o],a=this.introduceShape(s);t[o]=a}return this._trimmedArray=this._verticies.getTrimmedArray(),this.refreshWebglBuffer(),t},t.prototype.removeShape=function(e){if(this._shapes.hasOwnProperty(e)){var t=this._shapes[e].shape,r=this._shapes[e].index,i=t.numberOfVerticies*t.numberOfFloatsPerVertex,n=r*i;return this._verticies.remove(n,i),this._trimmedArray=this._verticies.getTrimmedArray(),this.refreshWebglBuffer(),this.reorderIndicies(r),delete this._shapes[e],!0}return!1},t.prototype.updateColor=function(e,t){if(this._shapes.hasOwnProperty(e)){var r=this._shapes[e].shape,i=this._shapes[e].index;r.rgbColor=t;var n=r.numberOfVerticies*r.numberOfFloatsPerVertex,o=i*n;return this._verticies.overwrite(o,r.verticies),this._trimmedArray=this._verticies.getTrimmedArray(),this.refreshWebglBuffer(),!0}return!1},t.prototype.reorderIndicies=function(e){for(var t=0,r=Object.keys(this._shapes);t<r.length;t++){var i=r[t];this._shapes[i].index>e&&this._shapes[i].index--}},t.prototype.introduceShape=function(e){var t=n(),r=this.count;return this._shapes[t]={shape:e,index:r},this._verticies.addArray(e.verticies),t},t}(s.GlBufferWrapper);t.ShapeBuffer=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Float32Vector=void 0;var i=r(34),n=r(42),o=function(){function e(e,t,r){void 0===e&&(e=new Float32Array(0)),void 0===t&&(t=0),void 0===r&&(r=!0),this.arr=e,this.size=e.length,this._sizeLimit=t,this._bestFit=r}return e.prototype.resize=function(e){if(!(e<=this.arr.length)){var t=this.arr;this.arr=new Float32Array(e),this.arr.set(t)}},e.prototype.addNumber=function(e){var t=this.size+1;if(this._sizeLimit&&t>this._sizeLimit)return!1;var r=this._sizeLimit?Math.min(2*t,this._sizeLimit):2*t;return t>=this.arr.length&&this.resize(r),this.arr[this.size]=e,this.size=t,!0},e.prototype.addArray=function(e){var t=this.size+e.length;if(this._sizeLimit&&t>this._sizeLimit){if(!this._bestFit)return!1;var r=this._sizeLimit-this.size,n=i(e,0,r);return this.addArray(n)}var o=this._sizeLimit?Math.min(2*t,this._sizeLimit):2*t;return t>=this.arr.length&&this.resize(o),this.arr.set(e,this.size),this.size=t,!0},e.prototype.remove=function(e,t){if(void 0===t&&(t=1),e<0||e>=this.arr.length)throw"index("+e+") is out of bounds";t=t>0?t:1;for(var r=e,i=r+t;i<this.size;i++)this.arr[r]=this.arr[i],r++;n.Float32ArrayUtils.fill(this.arr,r);var o=e+t>=this.size,s=o?this.size-e:t;this.size-=s},e.prototype.overwrite=function(e,t){if(e<0||e>=this.arr.length)throw"index("+e+") is out of bounds";if(!(t.length<1)){for(var r=0,n=e;n<this.size&&!(r>=t.length);n++)this.arr[n]=t[r],r++;if(r<t.length){var o=i(t,r);this.addArray(o)}}},e.prototype.getTrimmedArray=function(){return this.arr.length>this.size?i(this.arr,0,this.size):this.arr},e}();t.Float32Vector=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeFactory=void 0;var i=r(18),n=r(21),o=r(22),s=r(23),a=r(24),u=r(20),h=r(25),f=function(){function e(){}return e.prototype.createTriangle=function(e,t,r,i){return new n.Triangle(e,t,r,i)},e.prototype.createRectangle=function(e,t,r,i){return new o.Rectangle(e,t,r,i)},e.prototype.createHexagon=function(e,t,r,i){return new s.Hexagon(e,t,r,i)},e.prototype.createOctogon=function(e,t,r,i){return new a.Octogon(e,t,r,i)},e.prototype.createEllipse=function(e,t,r,n){return new i.Ellipse(e,t,r,u.Precision.High,n)},e.prototype.createBox=function(e,t,r,i){return new h.Box(e,t,r,i)},e}();t.ShapeFactory=f},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Point=void 0;var n=r(5),o=r(1),s=r(2),a=r(4),u=function(e){function t(r,i,n,u){void 0===u&&(u=a.Settings.defaultPointSize);var h=e.call(this,t.numberOfVerticies,o.Constants.floatsPerPointVertex,n)||this;return h.shapeMode=s.ShapeMode.points,h._location=r,h._pointSize=u,h.computeVerticies(),h.glRenderMode=i.POINTS,h}return i(t,e),Object.defineProperty(t.prototype,"pointSize",{get:function(){return this._pointSize},set:function(e){this._pointSize=e,this.computeVerticies()},enumerable:!1,configurable:!0}),t.prototype.computeVerticies=function(){this.addXYZColorAndPointSize(0,this._location.x,this._location.y,this._location.z)},t.prototype.addXYZColorAndPointSize=function(e,t,r,i){this._verticies[e]=t,this._verticies[e+1]=r,this._verticies[e+2]=i,this._verticies[e+3]=this.rgbColor.red,this._verticies[e+4]=this.rgbColor.green,this._verticies[e+5]=this.rgbColor.blue,this._verticies[e+6]=this._pointSize},t.numberOfVerticies=1,t}(n.Shape);t.Point=u},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Line=void 0;var n=r(5),o=r(9),s=r(1),a=r(2),u=function(e){function t(t,r,i){var n=e.call(this,1,s.Constants.floatsPerPositionColor,i)||this;n.shapeMode=a.ShapeMode.lines;new o.Float32Vector;return n._vertexPositions=new Array,n._vertexPositions.push(t),n.computeVerticies(),n.glRenderMode=r.LINE_STRIP,n._gl=r,n._glBuffer=n._gl.createBuffer(),n}return i(t,e),Object.defineProperty(t.prototype,"verticies",{get:function(){return this._verticiesVector.getTrimmedArray()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"glBuffer",{get:function(){return this._glBuffer},enumerable:!1,configurable:!0}),t.prototype.refreshWebglBuffer=function(){this._gl.deleteBuffer(this._glBuffer),this._glBuffer=this._gl.createBuffer()},t.prototype.computeVerticies=function(){for(var e=new Float32Array(this._vertexPositions.length*s.Constants.floatsPerPositionColor),t=0;t<this._vertexPositions.length;t++){var r=t*s.Constants.floatsPerPositionColor,i=this._vertexPositions[t];this.addXYZAndColorToFloat32Array(e,r,i.x,i.y,i.z)}this._verticiesVector=new o.Float32Vector(e)},t.prototype.addVertex=function(e){this._vertexPositions.push(e),this.numberOfVerticies++;var t=new Float32Array(s.Constants.floatsPerPositionColor);this.addXYZAndColorToFloat32Array(t,0,e.x,e.y,e.z),this._verticiesVector.addArray(t),this.refreshWebglBuffer()},t.prototype.addXYZAndColorToFloat32Array=function(e,t,r,i,n){e[t]=r,e[t+1]=i,e[t+2]=n,e[t+3]=this.rgbColor.red,e[t+4]=this.rgbColor.green,e[t+5]=this.rgbColor.blue},t}(n.Shape);t.Line=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLRenderer=void 0;var i=r(0),n=r(14),o=r(7),s=r(1),a=r(31),u=r(32),h=r(4),f=r(15),c=r(33),l=r(43),p=function(){function e(e,t,r){var i=this;void 0===t&&(t={}),void 0===r&&(r=function(){}),this._pointVertexShaderSource="    attribute vec4 "+a.ShaderSettings.positionAttributeName+";\n    attribute vec4 "+a.ShaderSettings.colorAttributeName+";\n    attribute float "+a.ShaderSettings.pointSizeAttributeName+";\n    uniform mat4 "+a.ShaderSettings.vpMatrixUniformName+";\n    varying vec4 v_color;\n    void main(void)\n    {\n        gl_Position = "+a.ShaderSettings.vpMatrixUniformName+" * "+a.ShaderSettings.positionAttributeName+";\n        gl_PointSize = "+a.ShaderSettings.pointSizeAttributeName+";\n        v_color = "+a.ShaderSettings.colorAttributeName+";\n    }",this._dynamicVertexShaderSource="    attribute vec4 "+a.ShaderSettings.positionAttributeName+";\n    attribute vec4 "+a.ShaderSettings.colorAttributeName+";\n    attribute mat4 "+a.ShaderSettings.modelMatrixAttributeName+";\n    uniform mat4 "+a.ShaderSettings.vpMatrixUniformName+";\n    varying vec4 v_color;\n    void main(void)\n    {\n        gl_Position = "+a.ShaderSettings.vpMatrixUniformName+" * "+a.ShaderSettings.modelMatrixAttributeName+" * "+a.ShaderSettings.positionAttributeName+";\n        v_color = "+a.ShaderSettings.colorAttributeName+";\n    }",this._positionColorVertexShaderSource="    attribute vec4 "+a.ShaderSettings.positionAttributeName+";\n    attribute vec4 "+a.ShaderSettings.colorAttributeName+";\n    uniform mat4 "+a.ShaderSettings.vpMatrixUniformName+";\n    varying vec4 v_color;\n    void main(void)\n    {\n        gl_Position = "+a.ShaderSettings.vpMatrixUniformName+" * "+a.ShaderSettings.positionAttributeName+";\n        v_color = "+a.ShaderSettings.colorAttributeName+";\n    }",this._fragmentShaderSource="    precision mediump float;\n    uniform vec4 u_fragColor;\n    varying vec4 v_color;\n    void main(void)\n    {\n        gl_FragColor = v_color;\n    }",this.handleContextLost=function(e){i.stop(),e.preventDefault(),i._isContextLost=!0},this.handleContextRestored=function(){i._isContextLost=!1,i.setupGlResources(),i.refreshAllWebGlBuffers(),i.start()},this.renderLoop=function(){i.draw(),i._animationFrameRequestId=i._window.requestAnimationFrame(i.renderLoop)},this.defaultCalcWidth=function(e){return e},this.defaultCalcHeight=function(e){return e},this.resizeCanvas=function(e,t,r){var n=i._calcWidth(t.innerWidth),o=i._calcHeight(t.innerHeight);r.setViewPortDimensions(n,o),e.width=n,e.height=o,i._postResizeCallback(e,t,r)},this._canvas=e,this._postResizeCallback=r,this.setCanvasEventHandlers(),this._browserHelper=t.browserHelper||new f.BrowserHelper,this.setupGlResources(),this.initializeRenderingOptions(t),this.initializaBuffers(),this.setupWindowCallbacks()}return Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFullscreen",{get:function(){return this._isFullscreen},set:function(e){this._isFullscreen=e,this.setupWindowCallbacks()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"calcWidth",{get:function(){return this._calcWidth},set:function(e){this._calcWidth=e,this.setupWindowCallbacks()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"calcHeight",{get:function(){return this._calcHeight},set:function(e){this._calcHeight=e,this.setupWindowCallbacks()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"postResizeCallback",{set:function(e){this._postResizeCallback=e,this.setupWindowCallbacks()},enumerable:!1,configurable:!0}),e.prototype.setViewPortDimensions=function(e,t){this.gl.viewport(0,0,e,t)},e.prototype.addHeterogenoeusShapesArrayToScene=function(e){for(var t=new Array,r=0,i=e;r<i.length;r++){var n=i[r];t.push(this.addShapeToScene(n))}return t},e.prototype.removeAllShapes=function(){this.initializaShapeBuffers()},e.prototype.removeAllVerticies=function(){this.initializeVertexBuffers()},e.prototype.updatePointSize=function(e,t){return this._pointsShapeBuffer.updatePointSize(e,t)},e.prototype.start=function(){this.renderLoop()},e.prototype.stop=function(){this._window.cancelAnimationFrame(this._animationFrameRequestId)},e.prototype.draw=function(){this.gl.clearColor(this._backgroundColor.red,this._backgroundColor.green,this._backgroundColor.blue,h.Settings.defaultBackgroundAlpha),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(this._pointShaderProgram),this.getPointShaderVariables(),this._pointsShapeBuffer.count>0&&this.drawPointShapeBuffer(this._pointsShapeBuffer);for(var e in this._lineBuffer)if(this._lineBuffer[e]){var t=this._lineBuffer[e];this.drawLine(t)}this.gl.useProgram(this._dynamicShapeShaderProgram),this.getDynamicShapeShaderVariables();for(var r=0,i=this._dynamicShapeBuffers;r<i.length;r++){var n=i[r];n.count>0&&this.drawDynamicShapeBuffer(n)}this.gl.useProgram(this._positionColorShaderProgram),this.getShaderVariables(this._positionColorShaderProgram);for(var o=0,s=this._vertexBuffers;o<s.length;o++)for(var a=s[o],u=0,f=a.verticiesStack;u<f.length;u++){var c=f[u];c.size>0&&this.drawVertexBuffer(a)}},e.prototype.addVertexToSceneBase=function(e,t,r){switch(void 0===r&&(r=h.Settings.defaultColor),o.RenderModeMapper.renderModeToWebGlConstant(t,this.gl)){case this.gl.POINTS:this._pointsVertexBuffer.addVertex(new Float32Array([e.x,e.y,e.z,r.red,r.green,r.blue]));break;case this.gl.LINES:this._linesVertexBuffer.addVertex(new Float32Array([e.x,e.y,e.z,r.red,r.green,r.blue]));break;case this.gl.LINE_STRIP:this._lineStripVertexBuffer.addVertex(new Float32Array([e.x,e.y,e.z,r.red,r.green,r.blue]));break;case this.gl.LINE_LOOP:this._lineLoopVertexBuffer.addVertex(new Float32Array([e.x,e.y,e.z,r.red,r.green,r.blue]));break;case this.gl.TRIANGLES:this._trianglesVertexBuffer.addVertex(new Float32Array([e.x,e.y,e.z,r.red,r.green,r.blue]));break;case this.gl.TRIANGLE_STRIP:this._triangleStripVertexBuffer.addVertex(new Float32Array([e.x,e.y,e.z,r.red,r.green,r.blue]));break;case this.gl.TRIANGLE_FAN:this._triangleFanVertexBuffer.addVertex(new Float32Array([e.x,e.y,e.z,r.red,r.green,r.blue]))}},e.prototype.addLine=function(e){var t=n();return this._lineBuffer[t]=e,t},e.prototype.addLines=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var n=i[r];t.push(this.addLine(n))}return t},e.prototype.removeLine=function(e){return!!this._lineBuffer[e]&&(delete this._lineBuffer[e],!0)},e.prototype.updateLineColor=function(e,t){return!!this._lineBuffer[e]&&(this._lineBuffer[e].rgbColor=t,!0)},e.prototype.addPointToLineBase=function(e,t){return!!this._lineBuffer[e]&&(this._lineBuffer[e].addVertex(t),!0)},e.prototype.removeShapeFromUnspecifiedBuffer=function(e){if(this._pointsShapeBuffer.removeShape(e))return!0;for(var t=0,r=this._dynamicShapeBuffers;t<r.length;t++){if(r[t].removeShape(e))return!0}return!1},e.prototype.updateShapeColorFromUnspecifiedBuffer=function(e,t){if(this._pointsShapeBuffer.updateColor(e,t))return!0;for(var r=0,i=this._dynamicShapeBuffers;r<i.length;r++){if(i[r].updateColor(e,t))return!0}return!1},e.prototype.createUniforNotFoundErrorMessage=function(e){var t="cannot find uniform in shader program\n";t+="potential culprits:\n";for(var r in e)e.hasOwnProperty(r)&&(t+="\t"+r+": "+e[r]+"\n");return t},e.prototype.drawPointShapeBufferBase=function(e,t){void 0===t&&(t=(new i.Mat4).setIdentity()),this.checkForUniforms();var r=e.verticies,n=e.first;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.glBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this._a_position,s.Constants.floatsPerPosition,this.gl.FLOAT,!1,s.Constants.bytesPerPointVertex,0),this.gl.enableVertexAttribArray(this._a_position),this.gl.vertexAttribPointer(this._a_color,s.Constants.floatsPerColor,this.gl.FLOAT,!1,s.Constants.bytesPerPointVertex,s.Constants.bytesPerPosition),this.gl.enableVertexAttribArray(this._a_color),this.gl.vertexAttribPointer(this._a_pointSize,s.Constants.floatsPerPointSize,this.gl.FLOAT,!1,s.Constants.bytesPerPointVertex,s.Constants.bytesPerPositionColor),this.gl.enableVertexAttribArray(this._a_pointSize),this.gl.uniformMatrix4fv(this._u_vpMatrix,!1,t.elements),this.gl.drawArrays(n.glRenderMode,0,r.length/s.Constants.floatsPerPointVertex)},e.prototype.drawDynamicShapeBufferBase=function(e,t){void 0===t&&(t=(new i.Mat4).setIdentity()),this.checkForUniforms();var r=e.verticies,n=e.first;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.glBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this._a_position,s.Constants.floatsPerPosition,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,0),this.gl.enableVertexAttribArray(this._a_position),this.gl.vertexAttribPointer(this._a_color,s.Constants.floatsPerColor,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,s.Constants.bytesPerPosition),this.gl.enableVertexAttribArray(this._a_color),this.gl.vertexAttribPointer(this._a_modelMatrixRow0,s.Constants.floatsPerMat4Row,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,s.Constants.modelMatrixRow0Offset),this.gl.enableVertexAttribArray(this._a_modelMatrixRow0),this.gl.vertexAttribPointer(this._a_modelMatrixRow1,s.Constants.floatsPerMat4Row,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,s.Constants.modelMatrixRow1Offset),this.gl.enableVertexAttribArray(this._a_modelMatrixRow1),this.gl.vertexAttribPointer(this._a_modelMatrixRow2,s.Constants.floatsPerMat4Row,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,s.Constants.modelMatrixRow2Offset),this.gl.enableVertexAttribArray(this._a_modelMatrixRow2),this.gl.vertexAttribPointer(this._a_modelMatrixRow3,s.Constants.floatsPerMat4Row,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,s.Constants.modelMatrixRow3Offset),this.gl.enableVertexAttribArray(this._a_modelMatrixRow3),this.gl.uniformMatrix4fv(this._u_vpMatrix,!1,t.elements),this.gl.drawArrays(n.glRenderMode,0,r.length/s.Constants.floatsPerDynamicVertex)},e.prototype.drawLineBase=function(e,t){void 0===t&&(t=(new i.Mat4).setIdentity()),this.checkForUniforms();var r=e.verticies;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.glBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this._a_position,s.Constants.floatsPerPosition,this.gl.FLOAT,!1,s.Constants.bytesPerPointVertex,0),this.gl.enableVertexAttribArray(this._a_position),this.gl.vertexAttribPointer(this._a_color,s.Constants.floatsPerColor,this.gl.FLOAT,!1,s.Constants.bytesPerPointVertex,s.Constants.bytesPerPosition),this.gl.enableVertexAttribArray(this._a_color),this.gl.uniformMatrix4fv(this._u_vpMatrix,!1,t.elements),this.gl.drawArrays(e.glRenderMode,0,r.length/s.Constants.floatsPerPointVertex)},e.prototype.drawVertexBufferBase=function(e,t){void 0===t&&(t=(new i.Mat4).setIdentity()),this.checkForUniforms();for(var r=0,n=e.verticiesStack;r<n.length;r++){var o=n[r],a=o.arr;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.glBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this._a_position,s.Constants.floatsPerPosition,this.gl.FLOAT,!1,s.Constants.bytesPerPositionColor,0),this.gl.enableVertexAttribArray(this._a_position),this.gl.vertexAttribPointer(this._a_color,s.Constants.floatsPerColor,this.gl.FLOAT,!1,s.Constants.bytesPerPositionColor,s.Constants.bytesPerPosition),this.gl.enableVertexAttribArray(this._a_color),this.gl.uniformMatrix4fv(this._u_vpMatrix,!1,t.elements),this.gl.drawArrays(e.glRenderMode,0,a.length/s.Constants.floatsPerPositionColor)}},e.prototype.setCanvasEventHandlers=function(){this._canvas.addEventListener("webglcontextlost",this.handleContextLost,!1),this._canvas.addEventListener("webglcontextrestored",this.handleContextRestored,!1)},e.prototype.setupGlResources=function(){this.getContext(),this.setViewPortDimensions(this._canvas.width,this._canvas.height),this._pointShaderProgram=this.initShaders(this._pointVertexShaderSource,this._fragmentShaderSource),this._dynamicShapeShaderProgram=this.initShaders(this._dynamicVertexShaderSource,this._fragmentShaderSource),this._positionColorShaderProgram=this.initShaders(this._positionColorVertexShaderSource,this._fragmentShaderSource)},e.prototype.getContext=function(){var e,t=this._browserHelper.isIE(),r=this._browserHelper.isEdge(),i=t||r?"experimental-webgl":"webgl";try{e=this._canvas.getContext(i,{alpha:!1,antialias:!1,depth:!0})}catch(e){throw"error creating webgl context!: "+e.toString()}if(null===e)throw"error creating webgl context!, gl === null";this._isContextLost=!1,this.gl=e},e.prototype.initializeRenderingOptions=function(e){this._backgroundColor=e&&e.backgroundColor||h.Settings.defaultBackgroundColor,this._window=e&&e.window||window,this._isFullscreen=e&&e.fullscreen||h.Settings.defaultIsFullScreen,this._calcWidth=e&&e.calcWidth||this.defaultCalcWidth,this._calcHeight=e&&e.calcHeight||this.defaultCalcHeight},e.prototype.initializaBuffers=function(){this.initializaShapeBuffers(),this.initializeVertexBuffers()},e.prototype.initializaShapeBuffers=function(){this.initializaDynamicShapeBuffers(),this.initializeVertexBuffers(),this._pointsShapeBuffer=new c.PointBuffer(this.gl),this._lineBuffer={}},e.prototype.initializeVertexBuffers=function(){this._pointsVertexBuffer=new l.VertexBuffer(this.gl.POINTS,this.gl),this._linesVertexBuffer=new l.VertexBuffer(this.gl.LINES,this.gl),this._lineStripVertexBuffer=new l.VertexBuffer(this.gl.LINE_STRIP,this.gl),this._lineLoopVertexBuffer=new l.VertexBuffer(this.gl.LINE_LOOP,this.gl),this._trianglesVertexBuffer=new l.VertexBuffer(this.gl.TRIANGLES,this.gl),this._triangleStripVertexBuffer=new l.VertexBuffer(this.gl.TRIANGLE_STRIP,this.gl),this._triangleFanVertexBuffer=new l.VertexBuffer(this.gl.TRIANGLE_FAN,this.gl),this._vertexBuffers=[this._pointsVertexBuffer,this._linesVertexBuffer,this._lineStripVertexBuffer,this._lineLoopVertexBuffer,this._trianglesVertexBuffer,this._triangleStripVertexBuffer,this._triangleFanVertexBuffer]},e.prototype.refreshAllWebGlBuffers=function(){this._pointsShapeBuffer.refreshWebglBuffer();for(var e in this._lineBuffer)if(this._lineBuffer[e]){var t=this._lineBuffer[e];t.refreshWebglBuffer()}for(var r=0,i=this._dynamicShapeBuffers;r<i.length;r++){i[r].refreshWebglBuffer()}for(var n=0,o=this._vertexBuffers;n<o.length;n++){o[n].refreshWebglBuffer()}},e.prototype.getDynamicShapeShaderVariables=function(){this.getShaderVariables(this._dynamicShapeShaderProgram),this._a_modelMatrixRow0=this.gl.getAttribLocation(this._dynamicShapeShaderProgram,a.ShaderSettings.modelMatrixAttributeName),this._a_modelMatrixRow1=this._a_modelMatrixRow0+1,this._a_modelMatrixRow2=this._a_modelMatrixRow0+2,this._a_modelMatrixRow3=this._a_modelMatrixRow0+3},e.prototype.getPointShaderVariables=function(){this.getShaderVariables(this._pointShaderProgram),this._a_pointSize=this.gl.getAttribLocation(this._pointShaderProgram,a.ShaderSettings.pointSizeAttributeName)},e.prototype.getShaderVariables=function(e){this._a_position=this.gl.getAttribLocation(e,a.ShaderSettings.positionAttributeName),this._a_color=this.gl.getAttribLocation(e,a.ShaderSettings.colorAttributeName),this._u_vpMatrix=this.gl.getUniformLocation(e,a.ShaderSettings.vpMatrixUniformName)},e.prototype.initShaders=function(e,t){var r=this.createShader(e,u.ShaderType.vertex),i=this.createShader(t,u.ShaderType.fragment);if(null===r||null===i)throw"could not create shaders";var n=this.gl.createProgram();if(null===n)throw"could not create shader program";var o=n;if(this.gl.attachShader(o,r),this.gl.attachShader(o,i),this.gl.linkProgram(o),!this.gl.getProgramParameter(o,this.gl.LINK_STATUS))throw"could not link shader program";return o},e.prototype.createShader=function(e,t){var r=null;if("fragment"===t?r=this.gl.createShader(this.gl.FRAGMENT_SHADER):"vertex"===t&&(r=this.gl.createShader(this.gl.VERTEX_SHADER)),null===r)throw"could not create "+t+" shader";if(this.gl.shaderSource(r,e),this.gl.compileShader(r),!this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS))throw"could not compile shader, shader info log: "+this.gl.getShaderInfoLog(r);return r},e.prototype.checkForUniforms=function(){if(!this._u_vpMatrix){var e={};e[a.ShaderSettings.vpMatrixUniformName]=this._u_vpMatrix;throw this.createUniforNotFoundErrorMessage(e)}},e.prototype.setupWindowCallbacks=function(){var e=this;this._isFullscreen&&(this._window.addEventListener("resize",function(){e._isContextLost||e.resizeCanvas(e._canvas,e._window,e)},!1),this.resizeCanvas(this._canvas,this._window,this))},e}();t.WebGLRenderer=p},function(e,t,r){!function(t){"use strict";var r=0,i=Math.pow(36,4),n=function(e,t){var r="000000000"+e;return r.substr(r.length-t)},o=function(){return n((Math.random()*i<<0).toString(36),4)},s=function(){return r=r<i?r:0,++r-1},a=function(){var e,t=(new Date).getTime().toString(36),r=a.fingerprint(),i=o()+o();return e=n(s().toString(36),4),"c"+t+e+r+i};a.slug=function(){var e,t=(new Date).getTime().toString(36),r=a.fingerprint().slice(0,1)+a.fingerprint().slice(-1),i=o().slice(-2);return e=s().toString(36).slice(-4),t.slice(-2)+e+r+i},a.globalCount=function(){var e=function(){var e,t=0;for(e in window)t++;return t}();return a.globalCount=function(){return e},e},a.fingerprint=function(){return n((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+a.globalCount().toString(36),4)},t.register?t.register("cuid",a):e.exports=a}(this.applitude||this)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserHelper=void 0;var i=function(){function e(){}return e.prototype.isIE=function(){return!!document.documentMode},e.prototype.isEdge=function(){return!this.isIE()&&!!window.StyleMedia},e}();t.BrowserHelper=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlBufferWrapper=void 0;var i=function(){function e(e){this._gl=e,this._glBuffer=this._gl.createBuffer()}return Object.defineProperty(e.prototype,"glBuffer",{get:function(){return this._glBuffer},enumerable:!1,configurable:!0}),e.prototype.refreshWebglBuffer=function(){this._gl.deleteBuffer(this._glBuffer),this._glBuffer=this._gl.createBuffer()},e}();t.GlBufferWrapper=i},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeFactory2d=void 0;var n=r(0),o=r(10),s=r(11),a=r(12),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.createPoint=function(e,t,r,i){var o=new n.Vec3(e.x,e.y,0);return new s.Point(o,t,r,i)},t.prototype.createLine=function(e,t,r){var i=new n.Vec3(e.x,e.y,0);return new a.Line(i,t,r)},t.prototype.createShape=function(e,t,r,i,o,s){var a=new n.Vec3(e.x,e.y,0),u=new n.Vec3(t.x,t.y,0);switch(r){case"points":throw Error("cannot create a point with this method, please use createPoint");case"lines":throw Error("cannot create a line with this method, please use createLine");case"triangles":return this.createTriangle(a,u,i,o);case"rectangles":return this.createRectangle(a,u,i,o);case"hexagons":return this.createHexagon(a,u,i,o);case"octogons":return this.createOctogon(a,u,i,o);case"ellipses":return this.createEllipse(a,u,i,o);case"box":throw Error("cannot create 3d shape("+r+"), use WebGLRenderer3d instead");default:throw Error("cannot recognize shape type "+r)}},t}(o.ShapeFactory);t.ShapeFactory2d=u},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Ellipse=void 0;var n=r(0),o=r(3),s=r(6),a=r(20),u=r(1),h=r(2),f=function(e){function t(r,i,n,o,u){void 0===o&&(o=a.Precision.High);var f=e.call(this,o===a.Precision.High?t.highPrecisionNumberOfVerticies:t.lowPrecisionNumberOfVerticies,r,i,u)||this;return f.shapeMode=h.ShapeMode.ellipses,f.horizontalRadius=(f._boundingRect.topRight.x-f._boundingRect.topLeft.x)/2,f.verticalRadius=(f._boundingRect.topLeft.y-f._boundingRect.bottomLeft.y)/2,f.center=s.Midpoint.between(f._boundingRect.topLeft,f._boundingRect.bottomRight),f.leftEndPoint=s.Midpoint.between(f._boundingRect.topLeft,f._boundingRect.bottomLeft),f.rightEndPoint=s.Midpoint.between(f._boundingRect.topRight,f._boundingRect.bottomRight),f.precision=o,f.computeVerticies(),f.glRenderMode=n.TRIANGLES,f.numberOfVerticies=f.precision===a.Precision.High?t.highPrecisionNumberOfVerticies:t.lowPrecisionNumberOfVerticies,f}return i(t,e),t.prototype.computeVerticies=function(){var e;this.precision===a.Precision.High?(e=t.highPrecisionNumberOfPointsAlongCurve,t.highPrecisionNumberOfVerticies):this.precision===a.Precision.Low&&(e=t.lowPrecisionNumberOfPointsAlongCurve,t.lowPrecisionNumberOfVerticies);for(var r=this.leftEndPoint.x,i=2*this.horizontalRadius/(e/2),o=this.leftEndPoint,s=this.leftEndPoint,h=0,f=0;f<e/2-1;f++){r+=i;var c=this.getYDistanceFromCenterForX(r),l=new n.Vec3(r,c+this.center.y),p=new n.Vec3(r,this.center.y-c);this.addTriangleToVerticies(h,o,this.center,l),h+=u.Constants.floatsPerTriangle,this.addTriangleToVerticies(h,s,this.center,p),h+=u.Constants.floatsPerTriangle,o=l,s=p}this.addTriangleToVerticies(h,o,this.center,this.rightEndPoint),h+=u.Constants.floatsPerTriangle,this.addTriangleToVerticies(h,s,this.center,this.rightEndPoint)},t.prototype.getYDistanceFromCenterForX=function(e){var t=Math.pow(this.verticalRadius,2);return Math.sqrt(t-t*Math.pow(e-this.center.x,2)/Math.pow(this.horizontalRadius,2))},t.numberOfEndPoints=2,t.highPrecisionNumberOfPointsAlongCurve=400+t.numberOfEndPoints,t.highPrecisionNumberOfVerticies=t.highPrecisionNumberOfPointsAlongCurve*u.Constants.verticiesPerTriangle,t.lowPrecisionNumberOfPointsAlongCurve=8+t.numberOfEndPoints,t.lowPrecisionNumberOfVerticies=t.lowPrecisionNumberOfPointsAlongCurve*u.Constants.verticiesPerTriangle,t}(o.DynamicShape);t.Ellipse=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoundingRectangle=void 0;var i=r(0),n=function(){function e(e,t){this.isTopLeftBottomRight(e,t)?(this.topLeft=e,this.topRight=new i.Vec3(t.x,e.y,t.z),this.bottomRight=t,this.bottomLeft=new i.Vec3(e.x,t.y,e.z)):this.isBottomRightTopLeft(e,t)?(this.topLeft=t,this.topRight=new i.Vec3(e.x,t.y,e.z),this.bottomRight=e,this.bottomLeft=new i.Vec3(t.x,e.y,t.z)):this.isBottomLeftTopRight(e,t)?(this.topLeft=new i.Vec3(e.x,t.y,e.z),this.topRight=t,this.bottomRight=new i.Vec3(t.x,e.y,t.z),this.bottomLeft=e):(this.topLeft=new i.Vec3(t.x,e.y,t.z),this.topRight=e,this.bottomRight=new i.Vec3(e.x,t.y,e.z),this.bottomLeft=t)}return e.prototype.isTopLeftBottomRight=function(e,t){return e.x<=t.x&&e.y>=t.y},e.prototype.isBottomRightTopLeft=function(e,t){return e.x>=t.x&&e.y<=t.y},e.prototype.isBottomLeftTopRight=function(e,t){return e.x<=t.x&&e.y<=t.y},e}();t.BoundingRectangle=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Precision=void 0;!function(e){e[e.Low=0]="Low",e[e.High=1]="High"}(t.Precision||(t.Precision={}))},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Triangle=void 0;var n=r(3),o=r(6),s=r(2),a=function(e){function t(r,i,n,o){var a=e.call(this,t.numberOfVerticies,r,i,o)||this;return a.shapeMode=s.ShapeMode.triangles,a.computeVerticies(),a.glRenderMode=n.TRIANGLES,a}return i(t,e),t.prototype.computeVerticies=function(){var e=o.Midpoint.between(this._boundingRect.topLeft,this._boundingRect.topRight);this.addTriangleToVerticies(0,this._boundingRect.bottomLeft,e,this._boundingRect.bottomRight)},t.numberOfVerticies=3,t}(n.DynamicShape);t.Triangle=a},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Rectangle=void 0;var n=r(3),o=r(1),s=r(2),a=function(e){function t(r,i,n,o){var a=e.call(this,t.numberOfVerticies,r,i,o)||this;return a.shapeMode=s.ShapeMode.rectangles,a.computeVerticies(),a.glRenderMode=n.TRIANGLES,a}return i(t,e),t.prototype.computeVerticies=function(){var e=0;this.addTriangleToVerticies(e,this._boundingRect.topLeft,this._boundingRect.topRight,this._boundingRect.bottomLeft),e+=o.Constants.floatsPerTriangle,this.addTriangleToVerticies(e,this._boundingRect.bottomLeft,this._boundingRect.topRight,this._boundingRect.bottomRight)},t.numberOfVerticies=6,t}(n.DynamicShape);t.Rectangle=a},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Hexagon=void 0;var n=r(3),o=r(6),s=r(1),a=r(2),u=function(e){function t(r,i,n,o){var s=e.call(this,t.numberOfVerticies,r,i,o)||this;return s.shapeMode=a.ShapeMode.hexagons,s.computeVerticies(),s.glRenderMode=n.TRIANGLES,s}return i(t,e),t.prototype.computeVerticies=function(){var e=o.ThirdPoints.between(this._boundingRect.topLeft,this._boundingRect.topRight),t=e.first,r=e.second,i=o.ThirdPoints.between(this._boundingRect.bottomRight,this._boundingRect.bottomLeft),n=i.first,a=i.second,u=o.Midpoint.between(this._boundingRect.bottomLeft,this._boundingRect.topLeft),h=o.Midpoint.between(this._boundingRect.topRight,this._boundingRect.bottomRight),f=0;this.addTriangleToVerticies(f,t,n,u),f+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(f,t,n,a),f+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(f,t,r,a),f+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(f,r,a,h)},t.numberOfVerticies=12,t}(n.DynamicShape);t.Hexagon=u},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Octogon=void 0;var n=r(3),o=r(6),s=r(1),a=r(2),u=function(e){function t(r,i,n,o){var s=e.call(this,t.numberOfVerticies,r,i,o)||this;return s.shapeMode=a.ShapeMode.octogons,s.computeVerticies(),s.glRenderMode=n.TRIANGLES,s}return i(t,e),t.prototype.computeVerticies=function(){var e=o.ThirdPoints.between(this._boundingRect.topLeft,this._boundingRect.topRight),t=o.ThirdPoints.between(this._boundingRect.topRight,this._boundingRect.bottomRight),r=o.ThirdPoints.between(this._boundingRect.bottomLeft,this._boundingRect.bottomRight),i=o.ThirdPoints.between(this._boundingRect.topLeft,this._boundingRect.bottomLeft),n=e.first,a=e.second,u=t.second,h=t.first,f=r.first,c=r.second,l=i.second,p=i.first,d=0;this.addTriangleToVerticies(d,l,n,p),d+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(d,p,n,f),d+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(d,f,n,c),d+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(d,n,c,a),d+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(d,a,c,h),d+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(d,a,h,u)},t.numberOfVerticies=18,t}(n.DynamicShape);t.Octogon=u},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Box=void 0;var n=r(0),o=r(3),s=r(19),a=r(1),u=r(2),h=function(e){function t(r,i,n,o){var s=e.call(this,t.numberOfVerticies,r,i,o)||this;s.shapeMode=u.ShapeMode.box;var a=s._boundingRect.topRight.x-s._boundingRect.topLeft.x,h=s._boundingRect.topRight.y-s._boundingRect.bottomRight.y,f=Math.min(a,h);return s._backFaceZ=s._boundingRect.bottomLeft.z+f,s.computeVerticies(),s.glRenderMode=n.TRIANGLES,s}return i(t,e),t.prototype.computeVerticies=function(){var e=0;this.addTriangleToVerticies(e,this._boundingRect.topLeft,this._boundingRect.topRight,this._boundingRect.bottomLeft),e+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(e,this._boundingRect.bottomLeft,this._boundingRect.topRight,this._boundingRect.bottomRight),e+=a.Constants.floatsPerTriangle;var t=new s.BoundingRectangle(this._boundingRect.topRight,new n.Vec3(this._boundingRect.bottomRight.x,this._boundingRect.bottomRight.y,this._backFaceZ));this.addTriangleToVerticies(e,t.topLeft,t.topRight,t.bottomLeft),e+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(e,t.bottomLeft,t.topRight,t.bottomRight),e+=a.Constants.floatsPerTriangle;var r=new s.BoundingRectangle(this._boundingRect.topLeft,new n.Vec3(this._boundingRect.bottomLeft.x,this._boundingRect.bottomLeft.y,this._backFaceZ));this.addTriangleToVerticies(e,r.topLeft,r.topRight,r.bottomLeft),e+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(e,r.bottomLeft,r.topRight,r.bottomRight),e+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(e,r.topRight,t.topRight,r.bottomRight),e+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(e,r.bottomRight,t.topRight,t.bottomRight),e+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(e,r.topRight,t.topRight,r.topLeft),e+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(e,r.topLeft,t.topRight,t.topLeft),e+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(e,r.bottomRight,t.bottomRight,r.bottomLeft),e+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(e,r.bottomLeft,t.bottomRight,t.bottomLeft)},t.numberOfVerticies=36,t}(o.DynamicShape);t.Box=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=void 0;var i=r(0),n=r(4),o=function(){function e(e,t,r,o,s,a,u){void 0===t&&(t=n.Settings.defaultFieldOfView),void 0===r&&(r=n.Settings.defaultNear),void 0===o&&(o=n.Settings.defaultFar),void 0===s&&(s=n.Settings.defaultEyePosition),void 0===a&&(a=n.Settings.defaultLookAtPoint),void 0===u&&(u=n.Settings.defaultUpPosition),this._viewMatrix=new i.Mat4,this._projectionMatrix=new i.Mat4,this._vpMatrix=new i.Mat4,console.log("jorgen patch 1"),this._eyePosition=this._initialEyePosition=s,this._lookAtPoint=this._initialLookAtPoint=a,this._upPosition=this._initialUpPosition=u,this.updateView(),this._aspectRatio=e,this._fieldOfView=t,this._near=r,this._far=o,this.updatePerspective()}return Object.defineProperty(e.prototype,"vpMatrix",{get:function(){return this._vpMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewMatrix",{get:function(){return this._viewMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"projectionMatrix",{get:function(){return this._projectionMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"aspectRatio",{get:function(){return this._aspectRatio},set:function(e){this._aspectRatio=e,this.updatePerspective()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fieldOfView",{get:function(){return this._fieldOfView},set:function(e){this._fieldOfView=e,this.updatePerspective()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"near",{get:function(){return this._near},set:function(e){this._near=e,this.updatePerspective()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"far",{get:function(){return this._far},set:function(e){this._far=e,this.updatePerspective()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eyePosition",{get:function(){return this._eyePosition},set:function(e){this._eyePosition=e,this.updateView()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lookAtPoint",{get:function(){return this._lookAtPoint},set:function(e){this._lookAtPoint=e,this.updateView()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"upPosition",{get:function(){return this._upPosition},set:function(e){this._upPosition=e,this.updateView()},enumerable:!1,configurable:!0}),e.prototype.panX=function(e){this._eyePosition=new i.Vec3(this._eyePosition.x+e,this._eyePosition.y,this._eyePosition.z),this._lookAtPoint=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this.updateView()},e.prototype.panY=function(e){this._eyePosition=new i.Vec3(this._eyePosition.x,this._eyePosition.y+e,this._eyePosition.z),this._lookAtPoint=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this.updateView()},e.prototype.zoomIn=function(e){void 0===e&&(e=.01),this._eyePosition=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-e),this._lookAtPoint=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this.updateView()},e.prototype.zoomOut=function(e){void 0===e&&(e=.01),this._eyePosition=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z+e),this._lookAtPoint=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this.updateView()},e.prototype.reset=function(){this._eyePosition=this._initialEyePosition,this._lookAtPoint=this._initialLookAtPoint,this._upPosition=this._initialUpPosition,this.updateView(),this.updatePerspective()},e.prototype.updateView=function(){this._viewMatrix.setLookAt(this.eyePosition.x,this.eyePosition.y,this.eyePosition.z,this.lookAtPoint.x,this.lookAtPoint.y,this.lookAtPoint.z,this.upPosition.x,this.upPosition.y,this.upPosition.z),this.updateViewProjectionMatrix()},e.prototype.updatePerspective=function(){this._projectionMatrix.setPerspective(this._fieldOfView,this._aspectRatio,this._near,this._far),this.updateViewProjectionMatrix()},e.prototype.updateViewProjectionMatrix=function(){this._vpMatrix=(new i.Mat4).setIdentity(),this._vpMatrix.multiply(this._projectionMatrix),this._vpMatrix.multiply(this._viewMatrix)},e}();t.Camera=o},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeFactory3d=void 0;var n=r(0),o=r(10),s=r(11),a=r(12),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.createPoint=function(e,t,r,i){return new s.Point(e,t,r,i)},t.prototype.createLine=function(e,t,r){var i=new n.Vec3(e.x,e.y,0);return new a.Line(i,t,r)},t.prototype.createShape=function(e,t,r,i,n){switch(r){case"points":throw Error("cannot create a point with this method, please use createPoint");case"lines":throw Error("cannot create a line with this method, please use createLine");case"triangles":return this.createTriangle(e,t,i,n);case"rectangles":return this.createRectangle(e,t,i,n);case"hexagons":return this.createHexagon(e,t,i,n);case"octogons":return this.createOctogon(e,t,i,n);case"ellipses":return this.createEllipse(e,t,i,n);case"box":return this.createBox(e,t,i,n);default:throw Error("cannot recognize shape type "+r)}},t}(o.ShapeFactory);t.ShapeFactory3d=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RGBColor=void 0;var i=function(){function e(e,t,r){this.red=e,this.green=t,this.blue=r}return e}();t.RGBColor=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseHelper=t.BrowserHelper=t.Camera=t.Box=t.Point=t.Octogon=t.Hexagon=t.Line=t.Rectangle=t.Triangle=t.Ellipse=t.ShapeMode=t.ShapeFactory3d=t.ShapeFactory2d=t.ShapeFactory=t.DynamicShape=t.Shape=t.RenderModeMapper=t.RenderMode=t.ColorMapper=t.Color=t.RGBColor=t.Mat4=t.Vec3=t.Vec2=t.WebGLRenderer3d=t.WebGLRenderer2d=void 0;var i=r(30);Object.defineProperty(t,"WebGLRenderer2d",{enumerable:!0,get:function(){return i.WebGLRenderer2d}});var n=r(44);Object.defineProperty(t,"WebGLRenderer3d",{enumerable:!0,get:function(){return n.WebGLRenderer3d}});var o=r(0);Object.defineProperty(t,"Vec2",{enumerable:!0,get:function(){return o.Vec2}}),Object.defineProperty(t,"Vec3",{enumerable:!0,get:function(){return o.Vec3}}),Object.defineProperty(t,"Mat4",{enumerable:!0,get:function(){return o.Mat4}});var s=r(28);Object.defineProperty(t,"RGBColor",{enumerable:!0,get:function(){return s.RGBColor}});var a=r(45);Object.defineProperty(t,"Color",{enumerable:!0,get:function(){return a.Color}}),Object.defineProperty(t,"ColorMapper",{enumerable:!0,get:function(){return a.ColorMapper}});var u=r(7);Object.defineProperty(t,"RenderMode",{enumerable:!0,get:function(){return u.RenderMode}}),Object.defineProperty(t,"RenderModeMapper",{enumerable:!0,get:function(){return u.RenderModeMapper}});var h=r(5);Object.defineProperty(t,"Shape",{enumerable:!0,get:function(){return h.Shape}});var f=r(3);Object.defineProperty(t,"DynamicShape",{enumerable:!0,get:function(){return f.DynamicShape}});var c=r(10);Object.defineProperty(t,"ShapeFactory",{enumerable:!0,get:function(){return c.ShapeFactory}});var l=r(17);Object.defineProperty(t,"ShapeFactory2d",{enumerable:!0,get:function(){return l.ShapeFactory2d}});var p=r(27);Object.defineProperty(t,"ShapeFactory3d",{enumerable:!0,get:function(){return p.ShapeFactory3d}});var d=r(2);Object.defineProperty(t,"ShapeMode",{enumerable:!0,get:function(){return d.ShapeMode}});var g=r(12);Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return g.Line}});var _=r(18);Object.defineProperty(t,"Ellipse",{enumerable:!0,get:function(){return _.Ellipse}});var y=r(22);Object.defineProperty(t,"Rectangle",{enumerable:!0,get:function(){return y.Rectangle}});var b=r(23);Object.defineProperty(t,"Hexagon",{enumerable:!0,get:function(){return b.Hexagon}});var v=r(24);Object.defineProperty(t,"Octogon",{enumerable:!0,get:function(){return v.Octogon}});var m=r(21);Object.defineProperty(t,"Triangle",{enumerable:!0,get:function(){return m.Triangle}});var P=r(11);Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return P.Point}});var w=r(25);Object.defineProperty(t,"Box",{enumerable:!0,get:function(){return w.Box}});var S=r(26);Object.defineProperty(t,"Camera",{enumerable:!0,get:function(){return S.Camera}});var x=r(15);Object.defineProperty(t,"BrowserHelper",{enumerable:!0,get:function(){return x.BrowserHelper}});var R=r(46);Object.defineProperty(t,"MouseHelper",{enumerable:!0,get:function(){return R.MouseHelper}})},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLRenderer2d=void 0;var n=r(13),o=r(8),s=r(17),a=r(0),u=function(e){function t(t,r){void 0===r&&(r={});var i=e.call(this,t,r)||this;return i._shapeFactory=new s.ShapeFactory2d,i}return i(t,e),Object.defineProperty(t.prototype,"shapeFactory",{get:function(){return this._shapeFactory},enumerable:!1,configurable:!0}),t.prototype.addShapeToScene=function(e){switch(e.shapeMode){case"points":return this._pointsShapeBuffer.addShape(e);case"lines":return this.addLine(e);case"triangles":return this._trianglesShapeBuffer.addShape(e);case"rectangles":return this._rectanglesShapeBuffer.addShape(e);case"hexagons":return this._hexagonsShapeBuffer.addShape(e);case"octogons":return this._octogonsShapeBuffer.addShape(e);case"ellipses":return this._ellipsesShapeBuffer.addShape(e);case"box":throw"adding 3d shape("+e.shapeMode+") to 2d scene is not supported"}return""},t.prototype.addHomogenoeusShapesArrayToScene=function(e){var t=e[0];if(!t)return new Array;switch(t.shapeMode){case"points":return this._pointsShapeBuffer.addShapes(e);case"lines":return this.addLines(e);case"triangles":return this._trianglesShapeBuffer.addShapes(e);case"rectangles":return this._rectanglesShapeBuffer.addShapes(e);case"hexagons":return this._hexagonsShapeBuffer.addShapes(e);case"octogons":return this._octogonsShapeBuffer.addShapes(e);case"ellipses":return this._ellipsesShapeBuffer.addShapes(e);case"box":throw"adding 3d shape("+t.shapeMode+") to 2d scene is not supported"}return new Array},t.prototype.addVertexToScene=function(e,t,r){var i=new a.Vec3(e.x,e.y,0);this.addVertexToSceneBase(i,t,r)},t.prototype.addPointToLine=function(e,t){var r=new a.Vec3(t.x,t.y,0);return this.addPointToLineBase(e,r)},t.prototype.removeShape=function(e,t){switch(t){case"points":return this._pointsShapeBuffer.removeShape(e);case"lines":return this.removeLine(e);case"triangles":return this._trianglesShapeBuffer.removeShape(e);case"rectangles":return this._rectanglesShapeBuffer.removeShape(e);case"hexagons":return this._hexagonsShapeBuffer.removeShape(e);case"octogons":return this._octogonsShapeBuffer.removeShape(e);case"ellipses":return this._ellipsesShapeBuffer.removeShape(e)}return this.removeShapeFromUnspecifiedBuffer(e)},t.prototype.updateShapeColor=function(e,t,r){switch(r){case"points":return this._pointsShapeBuffer.updateColor(e,t);case"lines":return this.updateLineColor(e,t);case"triangles":return this._trianglesShapeBuffer.updateColor(e,t);case"rectangles":return this._rectanglesShapeBuffer.updateColor(e,t);case"hexagons":return this._hexagonsShapeBuffer.updateColor(e,t);case"octogons":return this._octogonsShapeBuffer.updateColor(e,t);case"ellipses":return this._ellipsesShapeBuffer.updateColor(e,t)}return this.updateShapeColorFromUnspecifiedBuffer(e,t)},t.prototype.drawPointShapeBuffer=function(e){this.drawPointShapeBufferBase(e)},t.prototype.drawLine=function(e){this.drawLineBase(e)},t.prototype.drawDynamicShapeBuffer=function(e){this.drawDynamicShapeBufferBase(e)},t.prototype.drawVertexBuffer=function(e){this.drawVertexBufferBase(e)},t.prototype.initializaDynamicShapeBuffers=function(){this._trianglesShapeBuffer=new o.ShapeBuffer(this.gl),this._rectanglesShapeBuffer=new o.ShapeBuffer(this.gl),this._hexagonsShapeBuffer=new o.ShapeBuffer(this.gl),this._octogonsShapeBuffer=new o.ShapeBuffer(this.gl),this._ellipsesShapeBuffer=new o.ShapeBuffer(this.gl),this._dynamicShapeBuffers=[this._trianglesShapeBuffer,this._rectanglesShapeBuffer,this._hexagonsShapeBuffer,this._octogonsShapeBuffer,this._ellipsesShapeBuffer]},t}(n.WebGLRenderer);t.WebGLRenderer2d=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderSettings=void 0,t.ShaderSettings={positionAttributeName:"a_position",colorAttributeName:"a_color",modelMatrixAttributeName:"a_modelMatrix",pointSizeAttributeName:"a_pointSize",vpMatrixUniformName:"u_vpMatrix"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderType=void 0;!function(e){e.fragment="fragment",e.vertex="vertex"}(t.ShaderType||(t.ShaderType={}))},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.PointBuffer=void 0;var n=r(8),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.updatePointSize=function(e,t){if(this._shapes.hasOwnProperty(e)){var r=this._shapes[e].shape,i=this._shapes[e].index;r.pointSize=t;var n=r.numberOfVerticies*r.numberOfFloatsPerVertex,o=i*n;return this._verticies.overwrite(o,r.verticies),this._trimmedArray=this._verticies.getTrimmedArray(),this.refreshWebglBuffer(),!0}return!1},t}(n.ShapeBuffer);t.PointBuffer=o},function(e,t,r){"use strict";(function(t){function i(e,t,r){var i=e.BYTES_PER_ELEMENT,n=e.byteOffset,o=e.length;return t=0|t||0,r=void 0===r?o:0|r,t<0&&(t+=o),r<0&&(r+=o),new e.constructor(e.buffer.slice(n+i*t,n+i*r))}function n(e,r,i){var n=0|e.length,o=r||0,s=void 0===i?n:i;if(o<0&&(o+=n),s<0&&(s+=n),s-o<=0)return new t(0);var a=new t(s-o);return e.copy(a,0,o,s),a}function o(e,r,o){return e.buffer?i(e,r,o):e instanceof t?n(e,r,o):e.slice?e.slice(r,o):a(e,r,o)}function s(e,t,r){return e.buffer?i(e,t,r):e.slice?e.slice(t,r):a(e,t,r)}var a=r(40);e.exports=void 0===typeof t?s:o}).call(t,r(35).Buffer)},function(e,t,r){"use strict";(function(e){function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function n(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return s(this,e,t,r)}function s(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?l(e,t,r,i):"string"==typeof t?f(e,t,r):p(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,i){return a(t),t<=0?n(e,t):void 0!==r?"string"==typeof i?n(e,t).fill(r,i):n(e,t).fill(r):n(e,t)}function h(e,t){if(a(t),e=n(e,t<0?0:0|d(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|_(t,r);e=n(e,i);var s=e.write(t,r);return s!==i&&(e=e.slice(0,s)),e}function c(e,t){var r=t.length<0?0:0|d(t.length);e=n(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function l(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=c(e,t),e}function p(e,t){if(o.isBuffer(t)){var r=0|d(t.length);return e=n(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||q(t.length)?n(e,0):c(e,t);if("Buffer"===t.type&&Q(t.data))return c(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function _(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(i)return G(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return V(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function b(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function v(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=o.from(t,i)),o.isBuffer(t))return 0===t.length?-1:m(e,t,r,i,n);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,i,n){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}var h;if(n){var f=-1;for(h=r;h<a;h++)if(o(e,h)===o(t,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===u)return f*s}else-1!==f&&(h-=h-f),f=-1}else for(r+u>a&&(r=a-u),h=r;h>=0;h--){for(var c=!0,l=0;l<u;l++)if(o(e,h+l)!==o(t,l)){c=!1;break}if(c)return h}return-1}function P(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function w(e,t,r,i){return Z(G(t,e.length-r),e,r,i)}function S(e,t,r,i){return Z(W(t),e,r,i)}function x(e,t,r,i){return S(e,t,r,i)}function R(e,t,r,i){return Z(X(t),e,r,i)}function B(e,t,r,i){return Z(H(t,e.length-r),e,r,i)}function A(e,t,r){return 0===t&&r===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var o=e[n],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n+a<=r){var u,h,f,c;switch(a){case 1:o<128&&(s=o);break;case 2:u=e[n+1],128==(192&u)&&(c=(31&o)<<6|63&u)>127&&(s=c);break;case 3:u=e[n+1],h=e[n+2],128==(192&u)&&128==(192&h)&&(c=(15&o)<<12|(63&u)<<6|63&h)>2047&&(c<55296||c>57343)&&(s=c);break;case 4:u=e[n+1],h=e[n+2],f=e[n+3],128==(192&u)&&128==(192&h)&&128==(192&f)&&(c=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&f)>65535&&c<1114112&&(s=c)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),n+=a}return M(i)}function M(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=$));return r}function V(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function T(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function C(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=t;o<r;++o)n+=Y(e[o]);return n}function L(e,t,r){for(var i=e.slice(t,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function E(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,r,i,n,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function F(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-r,2);n<o;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function z(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,o=Math.min(e.length-r,4);n<o;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function I(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(e,t,r,i,n){return n||I(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,i,23,4),r+4}function U(e,t,r,i,n){return n||I(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,i,52,8),r+8}function k(e){if(e=D(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function D(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Y(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var r,i=e.length,n=null,o=[],s=0;s<i;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function H(e,t){for(var r,i,n,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),i=r>>8,n=r%256,o.push(n),o.push(i);return o}function X(e){return J.toByteArray(k(e))}function Z(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function q(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var J=r(37),K=r(38),Q=r(39);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return s(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return u(null,e,t,r)},o.allocUnsafe=function(e){return h(null,e)},o.allocUnsafeSlow=function(e){return h(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=o.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var s=e[r];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},o.byteLength=_,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,i,n){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;for(var s=n-i,a=r-t,u=Math.min(s,a),h=this.slice(i,n),f=e.slice(t,r),c=0;c<u;++c)if(h[c]!==f[c]){s=h[c],a=f[c];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},o.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return P(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return S(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i;if(o.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=o.prototype;else{var n=t-e;i=new o(n,void 0);for(var s=0;s<n;++s)i[s]=this[s+e]}return i},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},o.prototype.readUInt8=function(e,t){return t||E(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||E(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||E(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||E(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||E(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||E(e,4,this.length),K.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||E(e,4,this.length),K.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||E(e,8,this.length),K.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||E(e,8,this.length),K.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t|=0,r|=0,!i){j(this,e,t,r,Math.pow(2,8*r)-1,0)}var n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t|=0,r|=0,!i){j(this,e,t,r,Math.pow(2,8*r)-1,0)}var n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):z(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},o.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):z(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return N(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return N(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,s=i-r;if(this===e&&r<t&&t<i)for(n=s-1;n>=0;--n)e[n+t]=this[n+r];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},o.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=o.isBuffer(e)?e:G(new o(e,i).toString()),u=a.length;for(s=0;s<r-t;++s)this[s+t]=a[s%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(36))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function n(e){var t=i(e),r=t[0],n=t[1];return 3*(r+n)/4-n}function o(e,t,r){return 3*(t+r)/4-r}function s(e){var t,r,n=i(e),s=n[0],a=n[1],u=new l(o(e,s,a)),h=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)t=c[e.charCodeAt(r)]<<18|c[e.charCodeAt(r+1)]<<12|c[e.charCodeAt(r+2)]<<6|c[e.charCodeAt(r+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=255&t;return 2===a&&(t=c[e.charCodeAt(r)]<<2|c[e.charCodeAt(r+1)]>>4,u[h++]=255&t),1===a&&(t=c[e.charCodeAt(r)]<<10|c[e.charCodeAt(r+1)]<<4|c[e.charCodeAt(r+2)]>>2,u[h++]=t>>8&255,u[h++]=255&t),u}function a(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function u(e,t,r){for(var i,n=[],o=t;o<r;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),n.push(a(i));return n.join("")}function h(e){for(var t,r=e.length,i=r%3,n=[],o=0,s=r-i;o<s;o+=16383)n.push(u(e,o,o+16383>s?s:o+16383));return 1===i?(t=e[r-1],n.push(f[t>>2]+f[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],n.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+"=")),n.join("")}t.byteLength=n,t.toByteArray=s,t.fromByteArray=h;for(var f=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,g=p.length;d<g;++d)f[d]=p[d],c[p.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,i,n){var o,s,a=8*n-i-1,u=(1<<a)-1,h=u>>1,f=-7,c=r?n-1:0,l=r?-1:1,p=e[t+c];for(c+=l,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=256*o+e[t+c],c+=l,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=i;f>0;s=256*s+e[t+c],c+=l,f-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=h}return(p?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,r,i,n,o){var s,a,u,h=8*o-n-1,f=(1<<h)-1,c=f>>1,l=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+c>=1?l/u:l*Math.pow(2,1-c),t*u>=2&&(s++,u/=2),s+c>=f?(a=0,s=f):s+c>=1?(a=(t*u-1)*Math.pow(2,n),s+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,n),s=0));n>=8;e[r+p]=255&a,p+=d,a/=256,n-=8);for(s=s<<n|a,h+=n;h>0;e[r+p]=255&s,p+=d,s/=256,h-=8);e[r+p-d]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){e.exports=r(41)},function(e,t){e.exports=function(e,t,r){var i=[],n=e.length;if(0===n)return i;var o=t<0?Math.max(0,t+n):t||0;for(void 0!==r&&(n=r<0?r+n:r);n-- >o;)i[n-o]=e[n];return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Float32ArrayUtils=void 0;var i=function(){function e(){}return e.fill=function(e,t,r,i){if(void 0===t&&(t=0),void 0===r&&(r=e.length),void 0===i&&(i=0),t<0||t>=e.length)throw"index("+t+") is out of bounds";r=r<=t?t+1:r;for(var n=Math.min(e.length,r),o=t;o<n;o++)e[o]=i},e}();t.Float32ArrayUtils=i},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.VertexBuffer=void 0;var n=r(9),o=r(1),s=r(16),a=function(e){function t(t,r,i){void 0===i&&(i=0);var o=e.call(this,r)||this;if(!o.glRenderModeValidator(t,r))throw"cannot initialize vertex buffer of unrecognized gl render mode";o.glRenderMode=t,o._vectorSizeLimit=i;var s=o._vectorSizeLimit?new n.Float32Vector(new Float32Array(0),o._vectorSizeLimit):new n.Float32Vector(new Float32Array(0));return o._topVertexVector=s,o.verticiesStack=new Array,o.verticiesStack.push(o._topVertexVector),o}return i(t,e),t.prototype.addVertex=function(e){if(e.length!==o.Constants.floatsPerPositionColor)throw"cannot add vertex repersented by "+e.length+" floats, we only accept verticies of "+o.Constants.floatsPerPositionColor+" floats (x, y, z, r, g, b)";!this._vectorSizeLimit||this._topVertexVector.size+e.length<=this._vectorSizeLimit?this._topVertexVector.addArray(e):(this._topVertexVector=new n.Float32Vector(e,this._vectorSizeLimit),this.verticiesStack.push(this._topVertexVector)),this.refreshWebglBuffer()},t.prototype.glRenderModeValidator=function(e,t){switch(e){case t.POINTS:case t.LINES:case t.LINE_STRIP:case t.LINE_LOOP:case t.TRIANGLES:case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:return!0}return!1},t}(s.GlBufferWrapper);t.VertexBuffer=a},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLRenderer3d=void 0;var n=r(13),o=r(26),s=r(8),a=r(27),u=function(e){function t(t,r){void 0===r&&(r={});var i=e.call(this,t,r)||this;return i._camera=new o.Camera(i._canvas.width/i._canvas.height),i.postResizeCallback=function(e,t,r){i.camera.aspectRatio=e.width/e.height},i._shapeFactory=new a.ShapeFactory3d,i}return i(t,e),Object.defineProperty(t.prototype,"camera",{get:function(){return this._camera},set:function(e){this._camera=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeFactory",{get:function(){return this._shapeFactory},enumerable:!1,configurable:!0}),t.prototype.addShapeToScene=function(e){switch(e.shapeMode){case"points":return this._pointsShapeBuffer.addShape(e);case"lines":return this.addLine(e);case"triangles":return this._trianglesShapeBuffer.addShape(e);case"rectangles":return this._rectanglesShapeBuffer.addShape(e);case"hexagons":return this._hexagonsShapeBuffer.addShape(e);case"octogons":return this._octogonsShapeBuffer.addShape(e);case"ellipses":return this._ellipsesShapeBuffer.addShape(e);case"box":return this._boxShapeBuffer.addShape(e)}return""},t.prototype.addHomogenoeusShapesArrayToScene=function(e){var t=e[0];if(!t)return new Array;switch(t.shapeMode){case"points":return this._pointsShapeBuffer.addShapes(e);case"lines":return this.addLines(e);case"triangles":return this._trianglesShapeBuffer.addShapes(e);case"rectangles":return this._rectanglesShapeBuffer.addShapes(e);case"hexagons":return this._hexagonsShapeBuffer.addShapes(e);case"octogons":return this._octogonsShapeBuffer.addShapes(e);case"ellipses":return this._ellipsesShapeBuffer.addShapes(e);case"box":return this._boxShapeBuffer.addShapes(e)}return new Array},t.prototype.addVertexToScene=function(e,t,r){this.addVertexToSceneBase(e,t,r)},t.prototype.addPointToLine=function(e,t){return this.addPointToLineBase(e,t)},t.prototype.removeShape=function(e,t){switch(t){case"points":return this._pointsShapeBuffer.removeShape(e);case"lines":return this.removeLine(e);case"triangles":return this._trianglesShapeBuffer.removeShape(e);case"rectangles":return this._rectanglesShapeBuffer.removeShape(e);case"hexagons":return this._hexagonsShapeBuffer.removeShape(e);case"octogons":return this._octogonsShapeBuffer.removeShape(e);case"ellipses":return this._ellipsesShapeBuffer.removeShape(e);case"box":return this._boxShapeBuffer.removeShape(e)}return this.removeShapeFromUnspecifiedBuffer(e)},t.prototype.updateShapeColor=function(e,t,r){switch(r){case"points":return this._pointsShapeBuffer.updateColor(e,t);case"lines":return this.updateLineColor(e,t);case"triangles":return this._trianglesShapeBuffer.updateColor(e,t);case"rectangles":return this._rectanglesShapeBuffer.updateColor(e,t);case"hexagons":return this._hexagonsShapeBuffer.updateColor(e,t);case"octogons":return this._octogonsShapeBuffer.updateColor(e,t);case"ellipses":return this._ellipsesShapeBuffer.updateColor(e,t);case"box":return this._boxShapeBuffer.updateColor(e,t)}return this.updateShapeColorFromUnspecifiedBuffer(e,t)},t.prototype.drawPointShapeBuffer=function(e){this.drawPointShapeBufferBase(e,this._camera.vpMatrix)},t.prototype.drawLine=function(e){this.drawLineBase(e,this._camera.vpMatrix)},t.prototype.drawDynamicShapeBuffer=function(e){this.drawDynamicShapeBufferBase(e,this._camera.vpMatrix)},t.prototype.drawVertexBuffer=function(e){this.drawVertexBufferBase(e,this._camera.vpMatrix)},t.prototype.initializaDynamicShapeBuffers=function(){this._trianglesShapeBuffer=new s.ShapeBuffer(this.gl),this._rectanglesShapeBuffer=new s.ShapeBuffer(this.gl),this._hexagonsShapeBuffer=new s.ShapeBuffer(this.gl),this._octogonsShapeBuffer=new s.ShapeBuffer(this.gl),this._ellipsesShapeBuffer=new s.ShapeBuffer(this.gl),this._boxShapeBuffer=new s.ShapeBuffer(this.gl),this._dynamicShapeBuffers=[this._trianglesShapeBuffer,this._rectanglesShapeBuffer,this._hexagonsShapeBuffer,this._octogonsShapeBuffer,this._ellipsesShapeBuffer,this._boxShapeBuffer]},t}(n.WebGLRenderer);t.WebGLRenderer3d=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorMapper=t.Color=void 0;var i=r(28);!function(e){e.red="red",e.orange="orange",e.yellow="yellow",e.green="green",e.cyan="cyan",e.blue="blue",e.indigo="indigo",e.fuchsia="fuchsia",e.white="white"}(t.Color||(t.Color={}));var n=function(){function e(){}return e.colorToRGBColor=function(e){switch(e){case"red":return new i.RGBColor(1,0,0);case"orange":return new i.RGBColor(1,.271,0);case"yellow":return new i.RGBColor(1,1,0);case"green":return new i.RGBColor(0,1,0);case"cyan":return new i.RGBColor(0,1,1);case"blue":return new i.RGBColor(0,0,1);case"indigo":return new i.RGBColor(.294,0,.51);case"fuchsia":return new i.RGBColor(1,0,1);case"white":return new i.RGBColor(1,1,1);default:throw"could not find color "+e}},e}();t.ColorMapper=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseHelper=void 0;var i=r(0),n=function(){function e(){}return e.mouseEventToWebGlPoints=function(e,t){var r=e.clientX,n=e.clientY,o=t.getBoundingClientRect(),s=t.width,a=t.height;return r=(r-o.left-s/2)/(s/2),n=(a/2-(n-o.top))/(a/2),new i.Vec3(r,n)},e}();t.MouseHelper=n}])});