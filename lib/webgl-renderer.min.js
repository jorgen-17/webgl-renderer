!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("webgl-renderer",[],e):"object"==typeof exports?exports["webgl-renderer"]=e():t["webgl-renderer"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=29)}([function(t,e,r){!function(e,r){t.exports=r()}(0,function(){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.elements=new Float32Array(3),this.elements[0]=t,this.elements[1]=e,this.elements[2]=r}return t.prototype.normalize=function(){var t=this.elements,e=t[0],r=t[1],i=t[2],n=Math.sqrt(e*e+r*r+i*i);return n?1===n?this:(n=1/n,t[0]=e*n,t[1]=r*n,t[2]=i*n,this):(t[0]=0,t[1]=0,t[2]=0,this)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},Object.defineProperty(t.prototype,"x",{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t},enumerable:!0,configurable:!0}),t}();e.Vec3=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),this.elements=new Float32Array(4),this.elements[0]=t,this.elements[1]=e,this.elements[2]=r,this.elements[3]=i}return Object.defineProperty(t.prototype,"x",{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this.elements[3]},set:function(t){this.elements[3]=t},enumerable:!0,configurable:!0}),t}();e.Vec4=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3);e.Mat4=i.Mat4;var n=r(1);e.Vec4=n.Vec4;var o=r(0);e.Vec3=o.Vec3;var s=r(4);e.Vec2=s.Vec2},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=r(1),o=function(){function t(t){if(void 0===t&&(t=null),t){this.elements=new Float32Array(16);for(var e=0;e<16;++e)this.elements[e]=t.elements[e]}else this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return t.prototype.setIdentity=function(){var t=this.elements;return t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,this},t.prototype.set=function(t){var e,r,i;if(r=t.elements,i=this.elements,r!==i){for(e=0;e<16;++e)i[e]=r[e];return this}},t.prototype.multiply=function(t){return this.concat(t)},t.prototype.multiplyVector3=function(t){var e=this.elements,r=t.elements,n=new i.Vec3,o=n.elements;return o[0]=r[0]*e[0]+r[1]*e[4]+r[2]*e[8]+e[11],o[1]=r[0]*e[1]+r[1]*e[5]+r[2]*e[9]+e[12],o[2]=r[0]*e[2]+r[1]*e[6]+r[2]*e[10]+e[13],n},t.prototype.multiplyVector4=function(t){var e=this.elements,r=t.elements,i=new n.Vec4,o=i.elements;return o[0]=r[0]*e[0]+r[1]*e[4]+r[2]*e[8]+r[3]*e[12],o[1]=r[0]*e[1]+r[1]*e[5]+r[2]*e[9]+r[3]*e[13],o[2]=r[0]*e[2]+r[1]*e[6]+r[2]*e[10]+r[3]*e[14],o[3]=r[0]*e[3]+r[1]*e[7]+r[2]*e[11]+r[3]*e[15],i},t.prototype.transpose=function(){var t,e;return t=this.elements,e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},t.prototype.setInverseOf=function(t){var e,r,i,n,o;if(r=t.elements,i=this.elements,n=new Float32Array(16),n[0]=r[5]*r[10]*r[15]-r[5]*r[11]*r[14]-r[9]*r[6]*r[15]+r[9]*r[7]*r[14]+r[13]*r[6]*r[11]-r[13]*r[7]*r[10],n[4]=-r[4]*r[10]*r[15]+r[4]*r[11]*r[14]+r[8]*r[6]*r[15]-r[8]*r[7]*r[14]-r[12]*r[6]*r[11]+r[12]*r[7]*r[10],n[8]=r[4]*r[9]*r[15]-r[4]*r[11]*r[13]-r[8]*r[5]*r[15]+r[8]*r[7]*r[13]+r[12]*r[5]*r[11]-r[12]*r[7]*r[9],n[12]=-r[4]*r[9]*r[14]+r[4]*r[10]*r[13]+r[8]*r[5]*r[14]-r[8]*r[6]*r[13]-r[12]*r[5]*r[10]+r[12]*r[6]*r[9],n[1]=-r[1]*r[10]*r[15]+r[1]*r[11]*r[14]+r[9]*r[2]*r[15]-r[9]*r[3]*r[14]-r[13]*r[2]*r[11]+r[13]*r[3]*r[10],n[5]=r[0]*r[10]*r[15]-r[0]*r[11]*r[14]-r[8]*r[2]*r[15]+r[8]*r[3]*r[14]+r[12]*r[2]*r[11]-r[12]*r[3]*r[10],n[9]=-r[0]*r[9]*r[15]+r[0]*r[11]*r[13]+r[8]*r[1]*r[15]-r[8]*r[3]*r[13]-r[12]*r[1]*r[11]+r[12]*r[3]*r[9],n[13]=r[0]*r[9]*r[14]-r[0]*r[10]*r[13]-r[8]*r[1]*r[14]+r[8]*r[2]*r[13]+r[12]*r[1]*r[10]-r[12]*r[2]*r[9],n[2]=r[1]*r[6]*r[15]-r[1]*r[7]*r[14]-r[5]*r[2]*r[15]+r[5]*r[3]*r[14]+r[13]*r[2]*r[7]-r[13]*r[3]*r[6],n[6]=-r[0]*r[6]*r[15]+r[0]*r[7]*r[14]+r[4]*r[2]*r[15]-r[4]*r[3]*r[14]-r[12]*r[2]*r[7]+r[12]*r[3]*r[6],n[10]=r[0]*r[5]*r[15]-r[0]*r[7]*r[13]-r[4]*r[1]*r[15]+r[4]*r[3]*r[13]+r[12]*r[1]*r[7]-r[12]*r[3]*r[5],n[14]=-r[0]*r[5]*r[14]+r[0]*r[6]*r[13]+r[4]*r[1]*r[14]-r[4]*r[2]*r[13]-r[12]*r[1]*r[6]+r[12]*r[2]*r[5],n[3]=-r[1]*r[6]*r[11]+r[1]*r[7]*r[10]+r[5]*r[2]*r[11]-r[5]*r[3]*r[10]-r[9]*r[2]*r[7]+r[9]*r[3]*r[6],n[7]=r[0]*r[6]*r[11]-r[0]*r[7]*r[10]-r[4]*r[2]*r[11]+r[4]*r[3]*r[10]+r[8]*r[2]*r[7]-r[8]*r[3]*r[6],n[11]=-r[0]*r[5]*r[11]+r[0]*r[7]*r[9]+r[4]*r[1]*r[11]-r[4]*r[3]*r[9]-r[8]*r[1]*r[7]+r[8]*r[3]*r[5],n[15]=r[0]*r[5]*r[10]-r[0]*r[6]*r[9]-r[4]*r[1]*r[10]+r[4]*r[2]*r[9]+r[8]*r[1]*r[6]-r[8]*r[2]*r[5],0==(o=r[0]*n[0]+r[1]*n[4]+r[2]*n[8]+r[3]*n[12]))return this;for(o=1/o,e=0;e<16;e++)i[e]=n[e]*o;return this},t.prototype.invert=function(){return this.setInverseOf(this)},t.prototype.setOrtho=function(t,e,r,i,n,o){var s,a,u,h;if(t===e||r===i||n===o)throw"null frustum";return a=1/(e-t),u=1/(i-r),h=1/(o-n),s=this.elements,s[0]=2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*u,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=-2*h,s[11]=0,s[12]=-(e+t)*a,s[13]=-(i+r)*u,s[14]=-(o+n)*h,s[15]=1,this},t.prototype.ortho=function(e,r,i,n,o,s){return this.concat((new t).setOrtho(e,r,i,n,o,s))},t.prototype.setFrustum=function(t,e,r,i,n,o){var s,a,u,h;if(t===e||i===r||n===o)throw"null frustum";if(n<=0)throw"near <= 0";if(o<=0)throw"far <= 0";return a=1/(e-t),u=1/(i-r),h=1/(o-n),s=this.elements,s[0]=2*n*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*n*u,s[6]=0,s[7]=0,s[8]=(e+t)*a,s[9]=(i+r)*u,s[10]=-(o+n)*h,s[11]=-1,s[12]=0,s[13]=0,s[14]=-2*n*o*h,s[15]=0,this},t.prototype.frustum=function(e,r,i,n,o,s){return this.concat((new t).setFrustum(e,r,i,n,o,s))},t.prototype.setPerspective=function(t,e,r,i){var n,o,s,a;if(r===i||0===e)throw"null frustum";if(r<=0)throw"near <= 0";if(i<=0)throw"far <= 0";if(t=Math.PI*t/180/2,0===(s=Math.sin(t)))throw"null frustum";return o=1/(i-r),a=Math.cos(t)/s,n=this.elements,n[0]=a/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=-(i+r)*o,n[11]=-1,n[12]=0,n[13]=0,n[14]=-2*r*i*o,n[15]=0,this},t.prototype.perspective=function(e,r,i,n){return this.concat((new t).setPerspective(e,r,i,n))},t.prototype.setScale=function(t,e,r){var i=this.elements;return i[0]=t,i[4]=0,i[8]=0,i[12]=0,i[1]=0,i[5]=e,i[9]=0,i[13]=0,i[2]=0,i[6]=0,i[10]=r,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},t.prototype.scale=function(t,e,r){var i=this.elements;return i[0]*=t,i[4]*=e,i[8]*=r,i[1]*=t,i[5]*=e,i[9]*=r,i[2]*=t,i[6]*=e,i[10]*=r,i[3]*=t,i[7]*=e,i[11]*=r,this},t.prototype.setTranslate=function(t,e,r){var i=this.elements;return i[0]=1,i[4]=0,i[8]=0,i[12]=t,i[1]=0,i[5]=1,i[9]=0,i[13]=e,i[2]=0,i[6]=0,i[10]=1,i[14]=r,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},t.prototype.translate=function(t,e,r){var i=this.elements;return i[12]+=i[0]*t+i[4]*e+i[8]*r,i[13]+=i[1]*t+i[5]*e+i[9]*r,i[14]+=i[2]*t+i[6]*e+i[10]*r,i[15]+=i[3]*t+i[7]*e+i[11]*r,this},t.prototype.setRotate=function(t,e,r,i){var n,o,s,a,u,h,f,c,l,p,d,g;return t=Math.PI*t/180,n=this.elements,o=Math.sin(t),s=Math.cos(t),0!==e&&0===r&&0===i?(e<0&&(o=-o),n[0]=1,n[4]=0,n[8]=0,n[12]=0,n[1]=0,n[5]=s,n[9]=-o,n[13]=0,n[2]=0,n[6]=o,n[10]=s,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):0===e&&0!==r&&0===i?(r<0&&(o=-o),n[0]=s,n[4]=0,n[8]=o,n[12]=0,n[1]=0,n[5]=1,n[9]=0,n[13]=0,n[2]=-o,n[6]=0,n[10]=s,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):0===e&&0===r&&0!==i?(i<0&&(o=-o),n[0]=s,n[4]=-o,n[8]=0,n[12]=0,n[1]=o,n[5]=s,n[9]=0,n[13]=0,n[2]=0,n[6]=0,n[10]=1,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1):(a=Math.sqrt(e*e+r*r+i*i),1!==a&&(u=1/a,e*=u,r*=u,i*=u),h=1-s,f=e*r,c=r*i,l=i*e,p=e*o,d=r*o,g=i*o,n[0]=e*e*h+s,n[1]=f*h+g,n[2]=l*h-d,n[3]=0,n[4]=f*h-g,n[5]=r*r*h+s,n[6]=c*h+p,n[7]=0,n[8]=l*h+d,n[9]=c*h-p,n[10]=i*i*h+s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1),this},t.prototype.rotate=function(e,r,i,n){return this.concat((new t).setRotate(e,r,i,n))},t.prototype.setLookAt=function(t,e,r,i,n,o,s,a,u){var h,f,c,l,p,d,g,_,y,v,b,m;return f=i-t,c=n-e,l=o-r,p=1/Math.sqrt(f*f+c*c+l*l),f*=p,c*=p,l*=p,d=c*u-l*a,g=l*s-f*u,_=f*a-c*s,y=1/Math.sqrt(d*d+g*g+_*_),d*=y,g*=y,_*=y,v=g*l-_*c,b=_*f-d*l,m=d*c-g*f,h=this.elements,h[0]=d,h[1]=v,h[2]=-f,h[3]=0,h[4]=g,h[5]=b,h[6]=-c,h[7]=0,h[8]=_,h[9]=m,h[10]=-l,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this.translate(-t,-e,-r)},t.prototype.lookAt=function(e,r,i,n,o,s,a,u,h){return this.concat((new t).setLookAt(e,r,i,n,o,s,a,u,h))},t.prototype.dropShadow=function(e,r){var i=new t,n=i.elements,o=e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3];return n[0]=o-r[0]*e[0],n[1]=-r[1]*e[0],n[2]=-r[2]*e[0],n[3]=-r[3]*e[0],n[4]=-r[0]*e[1],n[5]=o-r[1]*e[1],n[6]=-r[2]*e[1],n[7]=-r[3]*e[1],n[8]=-r[0]*e[2],n[9]=-r[1]*e[2],n[10]=o-r[2]*e[2],n[11]=-r[3]*e[2],n[12]=-r[0]*e[3],n[13]=-r[1]*e[3],n[14]=-r[2]*e[3],n[15]=o-r[3]*e[3],this.concat(i)},t.prototype.dropShadowDirectionally=function(t,e,r,i,n,o,s,a,u){var h=i*t+n*e+o*r;return this.dropShadow([t,e,r,-h],[s,a,u,0])},t.prototype.concat=function(t){var e,r,i,n,o,s,a,u;if(r=this.elements,i=this.elements,n=t.elements,r===n)for(n=new Float32Array(16),e=0;e<16;++e)n[e]=r[e];for(e=0;e<4;e++)o=i[e],s=i[e+4],a=i[e+8],u=i[e+12],r[e]=o*n[0]+s*n[1]+a*n[2]+u*n[3],r[e+4]=o*n[4]+s*n[5]+a*n[6]+u*n[7],r[e+8]=o*n[8]+s*n[9]+a*n[10]+u*n[11],r[e+12]=o*n[12]+s*n[13]+a*n[14]+u*n[15];return this},t}();e.Mat4=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.elements=new Float32Array(2),this.elements[0]=t,this.elements[1]=e}return t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},Object.defineProperty(t.prototype,"x",{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t},enumerable:!0,configurable:!0}),t}();e.Vec2=i}])})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Float32Array.BYTES_PER_ELEMENT,n=3*i,o=3*i,s=n+o,a=7*i,u=22*i,h=4*i,f=s+0*h,c=s+1*h,l=s+2*h,p=s+3*h;e.Constants={floatsPerPosition:3,floatsPerColor:3,floatsPerPointSize:1,verticiesPerTriangle:3,floatsPerMat4Row:4,floatsPerMat4:16,floatsPerPositionColor:6,floatsPerPointVertex:7,floatsPerDynamicVertex:22,floatsPerTriangle:66,bytesPerPosition:n,bytesPerPositionColor:s,bytesPerPointVertex:a,bytesPerDynamicVertex:u,modelMatrixRow0Offset:f,modelMatrixRow1Offset:c,modelMatrixRow2Offset:l,modelMatrixRow3Offset:p,defaultAlpha:1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t.points="points",t.lines="lines",t.triangles="triangles",t.rectangles="rectangles",t.hexagons="hexagons",t.octogons="octogons",t.ellipses="ellipses",t.box="box"}(e.ShapeMode||(e.ShapeMode={}))},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(1),s=r(5),a=function(t){function e(e,r,i,s){var a=t.call(this,e,o.Constants.floatsPerDynamicVertex,s,r,i)||this;return a._modelMatrix=(new n.Mat4).setIdentity(),a}return i(e,t),Object.defineProperty(e.prototype,"modelMatrix",{get:function(){return this._modelMatrix},set:function(t){this._modelMatrix=t,this.computeVerticies()},enumerable:!0,configurable:!0}),e.prototype.addXYZColorAndModelMatToVerticies=function(t,e,r,i){var n=this._modelMatrix.elements;this._verticies[t]=e,this._verticies[t+1]=r,this._verticies[t+2]=i,this._verticies[t+3]=this._rgbColor.red,this._verticies[t+4]=this._rgbColor.green,this._verticies[t+5]=this._rgbColor.blue,this._verticies[t+6]=n[0],this._verticies[t+7]=n[1],this._verticies[t+8]=n[2],this._verticies[t+9]=n[3],this._verticies[t+10]=n[4],this._verticies[t+11]=n[5],this._verticies[t+12]=n[6],this._verticies[t+13]=n[7],this._verticies[t+14]=n[8],this._verticies[t+15]=n[9],this._verticies[t+16]=n[10],this._verticies[t+17]=n[11],this._verticies[t+18]=n[12],this._verticies[t+19]=n[13],this._verticies[t+20]=n[14],this._verticies[t+21]=n[15]},e.prototype.addTriangleToVerticies=function(t,e,r,i){this.addXYZColorAndModelMatToVerticies(t,e.x,e.y,e.z),this.addXYZColorAndModelMatToVerticies(t+o.Constants.floatsPerDynamicVertex,r.x,r.y,r.z),this.addXYZColorAndModelMatToVerticies(t+2*o.Constants.floatsPerDynamicVertex,i.x,i.y,i.z)},e}(s.Shape);e.DynamicShape=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=r(7),o=r(2),s=n.RenderMode.points,a=o.ShapeMode.points,u={red:.9,green:.9,blue:.9},h={red:0,green:0,blue:0},f=new i.Vec3(0,0,.9),c=new i.Vec3(0,0,-1),l=new i.Vec3(0,1,0),p=(new i.Mat4).setIdentity();e.Settings={defaultRendereMode:s,defaultShapeMode:a,defaultPointSize:10,defaultBackgroundColor:u,defaultBackgroundAlpha:1,defaultColor:h,defaultEyePosition:f,defaultLookAtPoint:c,defaultUpPosition:l,defaultFieldOfView:60,defaultNear:.01,defaultFar:2,defaultModelMatrix:p,defaultIsFullScreen:!1,instancedArrayExtensionName:"ANGLE_instanced_arrays"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(19),n=r(4),o=function(){function t(t,e,r,o,s){void 0===r&&(r=n.Settings.defaultColor),void 0===o&&(o=null),void 0===s&&(s=null),this.numberOfVerticies=t,this.numberOfFloatsPerVertex=e,this._rgbColor=r,this._verticies=new Float32Array(t*this.numberOfFloatsPerVertex),o&&s&&(this._boundingRect=new i.BoundingRectangle(o,s))}return Object.defineProperty(t.prototype,"verticies",{get:function(){return this._verticies},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rgbColor",{get:function(){return this._rgbColor},set:function(t){this._rgbColor=t,this.computeVerticies()},enumerable:!0,configurable:!0}),t}();e.Shape=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=function(){function t(){}return t.between=function(t,e){var r=(t.x+e.x)/2,n=(t.y+e.y)/2,o=(t.z+e.z)/2;return new i.Vec3(r,n,o)},t}();e.Midpoint=n;var o=function(){function t(){}return t.between=function(t,e){var r=Math.max(t.x,e.x),n=Math.min(t.x,e.x),o=Math.max(t.y,e.y),s=Math.min(t.y,e.y),a=Math.max(t.z,e.z),u=Math.min(t.z,e.z),h=(r-n)/3,f=(o-s)/3,c=(a-u)/3,l=new i.Vec3(n+h,s+f,u+c);return{first:l,second:new i.Vec3(l.x+h,l.y+f,l.z+c)}},t}();e.ThirdPoints=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t.points="points",t.lines="lines",t.lineStrip="lineStrip",t.lineLoop="lineLoop",t.triangles="triangles",t.triangleStrip="triangleStrip",t.triangleFan="triangleFan"}(e.RenderMode||(e.RenderMode={}));var i=function(){function t(){}return t.renderModeToWebGlConstant=function(t,e){switch(t){case"points":return e.POINTS;case"lines":return e.LINES;case"lineStrip":return e.LINE_STRIP;case"lineLoop":return e.LINE_LOOP;case"triangles":return e.TRIANGLES;case"triangleStrip":return e.TRIANGLE_STRIP;case"triangleFan":return e.TRIANGLE_FAN;default:throw"could not find renderMode named "+t}},t}();e.RenderModeMapper=i},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(14),o=r(9),s=r(16),a=function(t){function e(e){var r=t.call(this,e)||this;return r._verticies=new o.Float32Vector,r._trimmedArray=new Float32Array(0),r._shapes={},r}return i(e,t),Object.defineProperty(e.prototype,"verticies",{get:function(){return this._trimmedArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return Object.keys(this._shapes).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){var t=Object.keys(this._shapes)[0];return this._shapes[t].shape},enumerable:!0,configurable:!0}),e.prototype.addShape=function(t){var e=this.introduceShape(t);return this._trimmedArray=this._verticies.getTrimmedArray(),this.refreshWebglBuffer(),e},e.prototype.addShapes=function(t){var e=new Array;if(t.length<1)return e;var r=t[0],i=r.numberOfVerticies*r.numberOfFloatsPerVertex,n=i*t.length;this._verticies.resize(n);for(var o=0;o<t.length;o++){var s=t[o],a=this.introduceShape(s);e[o]=a}return this._trimmedArray=this._verticies.getTrimmedArray(),this.refreshWebglBuffer(),e},e.prototype.removeShape=function(t){if(this._shapes.hasOwnProperty(t)){var e=this._shapes[t].shape,r=this._shapes[t].index,i=e.numberOfVerticies*e.numberOfFloatsPerVertex,n=r*i;return this._verticies.remove(n,i),this._trimmedArray=this._verticies.getTrimmedArray(),this.refreshWebglBuffer(),this.reorderIndicies(r),delete this._shapes[t],!0}return!1},e.prototype.updateColor=function(t,e){if(this._shapes.hasOwnProperty(t)){var r=this._shapes[t].shape,i=this._shapes[t].index;r.rgbColor=e;var n=r.numberOfVerticies*r.numberOfFloatsPerVertex,o=i*n;return this._verticies.overwrite(o,r.verticies),this._trimmedArray=this._verticies.getTrimmedArray(),this.refreshWebglBuffer(),!0}return!1},e.prototype.reorderIndicies=function(t){for(var e=0,r=Object.keys(this._shapes);e<r.length;e++){var i=r[e];this._shapes[i].index>t&&this._shapes[i].index--}},e.prototype.introduceShape=function(t){var e=n(),r=this.count;return this._shapes[e]={shape:t,index:r},this._verticies.addArray(t.verticies),e},e}(s.GlBufferWrapper);e.ShapeBuffer=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(34),n=r(42),o=function(){function t(t,e,r){void 0===t&&(t=new Float32Array(0)),void 0===e&&(e=0),void 0===r&&(r=!0),this.arr=t,this.size=t.length,this._sizeLimit=e,this._bestFit=r}return t.prototype.resize=function(t){if(!(t<=this.arr.length)){var e=this.arr;this.arr=new Float32Array(t),this.arr.set(e)}},t.prototype.addNumber=function(t){var e=this.size+1;if(this._sizeLimit&&e>this._sizeLimit)return!1;var r=this._sizeLimit?Math.min(2*e,this._sizeLimit):2*e;return e>=this.arr.length&&this.resize(r),this.arr[this.size]=t,this.size=e,!0},t.prototype.addArray=function(t){var e=this.size+t.length;if(this._sizeLimit&&e>this._sizeLimit){if(!this._bestFit)return!1;var r=this._sizeLimit-this.size,n=i(t,0,r);return this.addArray(n)}var o=this._sizeLimit?Math.min(2*e,this._sizeLimit):2*e;return e>=this.arr.length&&this.resize(o),this.arr.set(t,this.size),this.size=e,!0},t.prototype.remove=function(t,e){if(void 0===e&&(e=1),t<0||t>=this.arr.length)throw"index("+t+") is out of bounds";e=e>0?e:1;for(var r=t,i=r+e;i<this.size;i++)this.arr[r]=this.arr[i],r++;n.Float32ArrayUtils.fill(this.arr,r);var o=t+e>=this.size,s=o?this.size-t:e;this.size-=s},t.prototype.overwrite=function(t,e){if(t<0||t>=this.arr.length)throw"index("+t+") is out of bounds";if(!(e.length<1)){for(var r=0,n=t;n<this.size&&!(r>=e.length);n++)this.arr[n]=e[r],r++;if(r<e.length){var o=i(e,r);this.addArray(o)}}},t.prototype.getTrimmedArray=function(){return this.arr.length>this.size?i(this.arr,0,this.size):this.arr},t}();e.Float32Vector=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(18),n=r(21),o=r(22),s=r(23),a=r(24),u=r(20),h=r(25),f=function(){function t(){}return t.prototype.createTriangle=function(t,e,r,i){return new n.Triangle(t,e,r,i)},t.prototype.createRectangle=function(t,e,r,i){return new o.Rectangle(t,e,r,i)},t.prototype.createHexagon=function(t,e,r,i){return new s.Hexagon(t,e,r,i)},t.prototype.createOctogon=function(t,e,r,i){return new a.Octogon(t,e,r,i)},t.prototype.createEllipse=function(t,e,r,n){return new i.Ellipse(t,e,r,u.Precision.High,n)},t.prototype.createBox=function(t,e,r,i){return new h.Box(t,e,r,i)},t}();e.ShapeFactory=f},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),o=r(1),s=r(2),a=r(4),u=function(t){function e(r,i,n,u){void 0===u&&(u=a.Settings.defaultPointSize);var h=t.call(this,e.numberOfVerticies,o.Constants.floatsPerPointVertex,n)||this;return h.shapeMode=s.ShapeMode.points,h._location=r,h._pointSize=u,h.computeVerticies(),h.glRenderMode=i.POINTS,h}return i(e,t),Object.defineProperty(e.prototype,"pointSize",{get:function(){return this._pointSize},set:function(t){this._pointSize=t,this.computeVerticies()},enumerable:!0,configurable:!0}),e.prototype.computeVerticies=function(){this.addXYZColorAndPointSize(0,this._location.x,this._location.y,this._location.z)},e.prototype.addXYZColorAndPointSize=function(t,e,r,i){this._verticies[t]=e,this._verticies[t+1]=r,this._verticies[t+2]=i,this._verticies[t+3]=this.rgbColor.red,this._verticies[t+4]=this.rgbColor.green,this._verticies[t+5]=this.rgbColor.blue,this._verticies[t+6]=this._pointSize},e.numberOfVerticies=1,e}(n.Shape);e.Point=u},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),o=r(9),s=r(1),a=r(2),u=function(t){function e(e,r,i){var n=t.call(this,1,s.Constants.floatsPerPositionColor,i)||this;n.shapeMode=a.ShapeMode.lines;new o.Float32Vector;return n._vertexPositions=new Array,n._vertexPositions.push(e),n.computeVerticies(),n.glRenderMode=r.LINE_STRIP,n._gl=r,n._glBuffer=n._gl.createBuffer(),n}return i(e,t),Object.defineProperty(e.prototype,"verticies",{get:function(){return this._verticiesVector.getTrimmedArray()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glBuffer",{get:function(){return this._glBuffer},enumerable:!0,configurable:!0}),e.prototype.refreshWebglBuffer=function(){this._gl.deleteBuffer(this._glBuffer),this._glBuffer=this._gl.createBuffer()},e.prototype.computeVerticies=function(){for(var t=new Float32Array(this._vertexPositions.length*s.Constants.floatsPerPositionColor),e=0;e<this._vertexPositions.length;e++){var r=e*s.Constants.floatsPerPositionColor,i=this._vertexPositions[e];this.addXYZAndColorToFloat32Array(t,r,i.x,i.y,i.z)}this._verticiesVector=new o.Float32Vector(t)},e.prototype.addVertex=function(t){this._vertexPositions.push(t),this.numberOfVerticies++;var e=new Float32Array(s.Constants.floatsPerPositionColor);this.addXYZAndColorToFloat32Array(e,0,t.x,t.y,t.z),this._verticiesVector.addArray(e),this.refreshWebglBuffer()},e.prototype.addXYZAndColorToFloat32Array=function(t,e,r,i,n){t[e]=r,t[e+1]=i,t[e+2]=n,t[e+3]=this.rgbColor.red,t[e+4]=this.rgbColor.green,t[e+5]=this.rgbColor.blue},e}(n.Shape);e.Line=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=r(14),o=r(7),s=r(1),a=r(31),u=r(32),h=r(4),f=r(15),c=r(33),l=r(43),p=function(){function t(t,e,r){void 0===e&&(e={}),void 0===r&&(r=function(){});var i=this;this._pointVertexShaderSource="    attribute vec4 "+a.ShaderSettings.positionAttributeName+";\n    attribute vec4 "+a.ShaderSettings.colorAttributeName+";\n    attribute float "+a.ShaderSettings.pointSizeAttributeName+";\n    uniform mat4 "+a.ShaderSettings.vpMatrixUniformName+";\n    varying vec4 v_color;\n    void main(void)\n    {\n        gl_Position = "+a.ShaderSettings.vpMatrixUniformName+" * "+a.ShaderSettings.positionAttributeName+";\n        gl_PointSize = "+a.ShaderSettings.pointSizeAttributeName+";\n        v_color = "+a.ShaderSettings.colorAttributeName+";\n    }",this._dynamicVertexShaderSource="    attribute vec4 "+a.ShaderSettings.positionAttributeName+";\n    attribute vec4 "+a.ShaderSettings.colorAttributeName+";\n    attribute mat4 "+a.ShaderSettings.modelMatrixAttributeName+";\n    uniform mat4 "+a.ShaderSettings.vpMatrixUniformName+";\n    varying vec4 v_color;\n    void main(void)\n    {\n        gl_Position = "+a.ShaderSettings.vpMatrixUniformName+" * "+a.ShaderSettings.modelMatrixAttributeName+" * "+a.ShaderSettings.positionAttributeName+";\n        v_color = "+a.ShaderSettings.colorAttributeName+";\n    }",this._positionColorVertexShaderSource="    attribute vec4 "+a.ShaderSettings.positionAttributeName+";\n    attribute vec4 "+a.ShaderSettings.colorAttributeName+";\n    uniform mat4 "+a.ShaderSettings.vpMatrixUniformName+";\n    varying vec4 v_color;\n    void main(void)\n    {\n        gl_Position = "+a.ShaderSettings.vpMatrixUniformName+" * "+a.ShaderSettings.positionAttributeName+";\n        v_color = "+a.ShaderSettings.colorAttributeName+";\n    }",this._fragmentShaderSource="    precision mediump float;\n    uniform vec4 u_fragColor;\n    varying vec4 v_color;\n    void main(void)\n    {\n        gl_FragColor = v_color;\n    }",this.handleContextLost=function(t){i.stop(),t.preventDefault(),i._isContextLost=!0},this.handleContextRestored=function(){i._isContextLost=!1,i.setupGlResources(),i.refreshAllWebGlBuffers(),i.start()},this.renderLoop=function(){i.draw(),i._animationFrameRequestId=i._window.requestAnimationFrame(i.renderLoop)},this.defaultCalcWidth=function(t){return t},this.defaultCalcHeight=function(t){return t},this.resizeCanvas=function(t,e,r){var n=i._calcWidth(e.innerWidth),o=i._calcHeight(e.innerHeight);r.setViewPortDimensions(n,o),t.width=n,t.height=o,i._postResizeCallback(t,e,r)},this._canvas=t,this._postResizeCallback=r,this.setCanvasEventHandlers(),this._browserHelper=e.browserHelper||new f.BrowserHelper,this.setupGlResources(),this.initializeRenderingOptions(e),this.initializaBuffers(),this.setupWindowCallbacks()}return Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFullscreen",{get:function(){return this._isFullscreen},set:function(t){this._isFullscreen=t,this.setupWindowCallbacks()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"calcWidth",{get:function(){return this._calcWidth},set:function(t){this._calcWidth=t,this.setupWindowCallbacks()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"calcHeight",{get:function(){return this._calcHeight},set:function(t){this._calcHeight=t,this.setupWindowCallbacks()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"postResizeCallback",{set:function(t){this._postResizeCallback=t,this.setupWindowCallbacks()},enumerable:!0,configurable:!0}),t.prototype.setViewPortDimensions=function(t,e){this.gl.viewport(0,0,t,e)},t.prototype.addHeterogenoeusShapesArrayToScene=function(t){for(var e=new Array,r=0,i=t;r<i.length;r++){var n=i[r];e.push(this.addShapeToScene(n))}return e},t.prototype.removeAllShapes=function(){this.initializaShapeBuffers()},t.prototype.removeAllVerticies=function(){this.initializeVertexBuffers()},t.prototype.updatePointSize=function(t,e){return this._pointsShapeBuffer.updatePointSize(t,e)},t.prototype.start=function(){this.renderLoop()},t.prototype.stop=function(){this._window.cancelAnimationFrame(this._animationFrameRequestId)},t.prototype.draw=function(){this.gl.clearColor(this._backgroundColor.red,this._backgroundColor.green,this._backgroundColor.blue,h.Settings.defaultBackgroundAlpha),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(this._pointShaderProgram),this.getPointShaderVariables(),this._pointsShapeBuffer.count>0&&this.drawPointShapeBuffer(this._pointsShapeBuffer);for(var t in this._lineBuffer)if(this._lineBuffer[t]){var e=this._lineBuffer[t];this.drawLine(e)}this.gl.useProgram(this._dynamicShapeShaderProgram),this.getDynamicShapeShaderVariables();for(var r=0,i=this._dynamicShapeBuffers;r<i.length;r++){var n=i[r];n.count>0&&this.drawDynamicShapeBuffer(n)}this.gl.useProgram(this._positionColorShaderProgram),this.getShaderVariables(this._positionColorShaderProgram);for(var o=0,s=this._vertexBuffers;o<s.length;o++)for(var a=s[o],u=0,f=a.verticiesStack;u<f.length;u++){var c=f[u];c.size>0&&this.drawVertexBuffer(a)}},t.prototype.addVertexToSceneBase=function(t,e,r){switch(void 0===r&&(r=h.Settings.defaultColor),o.RenderModeMapper.renderModeToWebGlConstant(e,this.gl)){case this.gl.POINTS:this._pointsVertexBuffer.addVertex(new Float32Array([t.x,t.y,t.z,r.red,r.green,r.blue]));break;case this.gl.LINES:this._linesVertexBuffer.addVertex(new Float32Array([t.x,t.y,t.z,r.red,r.green,r.blue]));break;case this.gl.LINE_STRIP:this._lineStripVertexBuffer.addVertex(new Float32Array([t.x,t.y,t.z,r.red,r.green,r.blue]));break;case this.gl.LINE_LOOP:this._lineLoopVertexBuffer.addVertex(new Float32Array([t.x,t.y,t.z,r.red,r.green,r.blue]));break;case this.gl.TRIANGLES:this._trianglesVertexBuffer.addVertex(new Float32Array([t.x,t.y,t.z,r.red,r.green,r.blue]));break;case this.gl.TRIANGLE_STRIP:this._triangleStripVertexBuffer.addVertex(new Float32Array([t.x,t.y,t.z,r.red,r.green,r.blue]));break;case this.gl.TRIANGLE_FAN:this._triangleFanVertexBuffer.addVertex(new Float32Array([t.x,t.y,t.z,r.red,r.green,r.blue]))}},t.prototype.addLine=function(t){var e=n();return this._lineBuffer[e]=t,e},t.prototype.addLines=function(t){for(var e=[],r=0,i=t;r<i.length;r++){var n=i[r];e.push(this.addLine(n))}return e},t.prototype.removeLine=function(t){return!!this._lineBuffer[t]&&(delete this._lineBuffer[t],!0)},t.prototype.updateLineColor=function(t,e){return!!this._lineBuffer[t]&&(this._lineBuffer[t].rgbColor=e,!0)},t.prototype.addPointToLineBase=function(t,e){return!!this._lineBuffer[t]&&(this._lineBuffer[t].addVertex(e),!0)},t.prototype.removeShapeFromUnspecifiedBuffer=function(t){if(this._pointsShapeBuffer.removeShape(t))return!0;for(var e=0,r=this._dynamicShapeBuffers;e<r.length;e++){if(r[e].removeShape(t))return!0}return!1},t.prototype.updateShapeColorFromUnspecifiedBuffer=function(t,e){if(this._pointsShapeBuffer.updateColor(t,e))return!0;for(var r=0,i=this._dynamicShapeBuffers;r<i.length;r++){if(i[r].updateColor(t,e))return!0}return!1},t.prototype.createUniforNotFoundErrorMessage=function(t){var e="cannot find uniform in shader program\n";e+="potential culprits:\n";for(var r in t)t.hasOwnProperty(r)&&(e+="\t"+r+": "+t[r]+"\n");return e},t.prototype.drawPointShapeBufferBase=function(t,e){void 0===e&&(e=(new i.Mat4).setIdentity()),this.checkForUniforms();var r=t.verticies,n=t.first;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.glBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this._a_position,s.Constants.floatsPerPosition,this.gl.FLOAT,!1,s.Constants.bytesPerPointVertex,0),this.gl.enableVertexAttribArray(this._a_position),this.gl.vertexAttribPointer(this._a_color,s.Constants.floatsPerColor,this.gl.FLOAT,!1,s.Constants.bytesPerPointVertex,s.Constants.bytesPerPosition),this.gl.enableVertexAttribArray(this._a_color),this.gl.vertexAttribPointer(this._a_pointSize,s.Constants.floatsPerPointSize,this.gl.FLOAT,!1,s.Constants.bytesPerPointVertex,s.Constants.bytesPerPositionColor),this.gl.enableVertexAttribArray(this._a_pointSize),this.gl.uniformMatrix4fv(this._u_vpMatrix,!1,e.elements),this.gl.drawArrays(n.glRenderMode,0,r.length/s.Constants.floatsPerPointVertex)},t.prototype.drawDynamicShapeBufferBase=function(t,e){void 0===e&&(e=(new i.Mat4).setIdentity()),this.checkForUniforms();var r=t.verticies,n=t.first;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.glBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this._a_position,s.Constants.floatsPerPosition,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,0),this.gl.enableVertexAttribArray(this._a_position),this.gl.vertexAttribPointer(this._a_color,s.Constants.floatsPerColor,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,s.Constants.bytesPerPosition),this.gl.enableVertexAttribArray(this._a_color),this.gl.vertexAttribPointer(this._a_modelMatrixRow0,s.Constants.floatsPerMat4Row,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,s.Constants.modelMatrixRow0Offset),this.gl.enableVertexAttribArray(this._a_modelMatrixRow0),this.gl.vertexAttribPointer(this._a_modelMatrixRow1,s.Constants.floatsPerMat4Row,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,s.Constants.modelMatrixRow1Offset),this.gl.enableVertexAttribArray(this._a_modelMatrixRow1),this.gl.vertexAttribPointer(this._a_modelMatrixRow2,s.Constants.floatsPerMat4Row,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,s.Constants.modelMatrixRow2Offset),this.gl.enableVertexAttribArray(this._a_modelMatrixRow2),this.gl.vertexAttribPointer(this._a_modelMatrixRow3,s.Constants.floatsPerMat4Row,this.gl.FLOAT,!1,s.Constants.bytesPerDynamicVertex,s.Constants.modelMatrixRow3Offset),this.gl.enableVertexAttribArray(this._a_modelMatrixRow3),this.gl.uniformMatrix4fv(this._u_vpMatrix,!1,e.elements),this.gl.drawArrays(n.glRenderMode,0,r.length/s.Constants.floatsPerDynamicVertex)},t.prototype.drawLineBase=function(t,e){void 0===e&&(e=(new i.Mat4).setIdentity()),this.checkForUniforms();var r=t.verticies;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.glBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this._a_position,s.Constants.floatsPerPosition,this.gl.FLOAT,!1,s.Constants.bytesPerPointVertex,0),this.gl.enableVertexAttribArray(this._a_position),this.gl.vertexAttribPointer(this._a_color,s.Constants.floatsPerColor,this.gl.FLOAT,!1,s.Constants.bytesPerPointVertex,s.Constants.bytesPerPosition),this.gl.enableVertexAttribArray(this._a_color),this.gl.uniformMatrix4fv(this._u_vpMatrix,!1,e.elements),this.gl.drawArrays(t.glRenderMode,0,r.length/s.Constants.floatsPerPointVertex)},t.prototype.drawVertexBufferBase=function(t,e){void 0===e&&(e=(new i.Mat4).setIdentity()),this.checkForUniforms();for(var r=0,n=t.verticiesStack;r<n.length;r++){var o=n[r],a=o.arr;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.glBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this._a_position,s.Constants.floatsPerPosition,this.gl.FLOAT,!1,s.Constants.bytesPerPositionColor,0),this.gl.enableVertexAttribArray(this._a_position),this.gl.vertexAttribPointer(this._a_color,s.Constants.floatsPerColor,this.gl.FLOAT,!1,s.Constants.bytesPerPositionColor,s.Constants.bytesPerPosition),this.gl.enableVertexAttribArray(this._a_color),this.gl.uniformMatrix4fv(this._u_vpMatrix,!1,e.elements),this.gl.drawArrays(t.glRenderMode,0,a.length/s.Constants.floatsPerPositionColor)}},t.prototype.setCanvasEventHandlers=function(){this._canvas.addEventListener("webglcontextlost",this.handleContextLost,!1),this._canvas.addEventListener("webglcontextrestored",this.handleContextRestored,!1)},t.prototype.setupGlResources=function(){this.getContext(),this.setViewPortDimensions(this._canvas.width,this._canvas.height),this._pointShaderProgram=this.initShaders(this._pointVertexShaderSource,this._fragmentShaderSource),this._dynamicShapeShaderProgram=this.initShaders(this._dynamicVertexShaderSource,this._fragmentShaderSource),this._positionColorShaderProgram=this.initShaders(this._positionColorVertexShaderSource,this._fragmentShaderSource)},t.prototype.getContext=function(){var t,e=this._browserHelper.isIE(),r=this._browserHelper.isEdge(),i=e||r?"experimental-webgl":"webgl";try{t=this._canvas.getContext(i,{alpha:!1,antialias:!1,depth:!0})}catch(t){throw"error creating webgl context!: "+t.toString()}if(null===t)throw"error creating webgl context!, gl === null";this._isContextLost=!1,this.gl=t},t.prototype.initializeRenderingOptions=function(t){this._backgroundColor=t&&t.backgroundColor||h.Settings.defaultBackgroundColor,this._window=t&&t.window||window,this._isFullscreen=t&&t.fullscreen||h.Settings.defaultIsFullScreen,this._calcWidth=t&&t.calcWidth||this.defaultCalcWidth,this._calcHeight=t&&t.calcHeight||this.defaultCalcHeight},t.prototype.initializaBuffers=function(){this.initializaShapeBuffers(),this.initializeVertexBuffers()},t.prototype.initializaShapeBuffers=function(){this.initializaDynamicShapeBuffers(),this.initializeVertexBuffers(),this._pointsShapeBuffer=new c.PointBuffer(this.gl),this._lineBuffer={}},t.prototype.initializeVertexBuffers=function(){this._pointsVertexBuffer=new l.VertexBuffer(this.gl.POINTS,this.gl),this._linesVertexBuffer=new l.VertexBuffer(this.gl.LINES,this.gl),this._lineStripVertexBuffer=new l.VertexBuffer(this.gl.LINE_STRIP,this.gl),this._lineLoopVertexBuffer=new l.VertexBuffer(this.gl.LINE_LOOP,this.gl),this._trianglesVertexBuffer=new l.VertexBuffer(this.gl.TRIANGLES,this.gl),this._triangleStripVertexBuffer=new l.VertexBuffer(this.gl.TRIANGLE_STRIP,this.gl),this._triangleFanVertexBuffer=new l.VertexBuffer(this.gl.TRIANGLE_FAN,this.gl),this._vertexBuffers=[this._pointsVertexBuffer,this._linesVertexBuffer,this._lineStripVertexBuffer,this._lineLoopVertexBuffer,this._trianglesVertexBuffer,this._triangleStripVertexBuffer,this._triangleFanVertexBuffer]},t.prototype.refreshAllWebGlBuffers=function(){this._pointsShapeBuffer.refreshWebglBuffer();for(var t in this._lineBuffer)if(this._lineBuffer[t]){var e=this._lineBuffer[t];e.refreshWebglBuffer()}for(var r=0,i=this._dynamicShapeBuffers;r<i.length;r++){i[r].refreshWebglBuffer()}for(var n=0,o=this._vertexBuffers;n<o.length;n++){o[n].refreshWebglBuffer()}},t.prototype.getDynamicShapeShaderVariables=function(){this.getShaderVariables(this._dynamicShapeShaderProgram),this._a_modelMatrixRow0=this.gl.getAttribLocation(this._dynamicShapeShaderProgram,a.ShaderSettings.modelMatrixAttributeName),this._a_modelMatrixRow1=this._a_modelMatrixRow0+1,this._a_modelMatrixRow2=this._a_modelMatrixRow0+2,this._a_modelMatrixRow3=this._a_modelMatrixRow0+3},t.prototype.getPointShaderVariables=function(){this.getShaderVariables(this._pointShaderProgram),this._a_pointSize=this.gl.getAttribLocation(this._pointShaderProgram,a.ShaderSettings.pointSizeAttributeName)},t.prototype.getShaderVariables=function(t){this._a_position=this.gl.getAttribLocation(t,a.ShaderSettings.positionAttributeName),this._a_color=this.gl.getAttribLocation(t,a.ShaderSettings.colorAttributeName),this._u_vpMatrix=this.gl.getUniformLocation(t,a.ShaderSettings.vpMatrixUniformName)},t.prototype.initShaders=function(t,e){var r=this.createShader(t,u.ShaderType.vertex),i=this.createShader(e,u.ShaderType.fragment),n=this.gl.createProgram();if(null===n)throw"could not create shader program";var o=n;if(this.gl.attachShader(o,r),this.gl.attachShader(o,i),this.gl.linkProgram(o),!this.gl.getProgramParameter(o,this.gl.LINK_STATUS))throw"could not link shader program";return o},t.prototype.createShader=function(t,e){var r=null;if("fragment"===e?r=this.gl.createShader(this.gl.FRAGMENT_SHADER):"vertex"===e&&(r=this.gl.createShader(this.gl.VERTEX_SHADER)),this.gl.shaderSource(r,t),this.gl.compileShader(r),!this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS))throw"could not compile shader, shader info log: "+this.gl.getShaderInfoLog(r);return r},t.prototype.checkForUniforms=function(){if(!this._u_vpMatrix){var t={};t[a.ShaderSettings.vpMatrixUniformName]=this._u_vpMatrix;throw this.createUniforNotFoundErrorMessage(t)}},t.prototype.setupWindowCallbacks=function(){var t=this;this._isFullscreen&&(this._window.addEventListener("resize",function(){t._isContextLost||t.resizeCanvas(t._canvas,t._window,t)},!1),this.resizeCanvas(this._canvas,this._window,this))},t}();e.WebGLRenderer=p},function(t,e,r){!function(e){"use strict";var r=0,i=Math.pow(36,4),n=function(t,e){var r="000000000"+t;return r.substr(r.length-e)},o=function(){return n((Math.random()*i<<0).toString(36),4)},s=function(){return r=r<i?r:0,++r-1},a=function(){var t,e=(new Date).getTime().toString(36),r=a.fingerprint(),i=o()+o();return t=n(s().toString(36),4),"c"+e+t+r+i};a.slug=function(){var t,e=(new Date).getTime().toString(36),r=a.fingerprint().slice(0,1)+a.fingerprint().slice(-1),i=o().slice(-2);return t=s().toString(36).slice(-4),e.slice(-2)+t+r+i},a.globalCount=function(){var t=function(){var t,e=0;for(t in window)e++;return e}();return a.globalCount=function(){return t},t},a.fingerprint=function(){return n((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+a.globalCount().toString(36),4)},e.register?e.register("cuid",a):t.exports=a}(this.applitude||this)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.isIE=function(){return!!document.documentMode},t.prototype.isEdge=function(){return!this.isIE()&&!!window.StyleMedia},t}();e.BrowserHelper=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this._gl=t,this._glBuffer=this._gl.createBuffer()}return Object.defineProperty(t.prototype,"glBuffer",{get:function(){return this._glBuffer},enumerable:!0,configurable:!0}),t.prototype.refreshWebglBuffer=function(){this._gl.deleteBuffer(this._glBuffer),this._glBuffer=this._gl.createBuffer()},t}();e.GlBufferWrapper=i},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(10),s=r(11),a=r(12),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.createPoint=function(t,e,r,i){var o=new n.Vec3(t.x,t.y,0);return new s.Point(o,e,r,i)},e.prototype.createLine=function(t,e,r){var i=new n.Vec3(t.x,t.y,0);return new a.Line(i,e,r)},e.prototype.createShape=function(t,e,r,i,o,s){var a=new n.Vec3(t.x,t.y,0),u=new n.Vec3(e.x,e.y,0);switch(r){case"points":throw Error("cannot create a point with this method, please use createPoint");case"lines":throw Error("cannot create a line with this method, please use createLine");case"triangles":return this.createTriangle(a,u,i,o);case"rectangles":return this.createRectangle(a,u,i,o);case"hexagons":return this.createHexagon(a,u,i,o);case"octogons":return this.createOctogon(a,u,i,o);case"ellipses":return this.createEllipse(a,u,i,o);case"box":throw Error("cannot create 3d shape("+r+"), use WebGLRenderer3d instead");default:throw Error("cannot recognize shape type "+r)}},e}(o.ShapeFactory);e.ShapeFactory2d=u},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(3),s=r(6),a=r(20),u=r(1),h=r(2),f=function(t){function e(r,i,n,o,u){void 0===o&&(o=a.Precision.High);var f=t.call(this,o===a.Precision.High?e.highPrecisionNumberOfVerticies:e.lowPrecisionNumberOfVerticies,r,i,u)||this;return f.shapeMode=h.ShapeMode.ellipses,f.horizontalRadius=(f._boundingRect.topRight.x-f._boundingRect.topLeft.x)/2,f.verticalRadius=(f._boundingRect.topLeft.y-f._boundingRect.bottomLeft.y)/2,f.center=s.Midpoint.between(f._boundingRect.topLeft,f._boundingRect.bottomRight),f.leftEndPoint=s.Midpoint.between(f._boundingRect.topLeft,f._boundingRect.bottomLeft),f.rightEndPoint=s.Midpoint.between(f._boundingRect.topRight,f._boundingRect.bottomRight),f.precision=o,f.computeVerticies(),f.glRenderMode=n.TRIANGLES,f.numberOfVerticies=f.precision===a.Precision.High?e.highPrecisionNumberOfVerticies:e.lowPrecisionNumberOfVerticies,f}return i(e,t),e.prototype.computeVerticies=function(){var t;this.precision===a.Precision.High?(t=e.highPrecisionNumberOfPointsAlongCurve,e.highPrecisionNumberOfVerticies):this.precision===a.Precision.Low&&(t=e.lowPrecisionNumberOfPointsAlongCurve,e.lowPrecisionNumberOfVerticies);for(var r=this.leftEndPoint.x,i=2*this.horizontalRadius/(t/2),o=this.leftEndPoint,s=this.leftEndPoint,h=0,f=0;f<t/2-1;f++){r+=i;var c=this.getYDistanceFromCenterForX(r),l=new n.Vec3(r,c+this.center.y),p=new n.Vec3(r,this.center.y-c);this.addTriangleToVerticies(h,o,this.center,l),h+=u.Constants.floatsPerTriangle,this.addTriangleToVerticies(h,s,this.center,p),h+=u.Constants.floatsPerTriangle,o=l,s=p}this.addTriangleToVerticies(h,o,this.center,this.rightEndPoint),h+=u.Constants.floatsPerTriangle,this.addTriangleToVerticies(h,s,this.center,this.rightEndPoint)},e.prototype.getYDistanceFromCenterForX=function(t){var e=Math.pow(this.verticalRadius,2);return Math.sqrt(e-e*Math.pow(t-this.center.x,2)/Math.pow(this.horizontalRadius,2))},e.numberOfEndPoints=2,e.highPrecisionNumberOfPointsAlongCurve=400+e.numberOfEndPoints,e.highPrecisionNumberOfVerticies=e.highPrecisionNumberOfPointsAlongCurve*u.Constants.verticiesPerTriangle,e.lowPrecisionNumberOfPointsAlongCurve=8+e.numberOfEndPoints,e.lowPrecisionNumberOfVerticies=e.lowPrecisionNumberOfPointsAlongCurve*u.Constants.verticiesPerTriangle,e}(o.DynamicShape);e.Ellipse=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=function(){function t(t,e){this.isTopLeftBottomRight(t,e)?(this.topLeft=t,this.topRight=new i.Vec3(e.x,t.y,e.z),this.bottomRight=e,this.bottomLeft=new i.Vec3(t.x,e.y,t.z)):this.isBottomRightTopLeft(t,e)?(this.topLeft=e,this.topRight=new i.Vec3(t.x,e.y,t.z),this.bottomRight=t,this.bottomLeft=new i.Vec3(e.x,t.y,e.z)):this.isBottomLeftTopRight(t,e)?(this.topLeft=new i.Vec3(t.x,e.y,t.z),this.topRight=e,this.bottomRight=new i.Vec3(e.x,t.y,e.z),this.bottomLeft=t):(this.topLeft=new i.Vec3(e.x,t.y,e.z),this.topRight=t,this.bottomRight=new i.Vec3(t.x,e.y,t.z),this.bottomLeft=e)}return t.prototype.isTopLeftBottomRight=function(t,e){return t.x<=e.x&&t.y>=e.y},t.prototype.isBottomRightTopLeft=function(t,e){return t.x>=e.x&&t.y<=e.y},t.prototype.isBottomLeftTopRight=function(t,e){return t.x<=e.x&&t.y<=e.y},t}();e.BoundingRectangle=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Low=0]="Low",t[t.High=1]="High"}(e.Precision||(e.Precision={}))},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),o=r(6),s=r(2),a=function(t){function e(r,i,n,o){var a=t.call(this,e.numberOfVerticies,r,i,o)||this;return a.shapeMode=s.ShapeMode.triangles,a.computeVerticies(),a.glRenderMode=n.TRIANGLES,a}return i(e,t),e.prototype.computeVerticies=function(){var t=o.Midpoint.between(this._boundingRect.topLeft,this._boundingRect.topRight);this.addTriangleToVerticies(0,this._boundingRect.bottomLeft,t,this._boundingRect.bottomRight)},e.numberOfVerticies=3,e}(n.DynamicShape);e.Triangle=a},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),o=r(1),s=r(2),a=function(t){function e(r,i,n,o){var a=t.call(this,e.numberOfVerticies,r,i,o)||this;return a.shapeMode=s.ShapeMode.rectangles,a.computeVerticies(),a.glRenderMode=n.TRIANGLES,a}return i(e,t),e.prototype.computeVerticies=function(){var t=0;this.addTriangleToVerticies(t,this._boundingRect.topLeft,this._boundingRect.topRight,this._boundingRect.bottomLeft),t+=o.Constants.floatsPerTriangle,this.addTriangleToVerticies(t,this._boundingRect.bottomLeft,this._boundingRect.topRight,this._boundingRect.bottomRight)},e.numberOfVerticies=6,e}(n.DynamicShape);e.Rectangle=a},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),o=r(6),s=r(1),a=r(2),u=function(t){function e(r,i,n,o){var s=t.call(this,e.numberOfVerticies,r,i,o)||this;return s.shapeMode=a.ShapeMode.hexagons,s.computeVerticies(),s.glRenderMode=n.TRIANGLES,s}return i(e,t),e.prototype.computeVerticies=function(){var t=o.ThirdPoints.between(this._boundingRect.topLeft,this._boundingRect.topRight),e=t.first,r=t.second,i=o.ThirdPoints.between(this._boundingRect.bottomRight,this._boundingRect.bottomLeft),n=i.first,a=i.second,u=o.Midpoint.between(this._boundingRect.bottomLeft,this._boundingRect.topLeft),h=o.Midpoint.between(this._boundingRect.topRight,this._boundingRect.bottomRight),f=0;this.addTriangleToVerticies(f,e,n,u),f+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(f,e,n,a),f+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(f,e,r,a),f+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(f,r,a,h)},e.numberOfVerticies=12,e}(n.DynamicShape);e.Hexagon=u},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),o=r(6),s=r(1),a=r(2),u=function(t){function e(r,i,n,o){var s=t.call(this,e.numberOfVerticies,r,i,o)||this;return s.shapeMode=a.ShapeMode.octogons,s.computeVerticies(),s.glRenderMode=n.TRIANGLES,s}return i(e,t),e.prototype.computeVerticies=function(){var t=o.ThirdPoints.between(this._boundingRect.topLeft,this._boundingRect.topRight),e=o.ThirdPoints.between(this._boundingRect.topRight,this._boundingRect.bottomRight),r=o.ThirdPoints.between(this._boundingRect.bottomLeft,this._boundingRect.bottomRight),i=o.ThirdPoints.between(this._boundingRect.topLeft,this._boundingRect.bottomLeft),n=t.first,a=t.second,u=e.second,h=e.first,f=r.first,c=r.second,l=i.second,p=i.first,d=0;this.addTriangleToVerticies(d,l,n,p),d+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(d,p,n,f),d+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(d,f,n,c),d+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(d,n,c,a),d+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(d,a,c,h),d+=s.Constants.floatsPerTriangle,this.addTriangleToVerticies(d,a,h,u)},e.numberOfVerticies=18,e}(n.DynamicShape);e.Octogon=u},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(3),s=r(19),a=r(1),u=r(2),h=function(t){function e(r,i,n,o){var s=t.call(this,e.numberOfVerticies,r,i,o)||this;s.shapeMode=u.ShapeMode.box;var a=s._boundingRect.topRight.x-s._boundingRect.topLeft.x,h=s._boundingRect.topRight.y-s._boundingRect.bottomRight.y,f=Math.min(a,h);return s._backFaceZ=s._boundingRect.bottomLeft.z+f,s.computeVerticies(),s.glRenderMode=n.TRIANGLES,s}return i(e,t),e.prototype.computeVerticies=function(){var t=0;this.addTriangleToVerticies(t,this._boundingRect.topLeft,this._boundingRect.topRight,this._boundingRect.bottomLeft),t+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(t,this._boundingRect.bottomLeft,this._boundingRect.topRight,this._boundingRect.bottomRight),t+=a.Constants.floatsPerTriangle;var e=new s.BoundingRectangle(this._boundingRect.topRight,new n.Vec3(this._boundingRect.bottomRight.x,this._boundingRect.bottomRight.y,this._backFaceZ));this.addTriangleToVerticies(t,e.topLeft,e.topRight,e.bottomLeft),t+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(t,e.bottomLeft,e.topRight,e.bottomRight),t+=a.Constants.floatsPerTriangle;var r=new s.BoundingRectangle(this._boundingRect.topLeft,new n.Vec3(this._boundingRect.bottomLeft.x,this._boundingRect.bottomLeft.y,this._backFaceZ));this.addTriangleToVerticies(t,r.topLeft,r.topRight,r.bottomLeft),t+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(t,r.bottomLeft,r.topRight,r.bottomRight),t+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(t,r.topRight,e.topRight,r.bottomRight),t+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(t,r.bottomRight,e.topRight,e.bottomRight),t+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(t,r.topRight,e.topRight,r.topLeft),t+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(t,r.topLeft,e.topRight,e.topLeft),t+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(t,r.bottomRight,e.bottomRight,r.bottomLeft),t+=a.Constants.floatsPerTriangle,this.addTriangleToVerticies(t,r.bottomLeft,e.bottomRight,e.bottomLeft)},e.numberOfVerticies=36,e}(o.DynamicShape);e.Box=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=r(4),o=function(){function t(t,e,r,o,s,a,u){void 0===e&&(e=n.Settings.defaultFieldOfView),void 0===r&&(r=n.Settings.defaultNear),void 0===o&&(o=n.Settings.defaultFar),void 0===s&&(s=n.Settings.defaultEyePosition),void 0===a&&(a=n.Settings.defaultLookAtPoint),void 0===u&&(u=n.Settings.defaultUpPosition),this._viewMatrix=new i.Mat4,this._projectionMatrix=new i.Mat4,this._vpMatrix=new i.Mat4,this._eyePosition=s,this._lookAtPoint=a,this._upPosition=u,this.updateView(),this._aspectRatio=t,this._fieldOfView=e,this._near=r,this._far=o,this.updatePerspective()}return Object.defineProperty(t.prototype,"vpMatrix",{get:function(){return this._vpMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewMatrix",{get:function(){return this._viewMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"projectionMatrix",{get:function(){return this._projectionMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aspectRatio",{get:function(){return this._aspectRatio},set:function(t){this._aspectRatio=t,this.updatePerspective()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldOfView",{get:function(){return this._fieldOfView},set:function(t){this._fieldOfView=t,this.updatePerspective()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return this._near},set:function(t){this._near=t,this.updatePerspective()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"far",{get:function(){return this._far},set:function(t){this._far=t,this.updatePerspective()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eyePosition",{get:function(){return this._eyePosition},set:function(t){this._eyePosition=t,this.updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lookAtPoint",{get:function(){return this._lookAtPoint},set:function(t){this._lookAtPoint=t,this.updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"upPosition",{get:function(){return this._upPosition},set:function(t){this._upPosition=t,this.updateView()},enumerable:!0,configurable:!0}),t.prototype.panX=function(t){this._eyePosition=new i.Vec3(this._eyePosition.x+t,this._eyePosition.y,this._eyePosition.z),this._lookAtPoint=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this.updateView()},t.prototype.panY=function(t){this._eyePosition=new i.Vec3(this._eyePosition.x,this._eyePosition.y+t,this._eyePosition.z),this._lookAtPoint=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this.updateView()},t.prototype.zoomIn=function(t){void 0===t&&(t=.01),this._eyePosition=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-t),this._lookAtPoint=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this.updateView()},t.prototype.zoomOut=function(t){void 0===t&&(t=.01),this._eyePosition=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z+t),this._lookAtPoint=new i.Vec3(this._eyePosition.x,this._eyePosition.y,this._eyePosition.z-1),this.updateView()},t.prototype.updateView=function(){this._viewMatrix.setLookAt(this.eyePosition.x,this.eyePosition.y,this.eyePosition.z,this.lookAtPoint.x,this.lookAtPoint.y,this.lookAtPoint.z,this.upPosition.x,this.upPosition.y,this.upPosition.z),this.updateViewProjectionMatrix()},t.prototype.updatePerspective=function(){this._projectionMatrix.setPerspective(this._fieldOfView,this._aspectRatio,this._near,this._far),this.updateViewProjectionMatrix()},t.prototype.updateViewProjectionMatrix=function(){this._vpMatrix=(new i.Mat4).setIdentity(),this._vpMatrix.multiply(this._projectionMatrix),this._vpMatrix.multiply(this._viewMatrix)},t}();e.Camera=o},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(10),s=r(11),a=r(12),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.createPoint=function(t,e,r,i){return new s.Point(t,e,r,i)},e.prototype.createLine=function(t,e,r){var i=new n.Vec3(t.x,t.y,0);return new a.Line(i,e,r)},e.prototype.createShape=function(t,e,r,i,n){switch(r){case"points":throw Error("cannot create a point with this method, please use createPoint");case"lines":throw Error("cannot create a line with this method, please use createLine");case"triangles":return this.createTriangle(t,e,i,n);case"rectangles":return this.createRectangle(t,e,i,n);case"hexagons":return this.createHexagon(t,e,i,n);case"octogons":return this.createOctogon(t,e,i,n);case"ellipses":return this.createEllipse(t,e,i,n);case"box":return this.createBox(t,e,i,n);default:throw Error("cannot recognize shape type "+r)}},e}(o.ShapeFactory);e.ShapeFactory3d=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,r){this.red=t,this.green=e,this.blue=r}return t}();e.RGBColor=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(30);e.WebGLRenderer2d=i.WebGLRenderer2d;var n=r(44);e.WebGLRenderer3d=n.WebGLRenderer3d;var o=r(0);e.Vec2=o.Vec2,e.Vec3=o.Vec3,e.Mat4=o.Mat4;var s=r(28);e.RGBColor=s.RGBColor;var a=r(45);e.Color=a.Color,e.ColorMapper=a.ColorMapper;var u=r(7);e.RenderMode=u.RenderMode,e.RenderModeMapper=u.RenderModeMapper;var h=r(5);e.Shape=h.Shape;var f=r(3);e.DynamicShape=f.DynamicShape;var c=r(10);e.ShapeFactory=c.ShapeFactory;var l=r(17);e.ShapeFactory2d=l.ShapeFactory2d;var p=r(27);e.ShapeFactory3d=p.ShapeFactory3d;var d=r(2);e.ShapeMode=d.ShapeMode;var g=r(12);e.Line=g.Line;var _=r(18);e.Ellipse=_.Ellipse;var y=r(22);e.Rectangle=y.Rectangle;var v=r(23);e.Hexagon=v.Hexagon;var b=r(24);e.Octogon=b.Octogon;var m=r(21);e.Triangle=m.Triangle;var w=r(11);e.Point=w.Point;var P=r(25);e.Box=P.Box;var S=r(26);e.Camera=S.Camera;var x=r(15);e.BrowserHelper=x.BrowserHelper;var R=r(46);e.MouseHelper=R.MouseHelper},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(13),o=r(8),s=r(17),a=r(0),u=function(t){function e(e,r){void 0===r&&(r={});var i=t.call(this,e,r)||this;return i._shapeFactory=new s.ShapeFactory2d,i}return i(e,t),Object.defineProperty(e.prototype,"shapeFactory",{get:function(){return this._shapeFactory},enumerable:!0,configurable:!0}),e.prototype.addShapeToScene=function(t){switch(t.shapeMode){case"points":return this._pointsShapeBuffer.addShape(t);case"lines":return this.addLine(t);case"triangles":return this._trianglesShapeBuffer.addShape(t);case"rectangles":return this._rectanglesShapeBuffer.addShape(t);case"hexagons":return this._hexagonsShapeBuffer.addShape(t);case"octogons":return this._octogonsShapeBuffer.addShape(t);case"ellipses":return this._ellipsesShapeBuffer.addShape(t);case"box":throw"adding 3d shape("+t.shapeMode+") to 2d scene is not supported"}return""},e.prototype.addHomogenoeusShapesArrayToScene=function(t){var e=t[0];if(!e)return new Array;switch(e.shapeMode){case"points":return this._pointsShapeBuffer.addShapes(t);case"lines":return this.addLines(t);case"triangles":return this._trianglesShapeBuffer.addShapes(t);case"rectangles":return this._rectanglesShapeBuffer.addShapes(t);case"hexagons":return this._hexagonsShapeBuffer.addShapes(t);case"octogons":return this._octogonsShapeBuffer.addShapes(t);case"ellipses":return this._ellipsesShapeBuffer.addShapes(t);case"box":throw"adding 3d shape("+e.shapeMode+") to 2d scene is not supported"}return new Array},e.prototype.addVertexToScene=function(t,e,r){var i=new a.Vec3(t.x,t.y,0);this.addVertexToSceneBase(i,e,r)},e.prototype.addPointToLine=function(t,e){var r=new a.Vec3(e.x,e.y,0);return this.addPointToLineBase(t,r)},e.prototype.removeShape=function(t,e){switch(e){case"points":return this._pointsShapeBuffer.removeShape(t);case"lines":return this.removeLine(t);case"triangles":return this._trianglesShapeBuffer.removeShape(t);case"rectangles":return this._rectanglesShapeBuffer.removeShape(t);case"hexagons":return this._hexagonsShapeBuffer.removeShape(t);case"octogons":return this._octogonsShapeBuffer.removeShape(t);case"ellipses":return this._ellipsesShapeBuffer.removeShape(t)}return this.removeShapeFromUnspecifiedBuffer(t)},e.prototype.updateShapeColor=function(t,e,r){switch(r){case"points":return this._pointsShapeBuffer.updateColor(t,e);case"lines":return this.updateLineColor(t,e);case"triangles":return this._trianglesShapeBuffer.updateColor(t,e);case"rectangles":return this._rectanglesShapeBuffer.updateColor(t,e);case"hexagons":return this._hexagonsShapeBuffer.updateColor(t,e);case"octogons":return this._octogonsShapeBuffer.updateColor(t,e);case"ellipses":return this._ellipsesShapeBuffer.updateColor(t,e)}return this.updateShapeColorFromUnspecifiedBuffer(t,e)},e.prototype.drawPointShapeBuffer=function(t){this.drawPointShapeBufferBase(t)},e.prototype.drawLine=function(t){this.drawLineBase(t)},e.prototype.drawDynamicShapeBuffer=function(t){this.drawDynamicShapeBufferBase(t)},e.prototype.drawVertexBuffer=function(t){this.drawVertexBufferBase(t)},e.prototype.initializaDynamicShapeBuffers=function(){this._trianglesShapeBuffer=new o.ShapeBuffer(this.gl),this._rectanglesShapeBuffer=new o.ShapeBuffer(this.gl),this._hexagonsShapeBuffer=new o.ShapeBuffer(this.gl),this._octogonsShapeBuffer=new o.ShapeBuffer(this.gl),this._ellipsesShapeBuffer=new o.ShapeBuffer(this.gl),this._dynamicShapeBuffers=[this._trianglesShapeBuffer,this._rectanglesShapeBuffer,this._hexagonsShapeBuffer,this._octogonsShapeBuffer,this._ellipsesShapeBuffer]},e}(n.WebGLRenderer);e.WebGLRenderer2d=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShaderSettings={positionAttributeName:"a_position",colorAttributeName:"a_color",modelMatrixAttributeName:"a_modelMatrix",pointSizeAttributeName:"a_pointSize",vpMatrixUniformName:"u_vpMatrix"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t.fragment="fragment",t.vertex="vertex"}(e.ShaderType||(e.ShaderType={}))},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(8),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.updatePointSize=function(t,e){if(this._shapes.hasOwnProperty(t)){var r=this._shapes[t].shape,i=this._shapes[t].index;r.pointSize=e;var n=r.numberOfVerticies*r.numberOfFloatsPerVertex,o=i*n;return this._verticies.overwrite(o,r.verticies),this._trimmedArray=this._verticies.getTrimmedArray(),this.refreshWebglBuffer(),!0}return!1},e}(n.ShapeBuffer);e.PointBuffer=o},function(t,e,r){"use strict";(function(e){function i(t,e,r){var i=t.BYTES_PER_ELEMENT,n=t.byteOffset,o=t.length;return e=0|e||0,r=void 0===r?o:0|r,e<0&&(e+=o),r<0&&(r+=o),new t.constructor(t.buffer.slice(n+i*e,n+i*r))}function n(t,r,i){var n=0|t.length,o=r||0,s=void 0===i?n:i;if(o<0&&(o+=n),s<0&&(s+=n),s-o<=0)return new e(0);var a=new e(s-o);return t.copy(a,0,o,s),a}function o(t,r,o){return t.buffer?i(t,r,o):t instanceof e?n(t,r,o):t.slice?t.slice(r,o):a(t,r,o)}function s(t,e,r){return t.buffer?i(t,e,r):t.slice?t.slice(e,r):a(t,e,r)}var a=r(40);t.exports=void 0===typeof e?s:o}).call(e,r(35).Buffer)},function(t,e,r){"use strict";(function(t){function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function n(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return s(this,t,e,r)}function s(t,e,r,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?l(t,e,r,i):"string"==typeof e?f(t,e,r):p(t,e)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,r,i){return a(e),e<=0?n(t,e):void 0!==r?"string"==typeof i?n(t,e).fill(r,i):n(t,e).fill(r):n(t,e)}function h(t,e){if(a(e),t=n(t,e<0?0:0|d(e)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|_(e,r);t=n(t,i);var s=t.write(e,r);return s!==i&&(t=t.slice(0,s)),t}function c(t,e){var r=e.length<0?0:0|d(e.length);t=n(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function l(t,e,r,i){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,r):new Uint8Array(e,r,i),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=c(t,e),t}function p(t,e){if(o.isBuffer(e)){var r=0|d(e.length);return t=n(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||q(e.length)?n(t,0):c(t,e);if("Buffer"===e.type&&Q(e.data))return c(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function g(t){return+t!=t&&(t=0),o.alloc(+t)}function _(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(t).length;default:if(i)return G(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,r){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,r);case"utf8":case"utf-8":return M(this,e,r);case"ascii":return O(this,e,r);case"latin1":case"binary":return T(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function v(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function b(t,e,r,i,n){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof e&&(e=o.from(e,i)),o.isBuffer(e))return 0===e.length?-1:m(t,e,r,i,n);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,i,n){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}var h;if(n){var f=-1;for(h=r;h<a;h++)if(o(t,h)===o(e,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===u)return f*s}else-1!==f&&(h-=h-f),f=-1}else for(r+u>a&&(r=a-u),h=r;h>=0;h--){for(var c=!0,l=0;l<u;l++)if(o(t,h+l)!==o(e,l)){c=!1;break}if(c)return h}return-1}function w(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function P(t,e,r,i){return Z(G(e,t.length-r),t,r,i)}function S(t,e,r,i){return Z(W(e),t,r,i)}function x(t,e,r,i){return S(t,e,r,i)}function R(t,e,r,i){return Z(X(e),t,r,i)}function B(t,e,r,i){return Z(H(e,t.length-r),t,r,i)}function A(t,e,r){return 0===e&&r===t.length?J.fromByteArray(t):J.fromByteArray(t.slice(e,r))}function M(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var o=t[n],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n+a<=r){var u,h,f,c;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[n+1],128==(192&u)&&(c=(31&o)<<6|63&u)>127&&(s=c);break;case 3:u=t[n+1],h=t[n+2],128==(192&u)&&128==(192&h)&&(c=(15&o)<<12|(63&u)<<6|63&h)>2047&&(c<55296||c>57343)&&(s=c);break;case 4:u=t[n+1],h=t[n+2],f=t[n+3],128==(192&u)&&128==(192&h)&&128==(192&f)&&(c=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&f)>65535&&c<1114112&&(s=c)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),n+=a}return V(i)}function V(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var r="",i=0;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=$));return r}function O(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}function T(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function C(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=e;o<r;++o)n+=Y(t[o]);return n}function L(t,e,r){for(var i=t.slice(e,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function E(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function F(t,e,r,i,n,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function z(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-r,2);n<o;++n)t[r+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function j(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-r,4);n<o;++n)t[r+n]=e>>>8*(i?n:3-n)&255}function I(t,e,r,i,n,o){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(t,e,r,i,n){return n||I(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,r,i,23,4),r+4}function U(t,e,r,i,n){return n||I(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,r,i,52,8),r+8}function k(t){if(t=D(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function D(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){e=e||1/0;for(var r,i=t.length,n=null,o=[],s=0;s<i;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function H(t,e){for(var r,i,n,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),i=r>>8,n=r%256,o.push(n),o.push(i);return o}function X(t){return J.toByteArray(k(t))}function Z(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function q(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var J=r(37),K=r(38),Q=r(39);e.Buffer=o,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=i(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,r){return s(null,t,e,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,r){return u(null,t,e,r)},o.allocUnsafe=function(t){return h(null,t)},o.allocUnsafeSlow=function(t){return h(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,n=0,s=Math.min(r,i);n<s;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var i=o.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){var s=t[r];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},o.byteLength=_,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):y.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,i,n){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||r>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&e>=r)return 0;if(i>=n)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,i>>>=0,n>>>=0,this===t)return 0;for(var s=n-i,a=r-e,u=Math.min(s,a),h=this.slice(i,n),f=t.slice(e,r),c=0;c<u;++c)if(h[c]!==f[c]){s=h[c],a=f[c];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return b(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return b(this,t,e,r,!1)},o.prototype.write=function(t,e,r,i){if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-e;if((void 0===r||r>n)&&(r=n),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return P(this,t,e,r);case"ascii":return S(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return R(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var i;if(o.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=o.prototype;else{var n=e-t;i=new o(n,void 0);for(var s=0;s<n;++s)i[s]=this[s+t]}return i},o.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return i},o.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var i=this[t+--e],n=1;e>0&&(n*=256);)i+=this[t+--e]*n;return i},o.prototype.readUInt8=function(t,e){return e||E(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||E(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||E(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||E(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*e)),i},o.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||E(t,e,this.length);for(var i=e,n=1,o=this[t+--i];i>0&&(n*=256);)o+=this[t+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||E(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||E(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){e||E(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||E(t,4,this.length),K.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||E(t,4,this.length),K.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||E(t,8,this.length),K.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||E(t,8,this.length),K.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,i){if(t=+t,e|=0,r|=0,!i){F(this,t,e,r,Math.pow(2,8*r)-1,0)}var n=1,o=0;for(this[e]=255&t;++o<r&&(n*=256);)this[e+o]=t/n&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,i){if(t=+t,e|=0,r|=0,!i){F(this,t,e,r,Math.pow(2,8*r)-1,0)}var n=r-1,o=1;for(this[e+n]=255&t;--n>=0&&(o*=256);)this[e+n]=t/o&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);F(this,t,e,r,n-1,-n)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},o.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);F(this,t,e,r,n-1,-n)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,r){return N(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return N(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return U(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return U(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,i){if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var n,s=i-r;if(this===t&&r<e&&e<i)for(n=s-1;n>=0;--n)t[n+e]=this[n+r];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},o.prototype.fill=function(t,e,r,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=o.isBuffer(t)?t:G(new o(t,i).toString()),u=a.length;for(s=0;s<r-e;++s)this[s+e]=a[s%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,r(36))},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";function i(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function n(t){var e=i(t),r=e[0],n=e[1];return 3*(r+n)/4-n}function o(t,e,r){return 3*(e+r)/4-r}function s(t){var e,r,n=i(t),s=n[0],a=n[1],u=new l(o(t,s,a)),h=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)e=c[t.charCodeAt(r)]<<18|c[t.charCodeAt(r+1)]<<12|c[t.charCodeAt(r+2)]<<6|c[t.charCodeAt(r+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;return 2===a&&(e=c[t.charCodeAt(r)]<<2|c[t.charCodeAt(r+1)]>>4,u[h++]=255&e),1===a&&(e=c[t.charCodeAt(r)]<<10|c[t.charCodeAt(r+1)]<<4|c[t.charCodeAt(r+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e),u}function a(t){return f[t>>18&63]+f[t>>12&63]+f[t>>6&63]+f[63&t]}function u(t,e,r){for(var i,n=[],o=e;o<r;o+=3)i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),n.push(a(i));return n.join("")}function h(t){for(var e,r=t.length,i=r%3,n=[],o=0,s=r-i;o<s;o+=16383)n.push(u(t,o,o+16383>s?s:o+16383));return 1===i?(e=t[r-1],n.push(f[e>>2]+f[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],n.push(f[e>>10]+f[e>>4&63]+f[e<<2&63]+"=")),n.join("")}e.byteLength=n,e.toByteArray=s,e.fromByteArray=h;for(var f=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,g=p.length;d<g;++d)f[d]=p[d],c[p.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,i,n){var o,s,a=8*n-i-1,u=(1<<a)-1,h=u>>1,f=-7,c=r?n-1:0,l=r?-1:1,p=t[e+c];for(c+=l,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=256*o+t[e+c],c+=l,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=i;f>0;s=256*s+t[e+c],c+=l,f-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=h}return(p?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,r,i,n,o){var s,a,u,h=8*o-n-1,f=(1<<h)-1,c=f>>1,l=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+c>=1?l/u:l*Math.pow(2,1-c),e*u>=2&&(s++,u/=2),s+c>=f?(a=0,s=f):s+c>=1?(a=(e*u-1)*Math.pow(2,n),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,n),s=0));n>=8;t[r+p]=255&a,p+=d,a/=256,n-=8);for(s=s<<n|a,h+=n;h>0;t[r+p]=255&s,p+=d,s/=256,h-=8);t[r+p-d]|=128*g}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){t.exports=r(41)},function(t,e){t.exports=function(t,e,r){var i=[],n=t.length;if(0===n)return i;var o=e<0?Math.max(0,e+n):e||0;for(void 0!==r&&(n=r<0?r+n:r);n-- >o;)i[n-o]=t[n];return i}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.fill=function(t,e,r,i){if(void 0===e&&(e=0),void 0===r&&(r=t.length),void 0===i&&(i=0),e<0||e>=t.length)throw"index("+e+") is out of bounds";r=r<=e?e+1:r;for(var n=Math.min(t.length,r),o=e;o<n;o++)t[o]=i},t}();e.Float32ArrayUtils=i},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(9),o=r(1),s=r(16),a=function(t){function e(e,r,i){void 0===i&&(i=0);var o=t.call(this,r)||this;if(!o.glRenderModeValidator(e,r))throw"cannot initialize vertex buffer of unrecognized gl render mode";o.glRenderMode=e,o._vectorSizeLimit=i;var s=o._vectorSizeLimit?new n.Float32Vector(new Float32Array(0),o._vectorSizeLimit):new n.Float32Vector(new Float32Array(0));return o._topVertexVector=s,o.verticiesStack=new Array,o.verticiesStack.push(o._topVertexVector),o}return i(e,t),e.prototype.addVertex=function(t){if(t.length!==o.Constants.floatsPerPositionColor)throw"cannot add vertex repersented by "+t.length+" floats, we only accept verticies of "+o.Constants.floatsPerPositionColor+" floats (x, y, z, r, g, b)";!this._vectorSizeLimit||this._topVertexVector.size+t.length<=this._vectorSizeLimit?this._topVertexVector.addArray(t):(this._topVertexVector=new n.Float32Vector(t,this._vectorSizeLimit),this.verticiesStack.push(this._topVertexVector)),this.refreshWebglBuffer()},e.prototype.glRenderModeValidator=function(t,e){switch(t){case e.POINTS:case e.LINES:case e.LINE_STRIP:case e.LINE_LOOP:case e.TRIANGLES:case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:return!0}return!1},e}(s.GlBufferWrapper);e.VertexBuffer=a},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(13),o=r(26),s=r(8),a=r(27),u=function(t){function e(e,r){void 0===r&&(r={});var i=t.call(this,e,r)||this;return i._camera=new o.Camera(i._canvas.width/i._canvas.height),i.postResizeCallback=function(t,e,r){i.camera.aspectRatio=t.width/t.height},i._shapeFactory=new a.ShapeFactory3d,i}return i(e,t),Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},set:function(t){this._camera=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeFactory",{get:function(){return this._shapeFactory},enumerable:!0,configurable:!0}),e.prototype.addShapeToScene=function(t){switch(t.shapeMode){case"points":return this._pointsShapeBuffer.addShape(t);case"lines":return this.addLine(t);case"triangles":return this._trianglesShapeBuffer.addShape(t);case"rectangles":return this._rectanglesShapeBuffer.addShape(t);case"hexagons":return this._hexagonsShapeBuffer.addShape(t);case"octogons":return this._octogonsShapeBuffer.addShape(t);case"ellipses":return this._ellipsesShapeBuffer.addShape(t);case"box":return this._boxShapeBuffer.addShape(t)}return""},e.prototype.addHomogenoeusShapesArrayToScene=function(t){var e=t[0];if(!e)return new Array;switch(e.shapeMode){case"points":return this._pointsShapeBuffer.addShapes(t);case"lines":return this.addLines(t);case"triangles":return this._trianglesShapeBuffer.addShapes(t);case"rectangles":return this._rectanglesShapeBuffer.addShapes(t);case"hexagons":return this._hexagonsShapeBuffer.addShapes(t);case"octogons":return this._octogonsShapeBuffer.addShapes(t);case"ellipses":return this._ellipsesShapeBuffer.addShapes(t);case"box":return this._boxShapeBuffer.addShapes(t)}return new Array},e.prototype.addVertexToScene=function(t,e,r){this.addVertexToSceneBase(t,e,r)},e.prototype.addPointToLine=function(t,e){return this.addPointToLineBase(t,e)},e.prototype.removeShape=function(t,e){switch(e){case"points":return this._pointsShapeBuffer.removeShape(t);case"lines":return this.removeLine(t);case"triangles":return this._trianglesShapeBuffer.removeShape(t);case"rectangles":return this._rectanglesShapeBuffer.removeShape(t);case"hexagons":return this._hexagonsShapeBuffer.removeShape(t);case"octogons":return this._octogonsShapeBuffer.removeShape(t);case"ellipses":return this._ellipsesShapeBuffer.removeShape(t);case"box":return this._boxShapeBuffer.removeShape(t)}return this.removeShapeFromUnspecifiedBuffer(t)},e.prototype.updateShapeColor=function(t,e,r){switch(r){case"points":return this._pointsShapeBuffer.updateColor(t,e);case"lines":return this.updateLineColor(t,e);case"triangles":return this._trianglesShapeBuffer.updateColor(t,e);case"rectangles":return this._rectanglesShapeBuffer.updateColor(t,e);case"hexagons":return this._hexagonsShapeBuffer.updateColor(t,e);case"octogons":return this._octogonsShapeBuffer.updateColor(t,e);case"ellipses":return this._ellipsesShapeBuffer.updateColor(t,e);case"box":return this._boxShapeBuffer.updateColor(t,e)}return this.updateShapeColorFromUnspecifiedBuffer(t,e)},e.prototype.drawPointShapeBuffer=function(t){this.drawPointShapeBufferBase(t,this._camera.vpMatrix)},e.prototype.drawLine=function(t){this.drawLineBase(t,this._camera.vpMatrix)},e.prototype.drawDynamicShapeBuffer=function(t){this.drawDynamicShapeBufferBase(t,this._camera.vpMatrix)},e.prototype.drawVertexBuffer=function(t){this.drawVertexBufferBase(t,this._camera.vpMatrix)},e.prototype.initializaDynamicShapeBuffers=function(){this._trianglesShapeBuffer=new s.ShapeBuffer(this.gl),this._rectanglesShapeBuffer=new s.ShapeBuffer(this.gl),this._hexagonsShapeBuffer=new s.ShapeBuffer(this.gl),this._octogonsShapeBuffer=new s.ShapeBuffer(this.gl),this._ellipsesShapeBuffer=new s.ShapeBuffer(this.gl),this._boxShapeBuffer=new s.ShapeBuffer(this.gl),this._dynamicShapeBuffers=[this._trianglesShapeBuffer,this._rectanglesShapeBuffer,this._hexagonsShapeBuffer,this._octogonsShapeBuffer,this._ellipsesShapeBuffer,this._boxShapeBuffer]},e}(n.WebGLRenderer);e.WebGLRenderer3d=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(28);!function(t){t.red="red",t.orange="orange",t.yellow="yellow",t.green="green",t.cyan="cyan",t.blue="blue",t.indigo="indigo",t.fuchsia="fuchsia",t.white="white"}(e.Color||(e.Color={}));var n=function(){function t(){}return t.colorToRGBColor=function(t){switch(t){case"red":return new i.RGBColor(1,0,0);case"orange":return new i.RGBColor(1,.271,0);case"yellow":return new i.RGBColor(1,1,0);case"green":return new i.RGBColor(0,1,0);case"cyan":return new i.RGBColor(0,1,1);case"blue":return new i.RGBColor(0,0,1);case"indigo":return new i.RGBColor(.294,0,.51);case"fuchsia":return new i.RGBColor(1,0,1);case"white":return new i.RGBColor(1,1,1);default:throw"could not find color "+t}},t}();e.ColorMapper=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=function(){function t(){}return t.mouseEventToWebGlPoints=function(t,e){var r=t.clientX,n=t.clientY,o=e.getBoundingClientRect(),s=e.width,a=e.height;return r=(r-o.left-s/2)/(s/2),n=(a/2-(n-o.top))/(a/2),new i.Vec3(r,n)},t}();e.MouseHelper=n}])});